(()=>{var e={5:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/png/banner2.png"},202:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=document.querySelector(".header__mobil-menu");null!==e&&e.addEventListener("click",(()=>{const e=document.querySelector(".menu__mobil");null==e||e.classList.toggle("menu__mobil_hidden")}))}},260:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,o,n){this.img=o,this.dots=e,this.blockBanner=t,this.indexDots=n}slider(){this.dots.forEach(((e,t)=>{e.addEventListener("click",(()=>{this.dots.forEach((e=>{e.classList.remove("banner__slider-dots-dot_active")})),e.classList.add("banner__slider-dots-dot_active"),null!=this.img&&(this.blockBanner.innerHTML=`<img src=${this.img[t]}>`)}))}))}sliderInterval(e){let t=this.indexDots;null!=t&&setInterval((()=>{this.dots.forEach((e=>{e.classList.remove("banner__slider-dots-dot_active")})),t==this.dots.length&&(t=0),this.dots[t].classList.add("banner__slider-dots-dot_active"),this.blockBanner.innerHTML=`<img src=${this.img[t]}>`,t+=1}),e)}}},281:(e,t,o)=>{var n={"./Star.svg":671,"./StarGo.svg":529,"./arrow.svg":662,"./search.svg":399,"./shop bag.svg":365,"./user.svg":338};function r(e){var t=i(e);return o(t)}function i(e){if(!o.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=281},338:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/user.svg"},365:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/shop bag.svg"},399:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/search.svg"},492:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/png/banner3.png"},529:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/StarGo.svg"},582:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/png/banner1.png"},662:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/arrow.svg"},671:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/Star.svg"},722:(e,t,o)=>{var n={"./banner1.png":582,"./banner2.png":5,"./banner3.png":492};function r(e){var t=i(e);return o(t)}function i(e){if(!o.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=722},770:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(o(260)),i=n(o(884)),s=n(o(202));function c(e=0,t=6){let o=localStorage.getItem("category")?localStorage.getItem("category"):"Architecture";fetch(`https://www.googleapis.com/books/v1/volumes?q=subject:${o}&key=AIzaSyCvzFkuSjiZgJOh90lZaYuv9qUT2xypKNs&printType=books&startIndex=${e}&maxResults=${t}&langRestrict=en`).then((e=>e.json())).then(a).then(i.default).catch((e=>{alert("An error occurred while loading books. Please try again.")}))}function a(e){let t=e.items;const o=document.querySelector(".container__books");for(let e=0;e<t.length;e++){let n=t[e].volumeInfo.imageLinks.thumbnail?t[e].volumeInfo.imageLinks.thumbnail:"",r=t[e].volumeInfo.title?t[e].volumeInfo.title:"",i=t[e].saleInfo.retailPrice?"$"+(t[e].saleInfo.retailPrice.amount/80).toFixed(2):"",s=t[e].volumeInfo.authors?t[e].volumeInfo.authors.join(", "):"",c=t[e].volumeInfo.averageRating?t[e].volumeInfo.averageRating:"",a=t[e].volumeInfo.ratingsCount?t[e].volumeInfo.ratingsCount+"M review":"",l=t[e].volumeInfo.description?t[e].volumeInfo.description:"There is no description";const u=document.querySelectorAll(".container__books-block");let d=e;u.length>=t.length&&(d=u.length+1);const _=`\n                <div class="container__books-block" index=${d} id="book-${d}">\n                    <img class="container__books-block-img" src="${n}">\n                    <div class="container__books-block-info">\n                        <span class="container__books-block-info-author">${s}</span>\n                        <h2 class="container__books-block-info-title">${r}</h2>\n                        <div class="container__books-block-info-rating">\n                            <div class="container__books-block-info-rating-averageRating"><span class="container__books-block-info-rating-averageRating-textSp">${c}</span></div>\n                            <span class="container__books-block-info-rating-ratingsCount">${a}</span>\n                        </div>\n                        <p class="container__books-block-info-description">${l}</p>\n                        <span class="container__books-block-info-price">${i}</span>\n                        <button type="button" class="container__books-block-info-btn">buy now</button>\n                    </div>\n                </div>\n            `;null==o||o.insertAdjacentHTML("beforeend",_)}document.querySelectorAll(".container__books-block-info-rating-averageRating").forEach(((e,t,o)=>{let n=e.querySelector(".container__books-block-info-rating-averageRating-textSp");if(null===n)return;let r=+n.textContent,i=5-r;if(r>0){for(let t=0;t<r;t++)e.insertAdjacentHTML("beforeend",'<img class="container__books-block-info-rating-averageRating-star-gold" src="./images/svg/StarGo.svg" als="star">');for(let t=0;t<i;t++)e.insertAdjacentHTML("beforeend",'<img class="container__books-block-info-rating-averageRating-star-gold" src="./images/svg/Star.svg" als="star">')}let s=e.querySelector(".container__books-block-info-rating-averageRating-textSp");null!==s&&s.remove()}))}!function(){const e=Array.from(document.querySelectorAll(".menu__list-item-link"));e.forEach((t=>{t.addEventListener("click",(()=>{e.forEach((e=>{e.classList.remove("menu__list-item-link_active")})),t.classList.add("menu__list-item-link_active")}))}))}(),function(){const e=[...document.querySelectorAll(".banner__slider-dots-dot")],t=document.querySelector(".banner__img"),o=["images/png/banner1.png","images/png/banner2.png","images/png/banner3.png"];new r.default(e,t,o).slider(),new r.default(e,t,o,0).sliderInterval(5e3)}(),(()=>{const e=[],t=document.querySelectorAll(".container__categories-list-item");t.forEach((o=>{o.addEventListener("click",(()=>{var n;const r=document.querySelectorAll(".container__books-block");null!==r&&r.forEach((e=>{e.remove()}));const i=document.querySelector(".container__categories-list-item-submit_active");t.forEach((e=>e.classList.remove("container__categories-list-item_active"))),null==i||i.classList.remove("container__categories-list-item-submit_active"),o.classList.add("container__categories-list-item_active"),null===(n=o.querySelector(".container__categories-list-item-submit"))||void 0===n||n.classList.add("container__categories-list-item-submit_active");const s=document.querySelector(".container__categories-list-item-submit_active");null!==s&&(e.pop(),e.unshift(s.value),localStorage.setItem("category",JSON.stringify(e.join()))),c(),function(){var e;document.querySelectorAll(".container__categories-list-item");const t=null===(e=document.querySelector(".container__categories-list-item_active"))||void 0===e?void 0:e.getAttribute("index");null!==t&&localStorage.setItem("indexActive",JSON.stringify(t))}()}))}))})(),function(){let e=localStorage.getItem("indexActive")?parseInt(JSON.parse(localStorage.getItem("indexActive"))):0;const t=document.querySelectorAll(".container__categories-list-item"),o=document.querySelectorAll(".container__categories-list-item-submit");t.forEach((e=>e.classList.remove("container__categories-list-item_active"))),o.forEach((e=>e.classList.remove("container__categories-list-item-submit_active"))),null!==e&&(t[e].classList.add("container__categories-list-item_active"),o[e].classList.add("container__categories-list-item-submit_active"))}(),c(),(()=>{const e=document.querySelector(".container__btn");if(null==e)return;let t=1;e.addEventListener("click",(e=>{c(6*t),t++}))})(),(0,s.default)()},884:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e,t=[];if(null!==localStorage.getItem("publishedBooks")){let t=localStorage.getItem("publishedBooks");e=JSON.parse(t)}else e=[];let r=document.querySelectorAll(".container__books-block-info-btn"),i=0;r.forEach(((r,s,c)=>{r.addEventListener("click",(()=>{var s,c,a,l,u,d;const _=r.closest("[index]");if(null==_)return;const g=_.getAttribute("index"),b=(null==_?void 0:_.querySelector(".container__books-block-img"))?_.querySelector(".container__books-block-img"):null;let m="";null!==b&&(m=b.src);const v=null===(s=null==_?void 0:_.querySelector(".container__books-block-info-author"))||void 0===s?void 0:s.textContent,f=null===(c=_.querySelector(".container__books-block-info-title"))||void 0===c?void 0:c.textContent,k=_.querySelector(".container__books-block-info-rating-averageRating")?null===(a=_.querySelector(".container__books-block-info-rating-averageRating"))||void 0===a?void 0:a.textContent:null,p=_.querySelector(".container__books-block-info-rating-ratingsCount")?null===(l=_.querySelector(".container__books-block-info-rating-ratingsCount"))||void 0===l?void 0:l.textContent:null,h=_.querySelector(".container__books-block-info-description")?null===(u=_.querySelector(".container__books-block-info-description"))||void 0===u?void 0:u.textContent:null,y=_.querySelector(".container__books-block-info-price")?null===(d=_.querySelector(".container__books-block-info-price"))||void 0===d?void 0:d.textContent:null;let S={indexBoock:g,srcImgBock:m,authorBock:v,titleBock:f,averageRatingBock:k,ratingCountBock:p,descriptionBock:h,priceBock:y};r.classList.contains("container__books-block-info-btn_active")?(r.classList.remove("container__books-block-info-btn_active"),r.classList.add("container__books-block-info-btn"),i-=1,r.innerHTML="buy now",t.forEach(((e,o)=>{t[o].indexBoock==g&&t.splice(o,1)})),e.forEach(((t,o)=>{e[o].indexBoock==g&&e.splice(o,1)})),localStorage.setItem("publishedBooks",JSON.stringify(e)),n(i)):(r.classList.add("container__books-block-info-btn_active"),r.classList.remove("container__books-block-info-btn"),r.innerHTML="in the cart",i+=1,t.push(S),e.push(S),localStorage.setItem("publishedBooks",JSON.stringify(e)),o(i))}))}))};const o=e=>{const t=document.querySelector(".header__user-block-cart");if(null!==t)if(0==document.querySelectorAll(".header__user-block-cart-numberBooks").length){const o=document.createElement("div");o.classList.add("header__user-block-cart-numberBooks");let n=document.createElement("p");n.classList.add("header__user-block-cart-numberBooks-text"),n.innerText=`${e}`,o.appendChild(n),t.appendChild(o)}else{const t=document.querySelector(".header__user-block-cart-numberBooks-text");if(null==t)return;t.textContent=`${e}`}},n=e=>{const t=document.querySelector(".header__user-block-cart-numberBooks"),o=document.querySelector(".header__user-block-cart-numberBooks-text");null!=t&&null!=o&&(o.textContent=`${e}`,0===e&&t.remove())}}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{"use strict";function e(e){e.keys().forEach(e)}o(770),o(260),e(o(722)),e(o(281))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVMsRUFDbEJrQyxHQUFLLEtBQU82RyxJQUFjLGFBQWFRLEtBQUtSLEtBQWFBLEVBQVlNLEVBQVFuSCxLQUFLK0QsR0FFM0YsQ0FJRCxJQUFLOEMsRUFBVyxNQUFNLElBQUl0SSxNQUFNLHlEQUNoQ3NJLEVBQVlBLEVBQVVTLFFBQVEsU0FBVSxJQUFJQSxRQUFRLE9BQVEsSUFBSUEsUUFBUSxRQUFTLElBQUlBLFFBQVEsWUFBYSxLQUMxR2xKLEVBQW9CbUosRUFBSVYsQyx3QkNmeEIsU0FBU1csRUFBV2QsR0FBS0EsRUFBRWpJLE9BQU90QixRQUFRdUosRUFBSSxDLGNBQzlDYyxFQUFXLFFBQ1hBLEVBQVcsTyIsInNvdXJjZXMiOlsid2VicGFjazovL2Jvb2tzaG8vLi9pbWFnZXMvcG5nL2Jhbm5lcjIucG5nIiwid2VicGFjazovL2Jvb2tzaG8vLi9zY3JpcHQvbW9iaWwudHMiLCJ3ZWJwYWNrOi8vYm9va3Noby8uL3NjcmlwdC9zbGlkZXIudHMiLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9zdmcvIHN5bmMgXlxcLlxcLy4qJCIsIndlYnBhY2s6Ly9ib29rc2hvLy4vaW1hZ2VzL3N2Zy91c2VyLnN2ZyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vaW1hZ2VzL3N2Zy9zaG9wIGJhZy5zdmciLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9zdmcvc2VhcmNoLnN2ZyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vaW1hZ2VzL3BuZy9iYW5uZXIzLnBuZyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vaW1hZ2VzL3N2Zy9TdGFyR28uc3ZnIiwid2VicGFjazovL2Jvb2tzaG8vLi9pbWFnZXMvcG5nL2Jhbm5lcjEucG5nIiwid2VicGFjazovL2Jvb2tzaG8vLi9pbWFnZXMvc3ZnL2Fycm93LnN2ZyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vaW1hZ2VzL3N2Zy9TdGFyLnN2ZyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vaW1hZ2VzL3BuZy8gc3luYyBeXFwuXFwvLiokIiwid2VicGFjazovL2Jvb2tzaG8vLi9zY3JpcHQvc2NyaXB0LnRzIiwid2VicGFjazovL2Jvb2tzaG8vLi9zY3JpcHQvZGF0YUJvb2sudHMiLCJ3ZWJwYWNrOi8vYm9va3Noby93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9ib29rc2hvL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL2Jvb2tzaG8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2Jvb2tzaG8vd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9ib29rc2hvL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vYm9va3Noby93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2Jvb2tzaG8vd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvcG5nL2Jhbm5lcjIucG5nXCI7IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbW9iaWxBY3RpdmVNZW51KCkge1xyXG4gICAgY29uc3QgbW9iaWxsQnRuTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19tb2JpbC1tZW51XCIpO1xyXG4gICAgaWYgKG1vYmlsbEJ0bk1lbnUgPT09IG51bGwpIHJldHVybjtcclxuICAgIG1vYmlsbEJ0bk1lbnUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbWVudUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnVfX21vYmlsXCIpO1xyXG4gICAgICAgIG1lbnVMaXN0Py5jbGFzc0xpc3QudG9nZ2xlKFwibWVudV9fbW9iaWxfaGlkZGVuXCIpO1xyXG4gICAgfSlcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNsaWRlcnMge1xyXG4gICAgZG90czogRWxlbWVudFtdO1xyXG4gICAgYmxvY2tCYW5uZXI6IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgaW1nOiBhbnlbXTtcclxuICAgIGluZGV4RG90cz86IG51bWJlcjtcclxuICAgIGNvbnN0cnVjdG9yKGRvdHM6IEVsZW1lbnRbXSwgYmxvY2tCYW5uZXI6IEhUTUxEaXZFbGVtZW50LCBpbWc6IGFueVtdLCBpbmRleERvdHM/OiBudW1iZXIpe1xyXG4gICAgICAgIHRoaXMuaW1nID0gaW1nO1xyXG4gICAgICAgIHRoaXMuZG90cyA9IGRvdHM7XHJcbiAgICAgICAgdGhpcy5ibG9ja0Jhbm5lciA9IGJsb2NrQmFubmVyO1xyXG4gICAgICAgIHRoaXMuaW5kZXhEb3RzID0gaW5kZXhEb3RzO1xyXG4gICAgfVxyXG4gICAgc2xpZGVyKCkge1xyXG4gICAgICAgIHRoaXMuZG90cy5mb3JFYWNoKChkb3Q6IEVsZW1lbnQsIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgZG90LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRvdHMuZm9yRWFjaCgodmFsdWU6IEVsZW1lbnQpID0+IHt2YWx1ZS5jbGFzc0xpc3QucmVtb3ZlKFwiYmFubmVyX19zbGlkZXItZG90cy1kb3RfYWN0aXZlXCIpfSk7XHJcbiAgICAgICAgICAgICAgICBkb3QuY2xhc3NMaXN0LmFkZChcImJhbm5lcl9fc2xpZGVyLWRvdHMtZG90X2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuaW1nID09IHVuZGVmaW5lZCApIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tCYW5uZXIuaW5uZXJIVE1MID0gYDxpbWcgc3JjPSR7dGhpcy5pbWdbaW5kZXhdfT5gO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBzbGlkZXJJbnRlcnZhbChudW06IG51bWJlcikge1xyXG4gICAgICAgIGxldCBpbmRleDogbnVtYmVyID0gPG51bWJlcj50aGlzLmluZGV4RG90cztcclxuICAgICAgICBpZihpbmRleCA9PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZG90cy5mb3JFYWNoKCh2YWx1ZTogRWxlbWVudCkgPT4ge3ZhbHVlLmNsYXNzTGlzdC5yZW1vdmUoXCJiYW5uZXJfX3NsaWRlci1kb3RzLWRvdF9hY3RpdmVcIil9KTtcclxuICAgICAgICAgICAgaWYoaW5kZXggPT0gdGhpcy5kb3RzLmxlbmd0aCkgaW5kZXggPSAwOyBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuZG90c1tpbmRleF0uY2xhc3NMaXN0LmFkZChcImJhbm5lcl9fc2xpZGVyLWRvdHMtZG90X2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgdGhpcy5ibG9ja0Jhbm5lci5pbm5lckhUTUwgPSBgPGltZyBzcmM9JHt0aGlzLmltZ1tpbmRleF19PmA7XHJcbiAgICAgICAgICAgIGluZGV4ICs9IDE7XHJcbiAgICAgICAgfSwgbnVtKVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuIiwidmFyIG1hcCA9IHtcblx0XCIuL1N0YXIuc3ZnXCI6IDY3MSxcblx0XCIuL1N0YXJHby5zdmdcIjogNTI5LFxuXHRcIi4vYXJyb3cuc3ZnXCI6IDY2Mixcblx0XCIuL3NlYXJjaC5zdmdcIjogMzk5LFxuXHRcIi4vc2hvcCBiYWcuc3ZnXCI6IDM2NSxcblx0XCIuL3VzZXIuc3ZnXCI6IDMzOFxufTtcblxuXG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dChyZXEpIHtcblx0dmFyIGlkID0gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSk7XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKGlkKTtcbn1cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpIHtcblx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhtYXAsIHJlcSkpIHtcblx0XHR2YXIgZSA9IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyByZXEgKyBcIidcIik7XG5cdFx0ZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnO1xuXHRcdHRocm93IGU7XG5cdH1cblx0cmV0dXJuIG1hcFtyZXFdO1xufVxud2VicGFja0NvbnRleHQua2V5cyA9IGZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0S2V5cygpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKG1hcCk7XG59O1xud2VicGFja0NvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZTtcbm1vZHVsZS5leHBvcnRzID0gd2VicGFja0NvbnRleHQ7XG53ZWJwYWNrQ29udGV4dC5pZCA9IDI4MTsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL3N2Zy91c2VyLnN2Z1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvc3ZnL3Nob3AgYmFnLnN2Z1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvc3ZnL3NlYXJjaC5zdmdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL3BuZy9iYW5uZXIzLnBuZ1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvc3ZnL1N0YXJHby5zdmdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL3BuZy9iYW5uZXIxLnBuZ1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvc3ZnL2Fycm93LnN2Z1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvc3ZnL1N0YXIuc3ZnXCI7IiwidmFyIG1hcCA9IHtcblx0XCIuL2Jhbm5lcjEucG5nXCI6IDU4Mixcblx0XCIuL2Jhbm5lcjIucG5nXCI6IDUsXG5cdFwiLi9iYW5uZXIzLnBuZ1wiOiA0OTJcbn07XG5cblxuZnVuY3Rpb24gd2VicGFja0NvbnRleHQocmVxKSB7XG5cdHZhciBpZCA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpO1xuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhpZCk7XG59XG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKSB7XG5cdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8obWFwLCByZXEpKSB7XG5cdFx0dmFyIGUgPSBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgcmVxICsgXCInXCIpO1xuXHRcdGUuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJztcblx0XHR0aHJvdyBlO1xuXHR9XG5cdHJldHVybiBtYXBbcmVxXTtcbn1cbndlYnBhY2tDb250ZXh0LmtleXMgPSBmdW5jdGlvbiB3ZWJwYWNrQ29udGV4dEtleXMoKSB7XG5cdHJldHVybiBPYmplY3Qua2V5cyhtYXApO1xufTtcbndlYnBhY2tDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmU7XG5tb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tDb250ZXh0O1xud2VicGFja0NvbnRleHQuaWQgPSA3MjI7IiwiaW1wb3J0IFNsaWRlcnMgZnJvbSBcIi4vc2xpZGVyXCI7XHJcbmltcG9ydCBkYXRhQm9vayBmcm9tIFwiLi9kYXRhQm9va1wiO1xyXG5pbXBvcnQgbW9iaWxBY3RpdmVNZW51IGZyb20gXCIuL21vYmlsXCI7XHJcbmZ1bmN0aW9uIG1lbnVBY3RpdmUoKTogdm9pZCB7XHJcbiAgICBjb25zdCBtZW51TGluazogYW55ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1lbnVfX2xpc3QtaXRlbS1saW5rXCIpKTtcclxuICAgIG1lbnVMaW5rLmZvckVhY2goKGl0ZW06IEhUTUxMaW5rRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG1lbnVMaW5rLmZvckVhY2goKHZhbHVlOiBIVE1MTGlua0VsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhbHVlLmNsYXNzTGlzdC5yZW1vdmUoXCJtZW51X19saXN0LWl0ZW0tbGlua19hY3RpdmVcIilcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKFwibWVudV9fbGlzdC1pdGVtLWxpbmtfYWN0aXZlXCIpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcbm1lbnVBY3RpdmUoKVxyXG5cclxuZnVuY3Rpb24gc2xpZGVyKCk6IHZvaWQge1xyXG4gICAgY29uc3QgZG90cyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJhbm5lcl9fc2xpZGVyLWRvdHMtZG90XCIpXTtcclxuICAgIGNvbnN0IGJsb2NrQmFubmVyOiBIVE1MRGl2RWxlbWVudCA9IDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJhbm5lcl9faW1nXCIpO1xyXG4gICAgY29uc3QgaW1nID0gW1wiaW1hZ2VzL3BuZy9iYW5uZXIxLnBuZ1wiLCBcImltYWdlcy9wbmcvYmFubmVyMi5wbmdcIiwgXCJpbWFnZXMvcG5nL2Jhbm5lcjMucG5nXCJdO1xyXG4gICAgY29uc3QgbmV3U2xpZGVyID0gbmV3IFNsaWRlcnMoZG90cywgYmxvY2tCYW5uZXIsIGltZyk7XHJcbiAgICBuZXdTbGlkZXIuc2xpZGVyKClcclxuICAgIGxldCBpbmRleERvdHMgPSAwO1xyXG4gICAgY29uc3QgaW50ZXJ2YWxTbGlkZXIgPSBuZXcgU2xpZGVycyhkb3RzLCBibG9ja0Jhbm5lciwgaW1nLCBpbmRleERvdHMpO1xyXG4gICAgaW50ZXJ2YWxTbGlkZXIuc2xpZGVySW50ZXJ2YWwoNTAwMCk7XHJcbn1cclxuXHJcbnNsaWRlcigpXHJcblxyXG5jb25zdCBzZWxlY3RlZENhdGVnb3J5ID0gKCgpID0+IHtcclxuICAgIGNvbnN0IHZhbHVlU2VsZWN0ZWRDYXRlZ29yeTogc3RyaW5nW10gPSBbIF07XHJcbiAgICBjb25zdCBjYXRlZ29yaWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb250YWluZXJfX2NhdGVnb3JpZXMtbGlzdC1pdGVtXCIpO1xyXG4gICAgY2F0ZWdvcmllcy5mb3JFYWNoKChjYXRlZ29yeSkgPT4ge1xyXG4gICAgICAgIGNhdGVnb3J5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXJCb29rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGFpbmVyX19ib29rcy1ibG9ja1wiKTtcclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lckJvb2tzICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXJCb29rcy5mb3JFYWNoKGJvb2tzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBib29rcy5yZW1vdmUoKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBjYXRlZ29yaWVzSW5wdXRBY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW0tc3VibWl0X2FjdGl2ZVwiKVxyXG4gICAgICAgICAgICBjYXRlZ29yaWVzLmZvckVhY2goKHZhbHVlKSA9PiB2YWx1ZS5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGFpbmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbV9hY3RpdmVcIikpO1xyXG4gICAgICAgICAgICBjYXRlZ29yaWVzSW5wdXRBY3RpdmU/LmNsYXNzTGlzdC5yZW1vdmUoXCJjb250YWluZXJfX2NhdGVnb3JpZXMtbGlzdC1pdGVtLXN1Ym1pdF9hY3RpdmVcIik7XHJcbiAgICAgICAgICAgIGNhdGVnb3J5LmNsYXNzTGlzdC5hZGQoXCJjb250YWluZXJfX2NhdGVnb3JpZXMtbGlzdC1pdGVtX2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgY2F0ZWdvcnkucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2NhdGVnb3JpZXMtbGlzdC1pdGVtLXN1Ym1pdFwiKT8uY2xhc3NMaXN0LmFkZChcImNvbnRhaW5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW0tc3VibWl0X2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVDYXRlZ29yeTogbnVsbCB8IEhUTUxJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW0tc3VibWl0X2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlQ2F0ZWdvcnkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlU2VsZWN0ZWRDYXRlZ29yeS5wb3AoKTtcclxuICAgICAgICAgICAgICAgIHZhbHVlU2VsZWN0ZWRDYXRlZ29yeS51bnNoaWZ0KHZhbHVlQ2F0ZWdvcnkudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjYXRlZ29yeVwiLCBKU09OLnN0cmluZ2lmeSh2YWx1ZVNlbGVjdGVkQ2F0ZWdvcnkuam9pbigpKSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBBUEkoKVxyXG4gICAgICAgICAgICBzYXZlQ2F0ZWdvcmllc0FjdGl2ZSgpXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbiAgICBcclxufSkoKVxyXG5cclxuZnVuY3Rpb24gc2F2ZUNhdGVnb3JpZXNBY3RpdmUoKSB7XHJcbiAgICBjb25zdCBjYXRlZ29yaWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb250YWluZXJfX2NhdGVnb3JpZXMtbGlzdC1pdGVtXCIpO1xyXG4gICAgY29uc3QgYWN0aXZlQ2F0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2NhdGVnb3JpZXMtbGlzdC1pdGVtX2FjdGl2ZVwiKT8uZ2V0QXR0cmlidXRlKFwiaW5kZXhcIik7XHJcbiAgICBpZiAoYWN0aXZlQ2F0ICE9PSBudWxsKSB7XHJcbiAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImluZGV4QWN0aXZlXCIsIEpTT04uc3RyaW5naWZ5KGFjdGl2ZUNhdCkpICBcclxuICAgIH0gICBcclxufVxyXG5cclxubG9hZENhdGVnb3JpZXNBY3RpdmUoKVxyXG5cclxuZnVuY3Rpb24gbG9hZENhdGVnb3JpZXNBY3RpdmUoKSB7XHJcbiAgICBsZXQgbG9jYWxJbmRleEFjdGl2ZTogbnVtYmVyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJpbmRleEFjdGl2ZVwiKSA/IHBhcnNlSW50KEpTT04ucGFyc2UoPHN0cmluZz5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImluZGV4QWN0aXZlXCIpKSkgOiArMDtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhaW5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW1cIik7XHJcbiAgICBjb25zdCBjYXRlZ29yaWVzSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhaW5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW0tc3VibWl0XCIpO1xyXG4gICAgY2F0ZWdvcmllcy5mb3JFYWNoKGNhdGVnb3J5ID0+IGNhdGVnb3J5LmNsYXNzTGlzdC5yZW1vdmUoXCJjb250YWluZXJfX2NhdGVnb3JpZXMtbGlzdC1pdGVtX2FjdGl2ZVwiKSk7XHJcbiAgICBjYXRlZ29yaWVzSW5wdXQuZm9yRWFjaChjYXRlZ29yeUlucHV0ID0+IGNhdGVnb3J5SW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImNvbnRhaW5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW0tc3VibWl0X2FjdGl2ZVwiKSk7XHJcbiAgICBpZiAobG9jYWxJbmRleEFjdGl2ZSA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgY2F0ZWdvcmllc1tsb2NhbEluZGV4QWN0aXZlXS5jbGFzc0xpc3QuYWRkKFwiY29udGFpbmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbV9hY3RpdmVcIik7XHJcbiAgICBjYXRlZ29yaWVzSW5wdXRbbG9jYWxJbmRleEFjdGl2ZV0uY2xhc3NMaXN0LmFkZChcImNvbnRhaW5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW0tc3VibWl0X2FjdGl2ZVwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gQVBJKHN0YXJ0SW5kZXggPSAwLCBtYXhSZXN1bHRzID0gNikge1xyXG4gICAgbGV0IGNhdGVnb3J5OiBzdHJpbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImNhdGVnb3J5XCIpID8gPHN0cmluZz5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImNhdGVnb3J5XCIpIDogXCJBcmNoaXRlY3R1cmVcIjtcclxuICAgIGZldGNoKGBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9ib29rcy92MS92b2x1bWVzP3E9c3ViamVjdDoke2NhdGVnb3J5fSZrZXk9QUl6YVN5Q3Z6Rmt1U2ppWmdKT2g5MGxaYVl1djlxVVQyeHlwS05zJnByaW50VHlwZT1ib29rcyZzdGFydEluZGV4PSR7c3RhcnRJbmRleH0mbWF4UmVzdWx0cz0ke21heFJlc3VsdHN9JmxhbmdSZXN0cmljdD1lbmApXHJcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgICAgLnRoZW4oZGlzcGxheVJlc3VsdClcclxuICAgICAgICAudGhlbihkYXRhQm9vaylcclxuICAgICAgICAuY2F0Y2goZXJyPT4ge1xyXG4gICAgICAgICAgICBhbGVydChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGxvYWRpbmcgYm9va3MuIFBsZWFzZSB0cnkgYWdhaW4uXCIpO1xyXG4gICAgICAgIH0pXHJcbn1cclxuQVBJKClcclxuXHJcbmZ1bmN0aW9uIGRpc3BsYXlSZXN1bHQoZGF0YTogYW55KSB7XHJcblxyXG4gICAgbGV0IHJlc3VsdEFQSSA9IGRhdGEuaXRlbXM7XHJcbiAgICBjb25zdCBjb250YWluZXJCb29rczogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2Jvb2tzXCIpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHRBUEkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgaW1nID0gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8uaW1hZ2VMaW5rcy50aHVtYm5haWwgPyByZXN1bHRBUElbaV0udm9sdW1lSW5mby5pbWFnZUxpbmtzLnRodW1ibmFpbCA6IFwiXCI7XHJcbiAgICAgICAgbGV0IHRpdGxlID0gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8udGl0bGUgPyByZXN1bHRBUElbaV0udm9sdW1lSW5mby50aXRsZSA6IFwiXCI7XHJcbiAgICAgICAgbGV0IHByaWNlOiBudW1iZXIgfCBzdHJpbmcgPSByZXN1bHRBUElbaV0uc2FsZUluZm8ucmV0YWlsUHJpY2UgPyBcIiRcIiArIChyZXN1bHRBUElbaV0uc2FsZUluZm8ucmV0YWlsUHJpY2UuYW1vdW50IC8gODApLnRvRml4ZWQoMikgOiBcIlwiO1xyXG4gICAgICAgIGxldCBhdXRob3JzOiBzdHJpbmcgPSByZXN1bHRBUElbaV0udm9sdW1lSW5mby5hdXRob3JzID8gKHJlc3VsdEFQSVtpXS52b2x1bWVJbmZvLmF1dGhvcnMpLmpvaW4oXCIsIFwiKSA6IFwiXCI7XHJcbiAgICAgICAgbGV0IGF2ZXJhZ2VSYXRpbmc6IHN0cmluZyA9IHJlc3VsdEFQSVtpXS52b2x1bWVJbmZvLmF2ZXJhZ2VSYXRpbmcgPyByZXN1bHRBUElbaV0udm9sdW1lSW5mby5hdmVyYWdlUmF0aW5nIDogXCJcIjtcclxuICAgICAgICBsZXQgcmF0aW5nc0NvdW50OiBzdHJpbmcgPSByZXN1bHRBUElbaV0udm9sdW1lSW5mby5yYXRpbmdzQ291bnQgPyByZXN1bHRBUElbaV0udm9sdW1lSW5mby5yYXRpbmdzQ291bnQgKyBcIk1cIiArIFwiIHJldmlld1wiIDogXCJcIjtcclxuICAgICAgICBsZXQgZGVzY3JpcHRpb246IHN0cmluZyA9IHJlc3VsdEFQSVtpXS52b2x1bWVJbmZvLmRlc2NyaXB0aW9uID8gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8uZGVzY3JpcHRpb24gOiBcIlRoZXJlIGlzIG5vIGRlc2NyaXB0aW9uXCI7XHJcbiAgICAgICAgY29uc3QgcmVwZXRpbmdJbmRleCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGFpbmVyX19ib29rcy1ibG9ja1wiKTtcclxuICAgICAgICBsZXQgaW5kZXggPSBpO1xyXG4gICAgICAgIGlmIChyZXBldGluZ0luZGV4Lmxlbmd0aCA+PSByZXN1bHRBUEkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gcmVwZXRpbmdJbmRleC5sZW5ndGggKyAxOyBcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc2hvd0Jvb2sgPSBgXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9ja1wiIGluZGV4PSR7aW5kZXh9IGlkPVwiYm9vay0ke2luZGV4fVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWltZ1wiIHNyYz1cIiR7aW1nfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm9cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tYXV0aG9yXCI+JHthdXRob3JzfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXRpdGxlXCI+JHt0aXRsZX08L2gyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZ1wiPjxzcGFuIGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZy1hdmVyYWdlUmF0aW5nLXRleHRTcFwiPiR7YXZlcmFnZVJhdGluZ308L3NwYW4+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctcmF0aW5nc0NvdW50XCI+JHtyYXRpbmdzQ291bnR9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tZGVzY3JpcHRpb25cIj4ke2Rlc2NyaXB0aW9ufTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tcHJpY2VcIj4ke3ByaWNlfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tYnRuXCI+YnV5IG5vdzwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGA7ICAgXHJcbiAgICAgICAgY29udGFpbmVyQm9va3M/Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBzaG93Qm9vayk7ICAgICBcclxuICAgICAgICBcclxuICAgIH1cclxuICAgIGF2ZXJhZ2VSYXRpbmcoKVxyXG59XHJcblxyXG5mdW5jdGlvbiBhdmVyYWdlUmF0aW5nKCkge1xyXG4gICAgbGV0IG5ld0ltZ0dvbGQgPSBgPGltZyBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZy1zdGFyLWdvbGRcIiBzcmM9XCIuL2ltYWdlcy9zdmcvU3RhckdvLnN2Z1wiIGFscz1cInN0YXJcIj5gO1xyXG4gICAgbGV0IGltZ1N0YXIgPSBgPGltZyBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZy1zdGFyLWdvbGRcIiBzcmM9XCIuL2ltYWdlcy9zdmcvU3Rhci5zdmdcIiBhbHM9XCJzdGFyXCI+YDtcclxuICAgIGNvbnN0IGRpdkF2ZXJhZ2VSYXRpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZ1wiKTtcclxuICAgIFxyXG4gICAgZGl2QXZlcmFnZVJhdGluZy5mb3JFYWNoKChkaXYsIGluZGV4LCBhcnJheSkgPT4ge1xyXG4gICAgICAgIGxldCB0ZXh0U3BhbjogYW55ID0gZGl2LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZy1hdmVyYWdlUmF0aW5nLXRleHRTcFwiKTtcclxuICAgICAgICBpZiAodGV4dFNwYW4gPT09IG51bGwpIHJldHVybjtcclxuICAgICAgICBsZXQgbnVtQ29udGVudDogbnVtYmVyID0gK3RleHRTcGFuLnRleHRDb250ZW50O1xyXG4gICAgICAgIGxldCByZXN1bHRSYXRpbmcgPSA1IC0gbnVtQ29udGVudDtcclxuXHJcbiAgICAgICAgaWYgKG51bUNvbnRlbnQgPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQ29udGVudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBkaXYuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIG5ld0ltZ0dvbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0UmF0aW5nOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGRpdi5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgaW1nU3Rhcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGZpcnNFbGVtZW50RGl2QXZlcmFnZVJhdGluZyA9IGRpdi5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZy10ZXh0U3BcIik7XHJcbiAgICAgICAgaWYgKGZpcnNFbGVtZW50RGl2QXZlcmFnZVJhdGluZyAhPT0gbnVsbCkgZmlyc0VsZW1lbnREaXZBdmVyYWdlUmF0aW5nLnJlbW92ZSgpO1xyXG4gICAgICAgIFxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbmNvbnN0IGxvYWRNb3JlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgYnRuTG9hZE1vcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYnRuXCIpO1xyXG4gICAgaWYgKGJ0bkxvYWRNb3JlID09IG51bGwpIHJldHVybjtcclxuICAgIGxldCBjbGljayA9IDE7XHJcbiAgICBsZXQgY291bnQgPSA2O1xyXG4gICAgYnRuTG9hZE1vcmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgIGxldCBzdGFydEluZGV4ID0gY2xpY2sgKiBjb3VudDtcclxuICAgICAgICBBUEkoc3RhcnRJbmRleClcclxuICAgICAgICBjbGljaysrO1xyXG4gICAgfSlcclxufVxyXG5sb2FkTW9yZSgpXHJcbm1vYmlsQWN0aXZlTWVudSgpIiwiXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRhdGFCb29rKCk6IHZvaWQge1xyXG4gICAgdHlwZSBpbmZvQm9jayA9IHtcclxuICAgICAgICAgICAgICAgIGluZGV4Qm9vY2s6IHN0cmluZyB8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBzcmNJbWdCb2NrOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBhdXRob3JCb2NrOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICB0aXRsZUJvY2s6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgIGF2ZXJhZ2VSYXRpbmdCb2NrOiBzdHJpbmcgfCBudWxsLFxyXG4gICAgICAgICAgICAgICAgcmF0aW5nQ291bnRCb2NrOiBzdHJpbmcgfCBudWxsLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb25Cb2NrOiBzdHJpbmcgfCBudWxsLFxyXG4gICAgICAgICAgICAgICAgcHJpY2VCb2NrOiBzdHJpbmcgfCBudWxsLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgbGV0IGJvb2tzRGF0YTogQXJyYXk8aW5mb0JvY2s+ID0gWyBdO1xyXG4gICAgbGV0IGJvb2tzRGF0YUxvY2FsOiBBcnJheTxpbmZvQm9jaz47XHJcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwdWJsaXNoZWRCb29rc1wiKSAhPT0gbnVsbCkge1xyXG4gICAgICAgIGxldCBwYXJzZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicHVibGlzaGVkQm9va3NcIilcclxuICAgICAgICBib29rc0RhdGFMb2NhbCA9IEpTT04ucGFyc2UoPHN0cmluZz5wYXJzZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJvb2tzRGF0YUxvY2FsID0gWyBdO1xyXG4gICAgfVxyXG4gICAgbGV0IGJ0bkJ1eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLWJ0blwiKTtcclxuICAgIFxyXG4gICAgbGV0IG51bWJlck9mQm9rcyA9IDA7XHJcbiAgICBidG5CdXkuZm9yRWFjaCgoYmF5LCBpbmRleCwgYXJyYXkpID0+IHtcclxuICAgICAgICBiYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYm9vY2sgPSBiYXkuY2xvc2VzdChgW2luZGV4XWApO1xyXG4gICAgICAgICAgICBpZiAoYm9vY2sgPT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleEJvb2NrOiBzdHJpbmcgfCBudWxsID0gYm9vY2suZ2V0QXR0cmlidXRlKFwiaW5kZXhcIilcclxuICAgICAgICAgICAgY29uc3QgaW1nQm9jazogSFRNTEltYWdlRWxlbWVudCB8IG51bGwgPSBib29jaz8ucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrLWltZ1wiKSA/IGJvb2NrLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbWdcIikgOiBudWxsO1xyXG4gICAgICAgICAgICBsZXQgc3JjSW1nQm9jazogc3RyaW5nID0gXCJcIlxyXG4gICAgICAgICAgICBpZiAoaW1nQm9jayAhPT0gbnVsbCkgc3JjSW1nQm9jayA9IGltZ0JvY2suc3JjO1xyXG4gICAgICAgICAgICBjb25zdCBhdXRob3JCb2NrOiBzdHJpbmcgPSA8c3RyaW5nPmJvb2NrPy5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1hdXRob3JcIik/LnRleHRDb250ZW50O1xyXG4gICAgICAgICAgICBjb25zdCB0aXRsZUJvY2s6IHN0cmluZyA9IDxzdHJpbmc+Ym9vY2sucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tdGl0bGVcIik/LnRleHRDb250ZW50O1xyXG4gICAgICAgICAgICBjb25zdCBhdmVyYWdlUmF0aW5nQm9jazogc3RyaW5nIHwgbnVsbCA9IGJvb2NrLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZy1hdmVyYWdlUmF0aW5nXCIpID8gPHN0cmluZz5ib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZ1wiKT8udGV4dENvbnRlbnQgOiBudWxsO1xyXG4gICAgICAgICAgICBjb25zdCByYXRpbmdDb3VudEJvY2s6IHN0cmluZyB8IG51bGwgPSBib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctcmF0aW5nc0NvdW50XCIpID8gPHN0cmluZz5ib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctcmF0aW5nc0NvdW50XCIpPy50ZXh0Q29udGVudCA6IG51bGw7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uQm9jazogc3RyaW5nIHwgbnVsbCA9IGJvb2NrLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLWRlc2NyaXB0aW9uXCIpID8gPHN0cmluZz5ib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1kZXNjcmlwdGlvblwiKT8udGV4dENvbnRlbnQgOiBudWxsO1xyXG4gICAgICAgICAgICBjb25zdCBwcmljZUJvY2s6IHN0cmluZyB8IG51bGwgPSBib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1wcmljZVwiKSA/IDxzdHJpbmc+Ym9vY2sucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tcHJpY2VcIik/LnRleHRDb250ZW50IDogbnVsbDtcclxuICAgICAgICAgICAgbGV0IGluZm9Cb2NrOiBpbmZvQm9jayA9IHtcclxuICAgICAgICAgICAgICAgIGluZGV4Qm9vY2s6IGluZGV4Qm9vY2ssXHJcbiAgICAgICAgICAgICAgICBzcmNJbWdCb2NrOiBzcmNJbWdCb2NrLFxyXG4gICAgICAgICAgICAgICAgYXV0aG9yQm9jazogYXV0aG9yQm9jayxcclxuICAgICAgICAgICAgICAgIHRpdGxlQm9jazogdGl0bGVCb2NrLFxyXG4gICAgICAgICAgICAgICAgYXZlcmFnZVJhdGluZ0JvY2s6IGF2ZXJhZ2VSYXRpbmdCb2NrLFxyXG4gICAgICAgICAgICAgICAgcmF0aW5nQ291bnRCb2NrOiByYXRpbmdDb3VudEJvY2ssXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbkJvY2s6IGRlc2NyaXB0aW9uQm9jayxcclxuICAgICAgICAgICAgICAgIHByaWNlQm9jazogcHJpY2VCb2NrXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoYmF5LmNsYXNzTGlzdC5jb250YWlucyhcImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1idG5fYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBiYXkuY2xhc3NMaXN0LnJlbW92ZShcImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1idG5fYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgYmF5LmNsYXNzTGlzdC5hZGQoXCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tYnRuXCIpXHJcbiAgICAgICAgICAgICAgICBudW1iZXJPZkJva3MgPSBudW1iZXJPZkJva3MgLSAxO1xyXG4gICAgICAgICAgICAgICAgYmF5LmlubmVySFRNTCA9IFwiYnV5IG5vd1wiO1xyXG4gICAgICAgICAgICAgICAgYm9va3NEYXRhLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChib29rc0RhdGFbaW5kZXhdLmluZGV4Qm9vY2sgPT0gaW5kZXhCb29jaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib29rc0RhdGEuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgYm9va3NEYXRhTG9jYWwuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJvb2tzRGF0YUxvY2FsW2luZGV4XS5pbmRleEJvb2NrID09IGluZGV4Qm9vY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9va3NEYXRhTG9jYWwuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwdWJsaXNoZWRCb29rc1wiLCBKU09OLnN0cmluZ2lmeShib29rc0RhdGFMb2NhbCkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZW1vdmVUb0Jvb2sobnVtYmVyT2ZCb2tzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJheS5jbGFzc0xpc3QuYWRkKFwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLWJ0bl9hY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICBiYXkuY2xhc3NMaXN0LnJlbW92ZShcImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1idG5cIilcclxuICAgICAgICAgICAgICAgIGJheS5pbm5lckhUTUwgPSBcImluIHRoZSBjYXJ0XCI7XHJcbiAgICAgICAgICAgICAgICBudW1iZXJPZkJva3MgPSBudW1iZXJPZkJva3MgKyAxO1xyXG4gICAgICAgICAgICAgICAgYm9va3NEYXRhLnB1c2goaW5mb0JvY2spO1xyXG4gICAgICAgICAgICAgICAgYm9va3NEYXRhTG9jYWwucHVzaChpbmZvQm9jayk7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInB1Ymxpc2hlZEJvb2tzXCIsIEpTT04uc3RyaW5naWZ5KGJvb2tzRGF0YUxvY2FsKSk7XHJcbiAgICAgICAgICAgICAgICBhZGRUb0Jvb2sobnVtYmVyT2ZCb2tzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5jb25zdCBhZGRUb0Jvb2sgPSAobnVtYmVyT2ZCb2tzOiBudW1iZXIpID0+IHtcclxuICAgIGNvbnN0IGNhcnQ6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX191c2VyLWJsb2NrLWNhcnRcIik7XHJcbiAgICBpZiAoY2FydCA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgY29uc3QgbnVtYmVyQm9va3NEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhlYWRlcl9fdXNlci1ibG9jay1jYXJ0LW51bWJlckJvb2tzXCIpLmxlbmd0aDtcclxuICAgIGlmIChudW1iZXJCb29rc0RpdiA9PSAwKSB7XHJcbiAgICAgICAgY29uc3QgbnVtYmVyQm9va3M6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBudW1iZXJCb29rcy5jbGFzc0xpc3QuYWRkKFwiaGVhZGVyX191c2VyLWJsb2NrLWNhcnQtbnVtYmVyQm9va3NcIik7XHJcbiAgICAgICAgbGV0IG51bVRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgICAgICBudW1UZXh0LmNsYXNzTGlzdC5hZGQoXCJoZWFkZXJfX3VzZXItYmxvY2stY2FydC1udW1iZXJCb29rcy10ZXh0XCIpO1xyXG4gICAgICAgIG51bVRleHQuaW5uZXJUZXh0ID0gYCR7bnVtYmVyT2ZCb2tzfWA7XHJcbiAgICAgICAgbnVtYmVyQm9va3MuYXBwZW5kQ2hpbGQobnVtVGV4dCk7XHJcbiAgICAgICAgY2FydC5hcHBlbmRDaGlsZChudW1iZXJCb29rcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IG51bWJlckJvb2tzVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX191c2VyLWJsb2NrLWNhcnQtbnVtYmVyQm9va3MtdGV4dFwiKTtcclxuICAgICAgICBpZiAobnVtYmVyQm9va3NUZXh0ID09IG51bGwpIHJldHVybjtcclxuICAgICAgICBudW1iZXJCb29rc1RleHQudGV4dENvbnRlbnQgPSBgJHtudW1iZXJPZkJva3N9YFxyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuY29uc3QgcmVtb3ZlVG9Cb29rID0gKG51bWJlck9mQm9rczogbnVtYmVyKSA9PiB7XHJcbiAgICBjb25zdCBudW1iZXJCb29rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX191c2VyLWJsb2NrLWNhcnQtbnVtYmVyQm9va3NcIik7XHJcbiAgICBjb25zdCBudW1iZXJCb29rc1RleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fdXNlci1ibG9jay1jYXJ0LW51bWJlckJvb2tzLXRleHRcIik7XHJcbiAgICBpZiAobnVtYmVyQm9va3MgPT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgaWYgKG51bWJlckJvb2tzVGV4dCA9PSBudWxsKSByZXR1cm47XHJcbiAgICBudW1iZXJCb29rc1RleHQudGV4dENvbnRlbnQgPSBgJHtudW1iZXJPZkJva3N9YDtcclxuICAgIGlmIChudW1iZXJPZkJva3MgPT09IDApIG51bWJlckJvb2tzLnJlbW92ZSgpO1xyXG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0ICYmIGRvY3VtZW50LmN1cnJlbnRTY3JpcHQudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09PSAnU0NSSVBUJylcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYztcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSB7XG5cdFx0XHR2YXIgaSA9IHNjcmlwdHMubGVuZ3RoIC0gMTtcblx0XHRcdHdoaWxlIChpID4gLTEgJiYgKCFzY3JpcHRVcmwgfHwgIS9eaHR0cChzPyk6Ly50ZXN0KHNjcmlwdFVybCkpKSBzY3JpcHRVcmwgPSBzY3JpcHRzW2ktLV0uc3JjO1xuXHRcdH1cblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC9eYmxvYjovLCBcIlwiKS5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiaW1wb3J0IFwiLi9zY3JpcHQvc2NyaXB0LnRzXCI7XHJcbmltcG9ydCBcIi4vc2NyaXB0L3NsaWRlci50c1wiXHJcbmltcG9ydCBcIi4vc3R5bGUvc3R5bGUuc2Nzc1wiO1xyXG5mdW5jdGlvbiByZXF1aXJlQWxsKHIpIHsgci5rZXlzKCkuZm9yRWFjaChyKTsgfSAvLyDRhNGD0L3QutGG0LjRjyDQtNC70Y8g0LTQvtCx0LDQstC70LXQvdC40Y8g0LLRgdC10YUg0LrQsNGA0YLQuNC90L7QuiDQsiB3ZWJwYWNrXHJcbnJlcXVpcmVBbGwocmVxdWlyZS5jb250ZXh0KCcvaW1hZ2VzL3BuZycsIHRydWUpKTtcclxucmVxdWlyZUFsbChyZXF1aXJlLmNvbnRleHQoJy9pbWFnZXMvc3ZnJywgdHJ1ZSkpOyJdLCJuYW1lcyI6WyJtb2JpbGxCdG5NZW51IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm1lbnVMaXN0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY29uc3RydWN0b3IiLCJkb3RzIiwiYmxvY2tCYW5uZXIiLCJpbWciLCJpbmRleERvdHMiLCJ0aGlzIiwic2xpZGVyIiwiZm9yRWFjaCIsImRvdCIsImluZGV4IiwidmFsdWUiLCJyZW1vdmUiLCJhZGQiLCJ1bmRlZmluZWQiLCJpbm5lckhUTUwiLCJzbGlkZXJJbnRlcnZhbCIsIm51bSIsInNldEludGVydmFsIiwibGVuZ3RoIiwibWFwIiwid2VicGFja0NvbnRleHQiLCJyZXEiLCJpZCIsIndlYnBhY2tDb250ZXh0UmVzb2x2ZSIsIl9fd2VicGFja19yZXF1aXJlX18iLCJvIiwiZSIsIkVycm9yIiwiY29kZSIsImtleXMiLCJPYmplY3QiLCJyZXNvbHZlIiwibW9kdWxlIiwiZXhwb3J0cyIsIkFQSSIsInN0YXJ0SW5kZXgiLCJtYXhSZXN1bHRzIiwiY2F0ZWdvcnkiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwiZGlzcGxheVJlc3VsdCIsImNhdGNoIiwiZXJyIiwiYWxlcnQiLCJkYXRhIiwicmVzdWx0QVBJIiwiaXRlbXMiLCJjb250YWluZXJCb29rcyIsImkiLCJ2b2x1bWVJbmZvIiwiaW1hZ2VMaW5rcyIsInRodW1ibmFpbCIsInRpdGxlIiwicHJpY2UiLCJzYWxlSW5mbyIsInJldGFpbFByaWNlIiwiYW1vdW50IiwidG9GaXhlZCIsImF1dGhvcnMiLCJqb2luIiwiYXZlcmFnZVJhdGluZyIsInJhdGluZ3NDb3VudCIsImRlc2NyaXB0aW9uIiwicmVwZXRpbmdJbmRleCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzaG93Qm9vayIsImluc2VydEFkamFjZW50SFRNTCIsImRpdiIsImFycmF5IiwidGV4dFNwYW4iLCJudW1Db250ZW50IiwidGV4dENvbnRlbnQiLCJyZXN1bHRSYXRpbmciLCJmaXJzRWxlbWVudERpdkF2ZXJhZ2VSYXRpbmciLCJtZW51TGluayIsIkFycmF5IiwiZnJvbSIsIml0ZW0iLCJtZW51QWN0aXZlIiwidmFsdWVTZWxlY3RlZENhdGVnb3J5IiwiY2F0ZWdvcmllcyIsImJvb2tzIiwiY2F0ZWdvcmllc0lucHV0QWN0aXZlIiwidmFsdWVDYXRlZ29yeSIsInBvcCIsInVuc2hpZnQiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImFjdGl2ZUNhdCIsImdldEF0dHJpYnV0ZSIsInNhdmVDYXRlZ29yaWVzQWN0aXZlIiwibG9jYWxJbmRleEFjdGl2ZSIsInBhcnNlSW50IiwicGFyc2UiLCJjYXRlZ29yaWVzSW5wdXQiLCJjYXRlZ29yeUlucHV0IiwibG9hZENhdGVnb3JpZXNBY3RpdmUiLCJidG5Mb2FkTW9yZSIsImNsaWNrIiwibG9hZE1vcmUiLCJib29rc0RhdGFMb2NhbCIsImJvb2tzRGF0YSIsImJ0bkJ1eSIsIm51bWJlck9mQm9rcyIsImJheSIsImJvb2NrIiwiY2xvc2VzdCIsImluZGV4Qm9vY2siLCJpbWdCb2NrIiwic3JjSW1nQm9jayIsInNyYyIsImF1dGhvckJvY2siLCJ0aXRsZUJvY2siLCJhdmVyYWdlUmF0aW5nQm9jayIsInJhdGluZ0NvdW50Qm9jayIsImRlc2NyaXB0aW9uQm9jayIsInByaWNlQm9jayIsImluZm9Cb2NrIiwiY29udGFpbnMiLCJzcGxpY2UiLCJyZW1vdmVUb0Jvb2siLCJwdXNoIiwiYWRkVG9Cb29rIiwiY2FydCIsIm51bWJlckJvb2tzIiwiY3JlYXRlRWxlbWVudCIsIm51bVRleHQiLCJpbm5lclRleHQiLCJhcHBlbmRDaGlsZCIsIm51bWJlckJvb2tzVGV4dCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJ3aW5kb3ciLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJjdXJyZW50U2NyaXB0IiwidGFnTmFtZSIsInRvVXBwZXJDYXNlIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwidGVzdCIsInJlcGxhY2UiLCJwIiwicmVxdWlyZUFsbCJdLCJzb3VyY2VSb290IjoiIn0=