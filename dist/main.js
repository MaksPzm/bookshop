(()=>{var e={5:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/png/banner2.png"},202:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=document.querySelector(".header__mobil-menu");null!==e&&e.addEventListener("click",(()=>{const e=document.querySelector(".menu__mobil");null==e||e.classList.toggle("menu__mobil_hidden")}))}},260:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,o,n){this.img=o,this.dots=e,this.blockBanner=t,this.indexDots=n}slider(){this.dots.forEach(((e,t)=>{e.addEventListener("click",(()=>{this.dots.forEach((e=>{e.classList.remove("banner__slider-dots-dot_active")})),e.classList.add("banner__slider-dots-dot_active"),null!=this.img&&(this.blockBanner.innerHTML=`<img src=${this.img[t]}>`)}))}))}sliderInterval(e){let t=this.indexDots;null!=t&&setInterval((()=>{this.dots.forEach((e=>{e.classList.remove("banner__slider-dots-dot_active")})),t==this.dots.length&&(t=0),this.dots[t].classList.add("banner__slider-dots-dot_active"),this.blockBanner.innerHTML=`<img src=${this.img[t]}>`,t+=1}),e)}}},281:(e,t,o)=>{var n={"./Star.svg":671,"./StarGo.svg":529,"./arrow.svg":662,"./search.svg":399,"./shop bag.svg":365,"./user.svg":338};function r(e){var t=i(e);return o(t)}function i(e){if(!o.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=281},338:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/user.svg"},352:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){document.querySelectorAll("container__books-block-info-btn_active").forEach(((e,t,o)=>{const n=e.parentElement;console.log("parent: ",n)}))}},365:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/shop bag.svg"},399:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/search.svg"},492:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/png/banner3.png"},529:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/StarGo.svg"},582:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/png/banner1.png"},662:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/arrow.svg"},671:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/Star.svg"},693:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/png/promo 1.png"},722:(e,t,o)=>{var n={"./banner1.png":582,"./banner2.png":5,"./banner3.png":492,"./promo 1.png":693,"./promo 2.png":862};function r(e){var t=i(e);return o(t)}function i(e){if(!o.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=722},770:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(o(260)),i=n(o(884)),s=n(o(352)),c=n(o(202));function a(e=0,t=6){let o=localStorage.getItem("category")?localStorage.getItem("category"):"Architecture";fetch(`https://www.googleapis.com/books/v1/volumes?q=subject:${o}&key=AIzaSyCvzFkuSjiZgJOh90lZaYuv9qUT2xypKNs&printType=books&startIndex=${e}&maxResults=${t}&langRestrict=en`).then((e=>e.json())).then(l).then(i.default).catch((e=>console.log("ERROR")))}function l(e){let t=e.items;const o=document.querySelector(".container__books");for(let e=0;e<t.length;e++){let n=t[e].volumeInfo.imageLinks.thumbnail?t[e].volumeInfo.imageLinks.thumbnail:"",r=t[e].volumeInfo.title?t[e].volumeInfo.title:"",i=t[e].saleInfo.retailPrice?"$"+(t[e].saleInfo.retailPrice.amount/80).toFixed(2):"";const s=`\n            <div class="container__books-block" index=${e} id="book-${e}">\n                <img class="container__books-block-img" src="${n}">\n                <div class="container__books-block-info">\n                    <span class="container__books-block-info-autor">${t[e].volumeInfo.authors?t[e].volumeInfo.authors.join(", "):""}</span>\n                    <h2 class="container__books-block-info-title">${r}</h2>\n                    <div class="container__books-block-info-rating">\n                        <div class="container__books-block-info-rating-averageRating"><span class="container__books-block-info-rating-averageRating-textSp">${t[e].volumeInfo.averageRating?t[e].volumeInfo.averageRating:""}</span></div>\n                        <span class="container__books-block-info-rating-ratingsCount">${t[e].volumeInfo.ratingsCount?t[e].volumeInfo.ratingsCount+"M review":""}</span>\n                    </div>\n                    <p class="container__books-block-info-description">${t[e].volumeInfo.description?t[e].volumeInfo.description:"There is no description"}</p>\n                    <span class="container__books-block-info-price">${i}</span>\n                    <button type="button" class="container__books-block-info-btn">buy now</button>\n                </div>\n            </div>\n        `;null==o||o.insertAdjacentHTML("beforeend",s)}document.querySelectorAll(".container__books-block-info-rating-averageRating").forEach(((e,t,o)=>{let n=e.querySelector(".container__books-block-info-rating-averageRating-textSp");if(null===n)return;let r=+n.textContent,i=5-r;if(r>0){for(let t=0;t<r;t++)e.insertAdjacentHTML("beforeend",'<img class="container__books-block-info-rating-averageRating-star-gold" src="./images/svg/StarGo.svg" als="star">');for(let t=0;t<i;t++)e.insertAdjacentHTML("beforeend",'<img class="container__books-block-info-rating-averageRating-star-gold" src="./images/svg/Star.svg" als="star">')}let s=e.querySelector(".container__books-block-info-rating-averageRating-textSp");null!==s&&s.remove()}))}!function(){const e=Array.from(document.querySelectorAll(".menu__list-item-link"));e.forEach((t=>{t.addEventListener("click",(()=>{e.forEach((e=>{e.classList.remove("menu__list-item-link_active")})),t.classList.add("menu__list-item-link_active")}))}))}(),function(){const e=[...document.querySelectorAll(".banner__slider-dots-dot")],t=document.querySelector(".baner__img"),o=["/images/png/banner1.png","/images/png/banner2.png","/images/png/banner3.png"];new r.default(e,t,o).slider(),new r.default(e,t,o,0).sliderInterval(5e3)}(),(()=>{const e=[],t=document.querySelectorAll(".containner__categories-list-item");t.forEach((o=>{o.addEventListener("click",(()=>{var n;const r=document.querySelectorAll(".container__books-block");null!==r&&r.forEach((e=>{e.remove()}));const i=document.querySelector(".containner__categories-list-item-submit_active");t.forEach((e=>e.classList.remove("containner__categories-list-item_active"))),null==i||i.classList.remove("containner__categories-list-item-submit_active"),o.classList.add("containner__categories-list-item_active"),null===(n=o.querySelector(".containner__categories-list-item-submit"))||void 0===n||n.classList.add("containner__categories-list-item-submit_active");const s=document.querySelector(".containner__categories-list-item-submit_active");null!==s&&(e.pop(),e.unshift(s.value),localStorage.setItem("category",JSON.stringify(e.join()))),a(),function(){var e;document.querySelectorAll(".containner__categories-list-item");const t=null===(e=document.querySelector(".containner__categories-list-item_active"))||void 0===e?void 0:e.getAttribute("index");null!==t&&localStorage.setItem("indexActive",JSON.stringify(t))}()}))}))})(),function(){let e=localStorage.getItem("indexActive")?parseInt(JSON.parse(localStorage.getItem("indexActive"))):0;const t=document.querySelectorAll(".containner__categories-list-item"),o=document.querySelectorAll(".containner__categories-list-item-submit");t.forEach((e=>e.classList.remove("containner__categories-list-item_active"))),o.forEach((e=>e.classList.remove("containner__categories-list-item-submit_active"))),null!==e&&(t[e].classList.add("containner__categories-list-item_active"),o[e].classList.add("containner__categories-list-item-submit_active"))}(),a(),(()=>{const e=document.querySelector(".container__btn");if(null==e)return;let t=1;e.addEventListener("click",(e=>{a(6*t),t++}))})(),(0,s.default)(),(0,c.default)()},862:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/png/promo 2.png"},884:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e,t=[];if(null!==localStorage.getItem("publishedBooks")){let t=localStorage.getItem("publishedBooks");e=JSON.parse(t)}else e=[];const r=document.querySelectorAll(".container__books-block-info-btn");let i=0;r.forEach(((r,s,c)=>{localStorage.clear(),r.addEventListener("click",(()=>{var c,a,l,u,d,_;const g=r.closest(`#book-${s}`);if(null==g)return;const b=g.getAttribute("index"),m=(null==g?void 0:g.querySelector(".container__books-block-img"))?g.querySelector(".container__books-block-img"):null;let v="";null!==m&&(v=m.src);let f={indexBoock:b,srcImgBock:v,autorBock:null===(c=null==g?void 0:g.querySelector(".container__books-block-info-autor"))||void 0===c?void 0:c.textContent,titleBock:null===(a=g.querySelector(".container__books-block-info-title"))||void 0===a?void 0:a.textContent,averageRatingBock:g.querySelector(".container__books-block-info-rating-averageRating")?null===(l=g.querySelector(".container__books-block-info-rating-averageRating"))||void 0===l?void 0:l.textContent:null,ratingCountBock:g.querySelector(".container__books-block-info-rating-ratingsCount")?null===(u=g.querySelector(".container__books-block-info-rating-ratingsCount"))||void 0===u?void 0:u.textContent:null,descriptionBock:g.querySelector(".container__books-block-info-description")?null===(d=g.querySelector(".container__books-block-info-description"))||void 0===d?void 0:d.textContent:null,priceBock:g.querySelector(".container__books-block-info-price")?null===(_=g.querySelector(".container__books-block-info-price"))||void 0===_?void 0:_.textContent:null};r.classList.contains("container__books-block-info-btn_active")?(r.classList.remove("container__books-block-info-btn_active"),r.classList.add("container__books-block-info-btn"),i-=1,r.innerHTML="buy now",t.pop(f),e.pop(f),localStorage.setItem("publishedBooks",JSON.stringify(e)),n(i)):(r.classList.add("container__books-block-info-btn_active"),r.classList.remove("container__books-block-info-btn"),r.innerHTML="in the cart",i+=1,t.push(f),e.push(f),localStorage.setItem("publishedBooks",JSON.stringify(e)),o(i))}))}))};const o=e=>{const t=document.querySelector(".header__user-block-cart");if(null!==t)if(0==document.querySelectorAll(".header__user-block-cart-numberBooks").length){const o=document.createElement("div");o.classList.add("header__user-block-cart-numberBooks");let n=document.createElement("p");n.classList.add("header__user-block-cart-numberBooks-text"),n.innerText=`${e}`,o.appendChild(n),t.appendChild(o)}else{const t=document.querySelector(".header__user-block-cart-numberBooks-text");if(null==t)return;t.textContent=`${e}`}},n=e=>{const t=document.querySelector(".header__user-block-cart-numberBooks"),o=document.querySelector(".header__user-block-cart-numberBooks-text");null!=t&&null!=o&&(o.textContent=`${e}`,0===e&&t.remove())}}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{"use strict";function e(e){e.keys().forEach(e)}o(770),o(260),e(o(722)),e(o(281))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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USxTQUFVLElBQUlBLFFBQVEsT0FBUSxJQUFJQSxRQUFRLFFBQVMsSUFBSUEsUUFBUSxZQUFhLEtBQzFHckosRUFBb0JzSixFQUFJVixDLHdCQ2Z4QixTQUFTVyxFQUFXZCxHQUFLQSxFQUFFcEksT0FBT3RCLFFBQVEwSixFQUFJLEMsY0FDOUNjLEVBQVcsUUFDWEEsRUFBVyxPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9wbmcvYmFubmVyMi5wbmciLCJ3ZWJwYWNrOi8vYm9va3Noby8uL3NjcmlwdC9tb2JpbC50cyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vc2NyaXB0L3NsaWRlci50cyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vaW1hZ2VzL3N2Zy8gc3luYyBeXFwuXFwvLiokIiwid2VicGFjazovL2Jvb2tzaG8vLi9pbWFnZXMvc3ZnL3VzZXIuc3ZnIiwid2VicGFjazovL2Jvb2tzaG8vLi9zY3JpcHQvYWRkZWRUb0NhcnQudHMiLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9zdmcvc2hvcCBiYWcuc3ZnIiwid2VicGFjazovL2Jvb2tzaG8vLi9pbWFnZXMvc3ZnL3NlYXJjaC5zdmciLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9wbmcvYmFubmVyMy5wbmciLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9zdmcvU3RhckdvLnN2ZyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vaW1hZ2VzL3BuZy9iYW5uZXIxLnBuZyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vaW1hZ2VzL3N2Zy9hcnJvdy5zdmciLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9zdmcvU3Rhci5zdmciLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9wbmcvcHJvbW8gMS5wbmciLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9wbmcvIHN5bmMgXlxcLlxcLy4qJCIsIndlYnBhY2s6Ly9ib29rc2hvLy4vc2NyaXB0L3NjcmlwdC50cyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vaW1hZ2VzL3BuZy9wcm9tbyAyLnBuZyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vc2NyaXB0L2RhdGFCb29rLnRzIiwid2VicGFjazovL2Jvb2tzaG8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYm9va3Noby93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9ib29rc2hvL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9ib29rc2hvL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vYm9va3Noby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2Jvb2tzaG8vd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9ib29rc2hvL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL2Jvb2tzaG8vLi9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL3BuZy9iYW5uZXIyLnBuZ1wiOyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1vYmlsQWN0aXZlTWVudSgpIHtcclxuICAgIGNvbnN0IG1vYmlsbEJ0bk1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fbW9iaWwtbWVudVwiKTtcclxuICAgIGlmIChtb2JpbGxCdG5NZW51ID09PSBudWxsKSByZXR1cm47XHJcbiAgICBtb2JpbGxCdG5NZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1lbnVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51X19tb2JpbFwiKTtcclxuICAgICAgICBtZW51TGlzdD8uY2xhc3NMaXN0LnRvZ2dsZShcIm1lbnVfX21vYmlsX2hpZGRlblwiKTtcclxuICAgIH0pXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZXJzIHtcclxuICAgIGRvdHM6IEVsZW1lbnRbXTtcclxuICAgIGJsb2NrQmFubmVyOiBIVE1MRGl2RWxlbWVudDtcclxuICAgIGltZzogYW55W107XHJcbiAgICBpbmRleERvdHM/OiBudW1iZXI7XHJcbiAgICBjb25zdHJ1Y3Rvcihkb3RzOiBFbGVtZW50W10sIGJsb2NrQmFubmVyOiBIVE1MRGl2RWxlbWVudCwgaW1nOiBhbnlbXSwgaW5kZXhEb3RzPzogbnVtYmVyKXtcclxuICAgICAgICB0aGlzLmltZyA9IGltZztcclxuICAgICAgICB0aGlzLmRvdHMgPSBkb3RzO1xyXG4gICAgICAgIHRoaXMuYmxvY2tCYW5uZXIgPSBibG9ja0Jhbm5lcjtcclxuICAgICAgICB0aGlzLmluZGV4RG90cyA9IGluZGV4RG90cztcclxuICAgIH1cclxuICAgIHNsaWRlcigpIHtcclxuICAgICAgICB0aGlzLmRvdHMuZm9yRWFjaCgoZG90OiBFbGVtZW50LCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGRvdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kb3RzLmZvckVhY2goKHZhbHVlOiBFbGVtZW50KSA9PiB7dmFsdWUuY2xhc3NMaXN0LnJlbW92ZShcImJhbm5lcl9fc2xpZGVyLWRvdHMtZG90X2FjdGl2ZVwiKX0pO1xyXG4gICAgICAgICAgICAgICAgZG90LmNsYXNzTGlzdC5hZGQoXCJiYW5uZXJfX3NsaWRlci1kb3RzLWRvdF9hY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmltZyA9PSB1bmRlZmluZWQgKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2NrQmFubmVyLmlubmVySFRNTCA9IGA8aW1nIHNyYz0ke3RoaXMuaW1nW2luZGV4XX0+YDtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgc2xpZGVySW50ZXJ2YWwobnVtOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgaW5kZXg6IG51bWJlciA9IDxudW1iZXI+dGhpcy5pbmRleERvdHM7XHJcbiAgICAgICAgaWYoaW5kZXggPT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRvdHMuZm9yRWFjaCgodmFsdWU6IEVsZW1lbnQpID0+IHt2YWx1ZS5jbGFzc0xpc3QucmVtb3ZlKFwiYmFubmVyX19zbGlkZXItZG90cy1kb3RfYWN0aXZlXCIpfSk7XHJcbiAgICAgICAgICAgIGlmKGluZGV4ID09IHRoaXMuZG90cy5sZW5ndGgpIGluZGV4ID0gMDsgXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmRvdHNbaW5kZXhdLmNsYXNzTGlzdC5hZGQoXCJiYW5uZXJfX3NsaWRlci1kb3RzLWRvdF9hY3RpdmVcIik7XHJcbiAgICAgICAgICAgIHRoaXMuYmxvY2tCYW5uZXIuaW5uZXJIVE1MID0gYDxpbWcgc3JjPSR7dGhpcy5pbWdbaW5kZXhdfT5gO1xyXG4gICAgICAgICAgICBpbmRleCArPSAxO1xyXG4gICAgICAgIH0sIG51bSlcclxuICAgICAgICBcclxuICAgIH1cclxufVxyXG5cclxuXHJcbiIsInZhciBtYXAgPSB7XG5cdFwiLi9TdGFyLnN2Z1wiOiA2NzEsXG5cdFwiLi9TdGFyR28uc3ZnXCI6IDUyOSxcblx0XCIuL2Fycm93LnN2Z1wiOiA2NjIsXG5cdFwiLi9zZWFyY2guc3ZnXCI6IDM5OSxcblx0XCIuL3Nob3AgYmFnLnN2Z1wiOiAzNjUsXG5cdFwiLi91c2VyLnN2Z1wiOiAzMzhcbn07XG5cblxuZnVuY3Rpb24gd2VicGFja0NvbnRleHQocmVxKSB7XG5cdHZhciBpZCA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpO1xuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhpZCk7XG59XG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKSB7XG5cdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8obWFwLCByZXEpKSB7XG5cdFx0dmFyIGUgPSBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgcmVxICsgXCInXCIpO1xuXHRcdGUuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJztcblx0XHR0aHJvdyBlO1xuXHR9XG5cdHJldHVybiBtYXBbcmVxXTtcbn1cbndlYnBhY2tDb250ZXh0LmtleXMgPSBmdW5jdGlvbiB3ZWJwYWNrQ29udGV4dEtleXMoKSB7XG5cdHJldHVybiBPYmplY3Qua2V5cyhtYXApO1xufTtcbndlYnBhY2tDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmU7XG5tb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tDb250ZXh0O1xud2VicGFja0NvbnRleHQuaWQgPSAyODE7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltYWdlcy9zdmcvdXNlci5zdmdcIjsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjYXJ0KCkge1xyXG4gICAgY29uc3QgYnRuSW5UaGVDYXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1idG5fYWN0aXZlXCIpO1xyXG5cclxuICAgIGJ0bkluVGhlQ2FydC5mb3JFYWNoKChidG4sIGluZGV4LCBhcnJheSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBhcmVudCA9IGJ0bi5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdwYXJlbnQ6ICcsIHBhcmVudCk7XHJcbiAgICB9KVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvc3ZnL3Nob3AgYmFnLnN2Z1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvc3ZnL3NlYXJjaC5zdmdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL3BuZy9iYW5uZXIzLnBuZ1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvc3ZnL1N0YXJHby5zdmdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL3BuZy9iYW5uZXIxLnBuZ1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvc3ZnL2Fycm93LnN2Z1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvc3ZnL1N0YXIuc3ZnXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltYWdlcy9wbmcvcHJvbW8gMS5wbmdcIjsiLCJ2YXIgbWFwID0ge1xuXHRcIi4vYmFubmVyMS5wbmdcIjogNTgyLFxuXHRcIi4vYmFubmVyMi5wbmdcIjogNSxcblx0XCIuL2Jhbm5lcjMucG5nXCI6IDQ5Mixcblx0XCIuL3Byb21vIDEucG5nXCI6IDY5Myxcblx0XCIuL3Byb21vIDIucG5nXCI6IDg2MlxufTtcblxuXG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dChyZXEpIHtcblx0dmFyIGlkID0gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSk7XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKGlkKTtcbn1cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpIHtcblx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhtYXAsIHJlcSkpIHtcblx0XHR2YXIgZSA9IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyByZXEgKyBcIidcIik7XG5cdFx0ZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnO1xuXHRcdHRocm93IGU7XG5cdH1cblx0cmV0dXJuIG1hcFtyZXFdO1xufVxud2VicGFja0NvbnRleHQua2V5cyA9IGZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0S2V5cygpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKG1hcCk7XG59O1xud2VicGFja0NvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZTtcbm1vZHVsZS5leHBvcnRzID0gd2VicGFja0NvbnRleHQ7XG53ZWJwYWNrQ29udGV4dC5pZCA9IDcyMjsiLCJpbXBvcnQgU2xpZGVycyBmcm9tIFwiLi9zbGlkZXJcIjtcclxuaW1wb3J0IGRhdGFCb29rIGZyb20gXCIuL2RhdGFCb29rXCI7XHJcbmltcG9ydCBjYXJ0IGZyb20gXCIuL2FkZGVkVG9DYXJ0XCI7XHJcbmltcG9ydCBtb2JpbEFjdGl2ZU1lbnUgZnJvbSBcIi4vbW9iaWxcIjtcclxuZnVuY3Rpb24gbWVudUFjdGl2ZSgpOiB2b2lkIHtcclxuICAgIGNvbnN0IG1lbnVMaW5rOiBhbnkgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubWVudV9fbGlzdC1pdGVtLWxpbmtcIikpO1xyXG4gICAgbWVudUxpbmsuZm9yRWFjaCgoaXRlbTogSFRNTExpbmtFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgbWVudUxpbmsuZm9yRWFjaCgodmFsdWU6IEhUTUxMaW5rRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUuY2xhc3NMaXN0LnJlbW92ZShcIm1lbnVfX2xpc3QtaXRlbS1saW5rX2FjdGl2ZVwiKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoXCJtZW51X19saXN0LWl0ZW0tbGlua19hY3RpdmVcIik7XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxubWVudUFjdGl2ZSgpXHJcblxyXG5mdW5jdGlvbiBzbGlkZXIoKTogdm9pZCB7XHJcbiAgICBjb25zdCBkb3RzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYmFubmVyX19zbGlkZXItZG90cy1kb3RcIildO1xyXG4gICAgY29uc3QgYmxvY2tCYW5uZXI6IEhUTUxEaXZFbGVtZW50ID0gPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmFuZXJfX2ltZ1wiKTtcclxuICAgIGNvbnN0IGltZyA9IFtcIi9pbWFnZXMvcG5nL2Jhbm5lcjEucG5nXCIsIFwiL2ltYWdlcy9wbmcvYmFubmVyMi5wbmdcIiwgXCIvaW1hZ2VzL3BuZy9iYW5uZXIzLnBuZ1wiXTtcclxuICAgIGNvbnN0IG5ld1NsaWRlciA9IG5ldyBTbGlkZXJzKGRvdHMsIGJsb2NrQmFubmVyLCBpbWcpO1xyXG4gICAgbmV3U2xpZGVyLnNsaWRlcigpXHJcbiAgICBsZXQgaW5kZXhEb3RzID0gMDtcclxuICAgIGNvbnN0IGludGVydmFsU2xpZGVyID0gbmV3IFNsaWRlcnMoZG90cywgYmxvY2tCYW5uZXIsIGltZywgaW5kZXhEb3RzKTtcclxuICAgIGludGVydmFsU2xpZGVyLnNsaWRlckludGVydmFsKDUwMDApO1xyXG59XHJcblxyXG5zbGlkZXIoKVxyXG5cclxuY29uc3Qgc2VsZWN0ZWRDYXRlZ29yeSA9ICgoKSA9PiB7XHJcbiAgICBjb25zdCB2YWx1ZVNlbGVjdGVkQ2F0ZWdvcnk6IHN0cmluZ1tdID0gWyBdO1xyXG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW1cIik7XHJcbiAgICBjYXRlZ29yaWVzLmZvckVhY2goKGNhdGVnb3J5KSA9PiB7XHJcbiAgICAgICAgY2F0ZWdvcnkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lckJvb2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrXCIpO1xyXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyQm9va3MgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lckJvb2tzLmZvckVhY2goYm9va3MgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvb2tzLnJlbW92ZSgpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3JpZXNJbnB1dEFjdGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW0tc3VibWl0X2FjdGl2ZVwiKVxyXG4gICAgICAgICAgICBjYXRlZ29yaWVzLmZvckVhY2goKHZhbHVlKSA9PiB2YWx1ZS5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW1fYWN0aXZlXCIpKTtcclxuICAgICAgICAgICAgY2F0ZWdvcmllc0lucHV0QWN0aXZlPy5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW0tc3VibWl0X2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgY2F0ZWdvcnkuY2xhc3NMaXN0LmFkZChcImNvbnRhaW5uZXJfX2NhdGVnb3JpZXMtbGlzdC1pdGVtX2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgY2F0ZWdvcnkucXVlcnlTZWxlY3RvcihcIi5jb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbS1zdWJtaXRcIik/LmNsYXNzTGlzdC5hZGQoXCJjb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbS1zdWJtaXRfYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZUNhdGVnb3J5OiBudWxsIHwgSFRNTElucHV0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW0tc3VibWl0X2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlQ2F0ZWdvcnkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlU2VsZWN0ZWRDYXRlZ29yeS5wb3AoKTtcclxuICAgICAgICAgICAgICAgIHZhbHVlU2VsZWN0ZWRDYXRlZ29yeS51bnNoaWZ0KHZhbHVlQ2F0ZWdvcnkudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjYXRlZ29yeVwiLCBKU09OLnN0cmluZ2lmeSh2YWx1ZVNlbGVjdGVkQ2F0ZWdvcnkuam9pbigpKSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBBUEkoKVxyXG4gICAgICAgICAgICBzYXZlQ2F0ZWdvcmllc0FjdGl2ZSgpXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbiAgICBcclxufSkoKVxyXG5cclxuZnVuY3Rpb24gc2F2ZUNhdGVnb3JpZXNBY3RpdmUoKSB7XHJcbiAgICBjb25zdCBjYXRlZ29yaWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbVwiKTtcclxuICAgIGNvbnN0IGFjdGl2ZUNhdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW1fYWN0aXZlXCIpPy5nZXRBdHRyaWJ1dGUoXCJpbmRleFwiKTtcclxuICAgIGlmIChhY3RpdmVDYXQgIT09IG51bGwpIHtcclxuICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiaW5kZXhBY3RpdmVcIiwgSlNPTi5zdHJpbmdpZnkoYWN0aXZlQ2F0KSkgIFxyXG4gICAgfSAgIFxyXG59XHJcblxyXG5sb2FkQ2F0ZWdvcmllc0FjdGl2ZSgpXHJcblxyXG5mdW5jdGlvbiBsb2FkQ2F0ZWdvcmllc0FjdGl2ZSgpIHtcclxuICAgIGxldCBsb2NhbEluZGV4QWN0aXZlOiBudW1iZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImluZGV4QWN0aXZlXCIpID8gcGFyc2VJbnQoSlNPTi5wYXJzZSg8c3RyaW5nPmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiaW5kZXhBY3RpdmVcIikpKSA6ICswO1xyXG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW1cIik7XHJcbiAgICBjb25zdCBjYXRlZ29yaWVzSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhaW5uZXJfX2NhdGVnb3JpZXMtbGlzdC1pdGVtLXN1Ym1pdFwiKTtcclxuICAgIGNhdGVnb3JpZXMuZm9yRWFjaChjYXRlZ29yeSA9PiBjYXRlZ29yeS5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW1fYWN0aXZlXCIpKTtcclxuICAgIGNhdGVnb3JpZXNJbnB1dC5mb3JFYWNoKGNhdGVnb3J5SW5wdXQgPT4gY2F0ZWdvcnlJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW0tc3VibWl0X2FjdGl2ZVwiKSk7XHJcbiAgICBpZiAobG9jYWxJbmRleEFjdGl2ZSA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgY2F0ZWdvcmllc1tsb2NhbEluZGV4QWN0aXZlXS5jbGFzc0xpc3QuYWRkKFwiY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW1fYWN0aXZlXCIpO1xyXG4gICAgY2F0ZWdvcmllc0lucHV0W2xvY2FsSW5kZXhBY3RpdmVdLmNsYXNzTGlzdC5hZGQoXCJjb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbS1zdWJtaXRfYWN0aXZlXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBBUEkoc3RhcnRJbmRleCA9IDAsIG1heFJlc3VsdHMgPSA2KSB7XHJcbiAgICBsZXQgY2F0ZWdvcnk6IHN0cmluZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY2F0ZWdvcnlcIikgPyA8c3RyaW5nPmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY2F0ZWdvcnlcIikgOiBcIkFyY2hpdGVjdHVyZVwiO1xyXG4gICAgZmV0Y2goYGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2Jvb2tzL3YxL3ZvbHVtZXM/cT1zdWJqZWN0OiR7Y2F0ZWdvcnl9JmtleT1BSXphU3lDdnpGa3VTamlaZ0pPaDkwbFphWXV2OXFVVDJ4eXBLTnMmcHJpbnRUeXBlPWJvb2tzJnN0YXJ0SW5kZXg9JHtzdGFydEluZGV4fSZtYXhSZXN1bHRzPSR7bWF4UmVzdWx0c30mbGFuZ1Jlc3RyaWN0PWVuYClcclxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAudGhlbihkaXNwbGF5UmVzdWx0KVxyXG4gICAgICAgIC50aGVuKGRhdGFCb29rKVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhcIkVSUk9SXCIpKVxyXG59XHJcbkFQSSgpXHJcblxyXG5mdW5jdGlvbiBkaXNwbGF5UmVzdWx0KGRhdGE6IGFueSkge1xyXG5cclxuICAgIGxldCByZXN1bHRBUEkgPSBkYXRhLml0ZW1zO1xyXG4gICAgY29uc3QgY29udGFpbmVyQm9va3M6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rc1wiKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0QVBJLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGltZyA9IHJlc3VsdEFQSVtpXS52b2x1bWVJbmZvLmltYWdlTGlua3MudGh1bWJuYWlsID8gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8uaW1hZ2VMaW5rcy50aHVtYm5haWwgOiBcIlwiO1xyXG4gICAgICAgIGxldCB0aXRsZSA9IHJlc3VsdEFQSVtpXS52b2x1bWVJbmZvLnRpdGxlID8gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8udGl0bGUgOiBcIlwiO1xyXG4gICAgICAgIGxldCBwcmljZTogbnVtYmVyIHwgc3RyaW5nID0gcmVzdWx0QVBJW2ldLnNhbGVJbmZvLnJldGFpbFByaWNlID8gXCIkXCIgKyAocmVzdWx0QVBJW2ldLnNhbGVJbmZvLnJldGFpbFByaWNlLmFtb3VudCAvIDgwKS50b0ZpeGVkKDIpIDogXCJcIjtcclxuICAgICAgICBsZXQgYXV0aG9yczogc3RyaW5nID0gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8uYXV0aG9ycyA/IChyZXN1bHRBUElbaV0udm9sdW1lSW5mby5hdXRob3JzKS5qb2luKFwiLCBcIikgOiBcIlwiO1xyXG4gICAgICAgIGxldCBhdmVyYWdlUmF0aW5nOiBzdHJpbmcgPSByZXN1bHRBUElbaV0udm9sdW1lSW5mby5hdmVyYWdlUmF0aW5nID8gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8uYXZlcmFnZVJhdGluZyA6IFwiXCI7XHJcbiAgICAgICAgbGV0IHJhdGluZ3NDb3VudDogc3RyaW5nID0gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8ucmF0aW5nc0NvdW50ID8gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8ucmF0aW5nc0NvdW50ICsgXCJNXCIgKyBcIiByZXZpZXdcIiA6IFwiXCI7XHJcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uOiBzdHJpbmcgPSByZXN1bHRBUElbaV0udm9sdW1lSW5mby5kZXNjcmlwdGlvbiA/IHJlc3VsdEFQSVtpXS52b2x1bWVJbmZvLmRlc2NyaXB0aW9uIDogXCJUaGVyZSBpcyBubyBkZXNjcmlwdGlvblwiO1xyXG4gICAgICAgIGNvbnN0IHNob3dCb29rID0gYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9ja1wiIGluZGV4PSR7aX0gaWQ9XCJib29rLSR7aX1cIj5cclxuICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWltZ1wiIHNyYz1cIiR7aW1nfVwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mb1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLWF1dG9yXCI+JHthdXRob3JzfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tdGl0bGVcIj4ke3RpdGxlfTwvaDI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZ1wiPjxzcGFuIGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZy1hdmVyYWdlUmF0aW5nLXRleHRTcFwiPiR7YXZlcmFnZVJhdGluZ308L3NwYW4+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZy1yYXRpbmdzQ291bnRcIj4ke3JhdGluZ3NDb3VudH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tZGVzY3JpcHRpb25cIj4ke2Rlc2NyaXB0aW9ufTwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1wcmljZVwiPiR7cHJpY2V9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLWJ0blwiPmJ1eSBub3c8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgXHJcbiAgICAgICAgY29udGFpbmVyQm9va3M/Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBzaG93Qm9vayk7XHJcbiAgICB9XHJcbiAgICBhdmVyYWdlUmF0aW5nKClcclxufVxyXG5cclxuZnVuY3Rpb24gYXZlcmFnZVJhdGluZygpIHtcclxuICAgIGxldCBuZXdJbWdHb2xkID0gYDxpbWcgY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tcmF0aW5nLWF2ZXJhZ2VSYXRpbmctc3Rhci1nb2xkXCIgc3JjPVwiLi9pbWFnZXMvc3ZnL1N0YXJHby5zdmdcIiBhbHM9XCJzdGFyXCI+YDtcclxuICAgIGxldCBpbWdTdGFyID0gYDxpbWcgY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tcmF0aW5nLWF2ZXJhZ2VSYXRpbmctc3Rhci1nb2xkXCIgc3JjPVwiLi9pbWFnZXMvc3ZnL1N0YXIuc3ZnXCIgYWxzPVwic3RhclwiPmA7XHJcbiAgICBjb25zdCBkaXZBdmVyYWdlUmF0aW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tcmF0aW5nLWF2ZXJhZ2VSYXRpbmdcIik7XHJcbiAgICBcclxuICAgIGRpdkF2ZXJhZ2VSYXRpbmcuZm9yRWFjaCgoZGl2LCBpbmRleCwgYXJyYXkpID0+IHtcclxuICAgICAgICBsZXQgdGV4dFNwYW46IGFueSA9IGRpdi5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZy10ZXh0U3BcIik7XHJcbiAgICAgICAgaWYgKHRleHRTcGFuID09PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgbGV0IG51bUNvbnRlbnQ6IG51bWJlciA9ICt0ZXh0U3Bhbi50ZXh0Q29udGVudDtcclxuICAgICAgICBsZXQgcmVzdWx0UmF0aW5nID0gNSAtIG51bUNvbnRlbnQ7XHJcblxyXG4gICAgICAgIGlmIChudW1Db250ZW50ID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvbnRlbnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZGl2Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBuZXdJbWdHb2xkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdFJhdGluZzsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBkaXYuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGltZ1N0YXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBmaXJzRWxlbWVudERpdkF2ZXJhZ2VSYXRpbmcgPSBkaXYucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tcmF0aW5nLWF2ZXJhZ2VSYXRpbmctdGV4dFNwXCIpO1xyXG4gICAgICAgIGlmIChmaXJzRWxlbWVudERpdkF2ZXJhZ2VSYXRpbmcgIT09IG51bGwpIGZpcnNFbGVtZW50RGl2QXZlcmFnZVJhdGluZy5yZW1vdmUoKTtcclxuICAgICAgICBcclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG5jb25zdCBsb2FkTW9yZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IGJ0bkxvYWRNb3JlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2J0blwiKTtcclxuICAgIGlmIChidG5Mb2FkTW9yZSA9PSBudWxsKSByZXR1cm47XHJcbiAgICBsZXQgY2xpY2sgPSAxO1xyXG4gICAgbGV0IGNvdW50ID0gNjtcclxuICAgIGJ0bkxvYWRNb3JlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICBsZXQgc3RhcnRJbmRleCA9IGNsaWNrICogY291bnQ7XHJcbiAgICAgICAgQVBJKHN0YXJ0SW5kZXgpXHJcbiAgICAgICAgY2xpY2srKztcclxuICAgIH0pXHJcbn1cclxubG9hZE1vcmUoKVxyXG5cclxuXHJcbmNhcnQoKVxyXG5tb2JpbEFjdGl2ZU1lbnUoKSIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvcG5nL3Byb21vIDIucG5nXCI7IiwiXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRhdGFCb29rKCk6IHZvaWQge1xyXG4gICAgbGV0IGJvb2Nrc0RhdGE6IGFueSA9IFsgXTtcclxuICAgIGxldCBib29ja3NEYXRhTG9jYWw6IGFueTtcclxuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInB1Ymxpc2hlZEJvb2tzXCIpICE9PSBudWxsKSB7XHJcbiAgICAgICAgbGV0IHBhcnNlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwdWJsaXNoZWRCb29rc1wiKVxyXG4gICAgICAgIGJvb2Nrc0RhdGFMb2NhbCA9IEpTT04ucGFyc2UoPHN0cmluZz5wYXJzZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJvb2Nrc0RhdGFMb2NhbCA9IFsgXTtcclxuICAgIH1cclxuICAgIGNvbnN0IGJ0bkJ1eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLWJ0blwiKTtcclxuICAgIGxldCBudW1iZXJPZkJva3MgPSAwO1xyXG4gICAgYnRuQnV5LmZvckVhY2goKGJheSwgaW5kZXgsIGFycmF5KSA9PiB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKClcclxuICAgICAgICBiYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYm9vY2sgPSBiYXkuY2xvc2VzdChgI2Jvb2stJHtpbmRleH1gKTtcclxuICAgICAgICAgICAgaWYgKGJvb2NrID09IG51bGwpIHJldHVybjtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXhCb29jazogc3RyaW5nIHwgbnVsbCA9IGJvb2NrLmdldEF0dHJpYnV0ZShcImluZGV4XCIpXHJcbiAgICAgICAgICAgIGNvbnN0IGltZ0JvY2s6IEhUTUxJbWFnZUVsZW1lbnQgfCBudWxsID0gYm9vY2s/LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbWdcIikgPyBib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW1nXCIpIDogbnVsbDtcclxuICAgICAgICAgICAgbGV0IHNyY0ltZ0JvY2s6IHN0cmluZyA9IFwiXCJcclxuICAgICAgICAgICAgaWYgKGltZ0JvY2sgIT09IG51bGwpIHNyY0ltZ0JvY2sgPSBpbWdCb2NrLnNyYztcclxuICAgICAgICAgICAgY29uc3QgYXV0b3JCb2NrOiBzdHJpbmcgPSA8c3RyaW5nPmJvb2NrPy5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1hdXRvclwiKT8udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlQm9jazogc3RyaW5nID0gPHN0cmluZz5ib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby10aXRsZVwiKT8udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGF2ZXJhZ2VSYXRpbmdCb2NrOiBzdHJpbmcgfCBudWxsID0gYm9vY2sucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tcmF0aW5nLWF2ZXJhZ2VSYXRpbmdcIikgPyA8c3RyaW5nPmJvb2NrLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZy1hdmVyYWdlUmF0aW5nXCIpPy50ZXh0Q29udGVudCA6IG51bGw7XHJcbiAgICAgICAgICAgIGNvbnN0IHJhdGluZ0NvdW50Qm9jazogc3RyaW5nIHwgbnVsbCA9IGJvb2NrLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZy1yYXRpbmdzQ291bnRcIikgPyA8c3RyaW5nPmJvb2NrLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZy1yYXRpbmdzQ291bnRcIik/LnRleHRDb250ZW50IDogbnVsbDtcclxuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb25Cb2NrOiBzdHJpbmcgfCBudWxsID0gYm9vY2sucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tZGVzY3JpcHRpb25cIikgPyA8c3RyaW5nPmJvb2NrLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLWRlc2NyaXB0aW9uXCIpPy50ZXh0Q29udGVudCA6IG51bGw7XHJcbiAgICAgICAgICAgIGNvbnN0IHByaWNlQm9jazogc3RyaW5nIHwgbnVsbCA9IGJvb2NrLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXByaWNlXCIpID8gPHN0cmluZz5ib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1wcmljZVwiKT8udGV4dENvbnRlbnQgOiBudWxsO1xyXG4gICAgICAgICAgICB0eXBlIGluZm9Cb2NrID0ge1xyXG4gICAgICAgICAgICAgICAgaW5kZXhCb29jazogc3RyaW5nIHwgbnVsbCxcclxuICAgICAgICAgICAgICAgIHNyY0ltZ0JvY2s6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgIGF1dG9yQm9jazogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgdGl0bGVCb2NrOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBhdmVyYWdlUmF0aW5nQm9jazogc3RyaW5nIHwgbnVsbCxcclxuICAgICAgICAgICAgICAgIHJhdGluZ0NvdW50Qm9jazogc3RyaW5nIHwgbnVsbCxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uQm9jazogc3RyaW5nIHwgbnVsbCxcclxuICAgICAgICAgICAgICAgIHByaWNlQm9jazogc3RyaW5nIHwgbnVsbCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgbGV0IGluZm9Cb2NrOiBpbmZvQm9jayA9IHtcclxuICAgICAgICAgICAgICAgIGluZGV4Qm9vY2s6IGluZGV4Qm9vY2ssXHJcbiAgICAgICAgICAgICAgICBzcmNJbWdCb2NrOiBzcmNJbWdCb2NrLFxyXG4gICAgICAgICAgICAgICAgYXV0b3JCb2NrOiBhdXRvckJvY2ssXHJcbiAgICAgICAgICAgICAgICB0aXRsZUJvY2s6IHRpdGxlQm9jayxcclxuICAgICAgICAgICAgICAgIGF2ZXJhZ2VSYXRpbmdCb2NrOiBhdmVyYWdlUmF0aW5nQm9jayxcclxuICAgICAgICAgICAgICAgIHJhdGluZ0NvdW50Qm9jazogcmF0aW5nQ291bnRCb2NrLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb25Cb2NrOiBkZXNjcmlwdGlvbkJvY2ssXHJcbiAgICAgICAgICAgICAgICBwcmljZUJvY2s6IHByaWNlQm9ja1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoYmF5LmNsYXNzTGlzdC5jb250YWlucyhcImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1idG5fYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBiYXkuY2xhc3NMaXN0LnJlbW92ZShcImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1idG5fYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgYmF5LmNsYXNzTGlzdC5hZGQoXCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tYnRuXCIpXHJcbiAgICAgICAgICAgICAgICBudW1iZXJPZkJva3MgPSBudW1iZXJPZkJva3MgLSAxO1xyXG4gICAgICAgICAgICAgICAgYmF5LmlubmVySFRNTCA9IFwiYnV5IG5vd1wiO1xyXG4gICAgICAgICAgICAgICAgYm9vY2tzRGF0YS5wb3AoaW5mb0JvY2spO1xyXG4gICAgICAgICAgICAgICAgYm9vY2tzRGF0YUxvY2FsLnBvcChpbmZvQm9jayk7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInB1Ymxpc2hlZEJvb2tzXCIsIEpTT04uc3RyaW5naWZ5KGJvb2Nrc0RhdGFMb2NhbCkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZW1vdmVUb0Jvb2sobnVtYmVyT2ZCb2tzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJheS5jbGFzc0xpc3QuYWRkKFwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLWJ0bl9hY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICBiYXkuY2xhc3NMaXN0LnJlbW92ZShcImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1idG5cIilcclxuICAgICAgICAgICAgICAgIGJheS5pbm5lckhUTUwgPSBcImluIHRoZSBjYXJ0XCI7XHJcbiAgICAgICAgICAgICAgICBudW1iZXJPZkJva3MgPSBudW1iZXJPZkJva3MgKyAxO1xyXG4gICAgICAgICAgICAgICAgYm9vY2tzRGF0YS5wdXNoKGluZm9Cb2NrKTtcclxuICAgICAgICAgICAgICAgIGJvb2Nrc0RhdGFMb2NhbC5wdXNoKGluZm9Cb2NrKTtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHVibGlzaGVkQm9va3NcIiwgSlNPTi5zdHJpbmdpZnkoYm9vY2tzRGF0YUxvY2FsKSk7XHJcbiAgICAgICAgICAgICAgICBhZGRUb0Jvb2sobnVtYmVyT2ZCb2tzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5jb25zdCBhZGRUb0Jvb2sgPSAobnVtYmVyT2ZCb2tzOiBudW1iZXIpID0+IHtcclxuICAgIGNvbnN0IGNhcnQ6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX191c2VyLWJsb2NrLWNhcnRcIik7XHJcbiAgICBpZiAoY2FydCA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgY29uc3QgbnVtYmVyQm9va3NEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhlYWRlcl9fdXNlci1ibG9jay1jYXJ0LW51bWJlckJvb2tzXCIpLmxlbmd0aDtcclxuICAgIGlmIChudW1iZXJCb29rc0RpdiA9PSAwKSB7XHJcbiAgICAgICAgY29uc3QgbnVtYmVyQm9va3M6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBudW1iZXJCb29rcy5jbGFzc0xpc3QuYWRkKFwiaGVhZGVyX191c2VyLWJsb2NrLWNhcnQtbnVtYmVyQm9va3NcIik7XHJcbiAgICAgICAgbGV0IG51bVRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgICAgICBudW1UZXh0LmNsYXNzTGlzdC5hZGQoXCJoZWFkZXJfX3VzZXItYmxvY2stY2FydC1udW1iZXJCb29rcy10ZXh0XCIpO1xyXG4gICAgICAgIG51bVRleHQuaW5uZXJUZXh0ID0gYCR7bnVtYmVyT2ZCb2tzfWA7XHJcbiAgICAgICAgbnVtYmVyQm9va3MuYXBwZW5kQ2hpbGQobnVtVGV4dCk7XHJcbiAgICAgICAgY2FydC5hcHBlbmRDaGlsZChudW1iZXJCb29rcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IG51bWJlckJvb2tzVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX191c2VyLWJsb2NrLWNhcnQtbnVtYmVyQm9va3MtdGV4dFwiKTtcclxuICAgICAgICBpZiAobnVtYmVyQm9va3NUZXh0ID09IG51bGwpIHJldHVybjtcclxuICAgICAgICBudW1iZXJCb29rc1RleHQudGV4dENvbnRlbnQgPSBgJHtudW1iZXJPZkJva3N9YFxyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuY29uc3QgcmVtb3ZlVG9Cb29rID0gKG51bWJlck9mQm9rczogbnVtYmVyKSA9PiB7XHJcbiAgICBjb25zdCBudW1iZXJCb29rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX191c2VyLWJsb2NrLWNhcnQtbnVtYmVyQm9va3NcIik7XHJcbiAgICBjb25zdCBudW1iZXJCb29rc1RleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fdXNlci1ibG9jay1jYXJ0LW51bWJlckJvb2tzLXRleHRcIik7XHJcbiAgICBpZiAobnVtYmVyQm9va3MgPT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgaWYgKG51bWJlckJvb2tzVGV4dCA9PSBudWxsKSByZXR1cm47XHJcbiAgICBudW1iZXJCb29rc1RleHQudGV4dENvbnRlbnQgPSBgJHtudW1iZXJPZkJva3N9YDtcclxuICAgIGlmIChudW1iZXJPZkJva3MgPT09IDApIG51bWJlckJvb2tzLnJlbW92ZSgpO1xyXG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0ICYmIGRvY3VtZW50LmN1cnJlbnRTY3JpcHQudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09PSAnU0NSSVBUJylcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYztcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSB7XG5cdFx0XHR2YXIgaSA9IHNjcmlwdHMubGVuZ3RoIC0gMTtcblx0XHRcdHdoaWxlIChpID4gLTEgJiYgKCFzY3JpcHRVcmwgfHwgIS9eaHR0cChzPyk6Ly50ZXN0KHNjcmlwdFVybCkpKSBzY3JpcHRVcmwgPSBzY3JpcHRzW2ktLV0uc3JjO1xuXHRcdH1cblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC9eYmxvYjovLCBcIlwiKS5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiaW1wb3J0IFwiLi9zY3JpcHQvc2NyaXB0LnRzXCI7XHJcbmltcG9ydCBcIi4vc2NyaXB0L3NsaWRlci50c1wiXHJcbmltcG9ydCBcIi4vc3R5bGUvc3R5bGUuc2Nzc1wiO1xyXG5mdW5jdGlvbiByZXF1aXJlQWxsKHIpIHsgci5rZXlzKCkuZm9yRWFjaChyKTsgfSAvLyDRhNGD0L3QutGG0LjRjyDQtNC70Y8g0LTQvtCx0LDQstC70LXQvdC40Y8g0LLRgdC10YUg0LrQsNGA0YLQuNC90L7QuiDQsiB3ZWJwYWNrXHJcbnJlcXVpcmVBbGwocmVxdWlyZS5jb250ZXh0KCcvaW1hZ2VzL3BuZycsIHRydWUpKTtcclxucmVxdWlyZUFsbChyZXF1aXJlLmNvbnRleHQoJy9pbWFnZXMvc3ZnJywgdHJ1ZSkpOyJdLCJuYW1lcyI6WyJtb2JpbGxCdG5NZW51IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm1lbnVMaXN0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY29uc3RydWN0b3IiLCJkb3RzIiwiYmxvY2tCYW5uZXIiLCJpbWciLCJpbmRleERvdHMiLCJ0aGlzIiwic2xpZGVyIiwiZm9yRWFjaCIsImRvdCIsImluZGV4IiwidmFsdWUiLCJyZW1vdmUiLCJhZGQiLCJ1bmRlZmluZWQiLCJpbm5lckhUTUwiLCJzbGlkZXJJbnRlcnZhbCIsIm51bSIsInNldEludGVydmFsIiwibGVuZ3RoIiwibWFwIiwid2VicGFja0NvbnRleHQiLCJyZXEiLCJpZCIsIndlYnBhY2tDb250ZXh0UmVzb2x2ZSIsIl9fd2VicGFja19yZXF1aXJlX18iLCJvIiwiZSIsIkVycm9yIiwiY29kZSIsImtleXMiLCJPYmplY3QiLCJyZXNvbHZlIiwibW9kdWxlIiwiZXhwb3J0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidG4iLCJhcnJheSIsInBhcmVudCIsInBhcmVudEVsZW1lbnQiLCJjb25zb2xlIiwibG9nIiwiQVBJIiwic3RhcnRJbmRleCIsIm1heFJlc3VsdHMiLCJjYXRlZ29yeSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsImpzb24iLCJkaXNwbGF5UmVzdWx0IiwiY2F0Y2giLCJlcnIiLCJkYXRhIiwicmVzdWx0QVBJIiwiaXRlbXMiLCJjb250YWluZXJCb29rcyIsImkiLCJ2b2x1bWVJbmZvIiwiaW1hZ2VMaW5rcyIsInRodW1ibmFpbCIsInRpdGxlIiwicHJpY2UiLCJzYWxlSW5mbyIsInJldGFpbFByaWNlIiwiYW1vdW50IiwidG9GaXhlZCIsInNob3dCb29rIiwiYXV0aG9ycyIsImpvaW4iLCJhdmVyYWdlUmF0aW5nIiwicmF0aW5nc0NvdW50IiwiZGVzY3JpcHRpb24iLCJpbnNlcnRBZGphY2VudEhUTUwiLCJkaXYiLCJ0ZXh0U3BhbiIsIm51bUNvbnRlbnQiLCJ0ZXh0Q29udGVudCIsInJlc3VsdFJhdGluZyIsImZpcnNFbGVtZW50RGl2QXZlcmFnZVJhdGluZyIsIm1lbnVMaW5rIiwiQXJyYXkiLCJmcm9tIiwiaXRlbSIsIm1lbnVBY3RpdmUiLCJ2YWx1ZVNlbGVjdGVkQ2F0ZWdvcnkiLCJjYXRlZ29yaWVzIiwiYm9va3MiLCJjYXRlZ29yaWVzSW5wdXRBY3RpdmUiLCJ2YWx1ZUNhdGVnb3J5IiwicG9wIiwidW5zaGlmdCIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiYWN0aXZlQ2F0IiwiZ2V0QXR0cmlidXRlIiwic2F2ZUNhdGVnb3JpZXNBY3RpdmUiLCJsb2NhbEluZGV4QWN0aXZlIiwicGFyc2VJbnQiLCJwYXJzZSIsImNhdGVnb3JpZXNJbnB1dCIsImNhdGVnb3J5SW5wdXQiLCJsb2FkQ2F0ZWdvcmllc0FjdGl2ZSIsImJ0bkxvYWRNb3JlIiwiY2xpY2siLCJsb2FkTW9yZSIsImJvb2Nrc0RhdGFMb2NhbCIsImJvb2Nrc0RhdGEiLCJidG5CdXkiLCJudW1iZXJPZkJva3MiLCJiYXkiLCJjbGVhciIsImJvb2NrIiwiY2xvc2VzdCIsImluZGV4Qm9vY2siLCJpbWdCb2NrIiwic3JjSW1nQm9jayIsInNyYyIsImluZm9Cb2NrIiwiYXV0b3JCb2NrIiwidGl0bGVCb2NrIiwiYXZlcmFnZVJhdGluZ0JvY2siLCJyYXRpbmdDb3VudEJvY2siLCJkZXNjcmlwdGlvbkJvY2siLCJwcmljZUJvY2siLCJjb250YWlucyIsInJlbW92ZVRvQm9vayIsInB1c2giLCJhZGRUb0Jvb2siLCJjYXJ0IiwibnVtYmVyQm9va3MiLCJjcmVhdGVFbGVtZW50IiwibnVtVGV4dCIsImlubmVyVGV4dCIsImFwcGVuZENoaWxkIiwibnVtYmVyQm9va3NUZXh0IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiZyIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsIndpbmRvdyIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImN1cnJlbnRTY3JpcHQiLCJ0YWdOYW1lIiwidG9VcHBlckNhc2UiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ0ZXN0IiwicmVwbGFjZSIsInAiLCJyZXF1aXJlQWxsIl0sInNvdXJjZVJvb3QiOiIifQ==