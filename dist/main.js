(()=>{var e={5:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/png/banner2.png"},202:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=document.querySelector(".header__mobil-menu");null!==e&&e.addEventListener("click",(()=>{const e=document.querySelector(".menu__mobil");null==e||e.classList.toggle("menu__mobil_hidden")}))}},260:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,o,n){this.img=o,this.dots=e,this.blockBanner=t,this.indexDots=n}slider(){this.dots.forEach(((e,t)=>{e.addEventListener("click",(()=>{this.dots.forEach((e=>{e.classList.remove("banner__slider-dots-dot_active")})),e.classList.add("banner__slider-dots-dot_active"),null!=this.img&&(this.blockBanner.innerHTML=`<img src=${this.img[t]}>`)}))}))}sliderInterval(e){let t=this.indexDots;null!=t&&setInterval((()=>{this.dots.forEach((e=>{e.classList.remove("banner__slider-dots-dot_active")})),t==this.dots.length&&(t=0),this.dots[t].classList.add("banner__slider-dots-dot_active"),this.blockBanner.innerHTML=`<img src=${this.img[t]}>`,t+=1}),e)}}},281:(e,t,o)=>{var n={"./Star.svg":671,"./StarGo.svg":529,"./arrow.svg":662,"./search.svg":399,"./shop bag.svg":365,"./user.svg":338};function r(e){var t=i(e);return o(t)}function i(e){if(!o.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=281},338:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/user.svg"},365:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/shop bag.svg"},399:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/search.svg"},492:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/png/banner3.png"},529:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/StarGo.svg"},582:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/png/banner1.png"},662:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/arrow.svg"},671:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/Star.svg"},722:(e,t,o)=>{var n={"./banner1.png":582,"./banner2.png":5,"./banner3.png":492};function r(e){var t=i(e);return o(t)}function i(e){if(!o.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=722},770:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(o(260)),i=n(o(884)),s=n(o(202));function c(e=0,t=6){let o=localStorage.getItem("category")?localStorage.getItem("category"):"Architecture";fetch(`https://www.googleapis.com/books/v1/volumes?q=subject:${o}&key=AIzaSyCvzFkuSjiZgJOh90lZaYuv9qUT2xypKNs&printType=books&startIndex=${e}&maxResults=${t}&langRestrict=en`).then((e=>e.json())).then(a).then(i.default).catch((e=>console.log("ERROR")))}function a(e){let t=e.items;const o=document.querySelector(".container__books");for(let e=0;e<t.length;e++){let n=t[e].volumeInfo.imageLinks.thumbnail?t[e].volumeInfo.imageLinks.thumbnail:"",r=t[e].volumeInfo.title?t[e].volumeInfo.title:"",i=t[e].saleInfo.retailPrice?"$"+(t[e].saleInfo.retailPrice.amount/80).toFixed(2):"",s=t[e].volumeInfo.authors?t[e].volumeInfo.authors.join(", "):"",c=t[e].volumeInfo.averageRating?t[e].volumeInfo.averageRating:"",a=t[e].volumeInfo.ratingsCount?t[e].volumeInfo.ratingsCount+"M review":"",l=t[e].volumeInfo.description?t[e].volumeInfo.description:"There is no description";const u=document.querySelectorAll(".container__books-block");let d=e;u.length>=t.length&&(d=u.length+1);const _=`\n                <div class="container__books-block" index=${d} id="book-${d}">\n                    <img class="container__books-block-img" src="${n}">\n                    <div class="container__books-block-info">\n                        <span class="container__books-block-info-autor">${s}</span>\n                        <h2 class="container__books-block-info-title">${r}</h2>\n                        <div class="container__books-block-info-rating">\n                            <div class="container__books-block-info-rating-averageRating"><span class="container__books-block-info-rating-averageRating-textSp">${c}</span></div>\n                            <span class="container__books-block-info-rating-ratingsCount">${a}</span>\n                        </div>\n                        <p class="container__books-block-info-description">${l}</p>\n                        <span class="container__books-block-info-price">${i}</span>\n                        <button type="button" class="container__books-block-info-btn">buy now</button>\n                    </div>\n                </div>\n            `;null==o||o.insertAdjacentHTML("beforeend",_)}document.querySelectorAll(".container__books-block-info-rating-averageRating").forEach(((e,t,o)=>{let n=e.querySelector(".container__books-block-info-rating-averageRating-textSp");if(null===n)return;let r=+n.textContent,i=5-r;if(r>0){for(let t=0;t<r;t++)e.insertAdjacentHTML("beforeend",'<img class="container__books-block-info-rating-averageRating-star-gold" src="./images/svg/StarGo.svg" als="star">');for(let t=0;t<i;t++)e.insertAdjacentHTML("beforeend",'<img class="container__books-block-info-rating-averageRating-star-gold" src="./images/svg/Star.svg" als="star">')}let s=e.querySelector(".container__books-block-info-rating-averageRating-textSp");null!==s&&s.remove()}))}!function(){const e=Array.from(document.querySelectorAll(".menu__list-item-link"));e.forEach((t=>{t.addEventListener("click",(()=>{e.forEach((e=>{e.classList.remove("menu__list-item-link_active")})),t.classList.add("menu__list-item-link_active")}))}))}(),function(){const e=[...document.querySelectorAll(".banner__slider-dots-dot")],t=document.querySelector(".baner__img"),o=["images/png/banner1.png","images/png/banner2.png","images/png/banner3.png"];new r.default(e,t,o).slider(),new r.default(e,t,o,0).sliderInterval(5e3)}(),(()=>{const e=[],t=document.querySelectorAll(".containner__categories-list-item");t.forEach((o=>{o.addEventListener("click",(()=>{var n;const r=document.querySelectorAll(".container__books-block");null!==r&&r.forEach((e=>{e.remove()}));const i=document.querySelector(".containner__categories-list-item-submit_active");t.forEach((e=>e.classList.remove("containner__categories-list-item_active"))),null==i||i.classList.remove("containner__categories-list-item-submit_active"),o.classList.add("containner__categories-list-item_active"),null===(n=o.querySelector(".containner__categories-list-item-submit"))||void 0===n||n.classList.add("containner__categories-list-item-submit_active");const s=document.querySelector(".containner__categories-list-item-submit_active");null!==s&&(e.pop(),e.unshift(s.value),localStorage.setItem("category",JSON.stringify(e.join()))),c(),function(){var e;document.querySelectorAll(".containner__categories-list-item");const t=null===(e=document.querySelector(".containner__categories-list-item_active"))||void 0===e?void 0:e.getAttribute("index");null!==t&&localStorage.setItem("indexActive",JSON.stringify(t))}()}))}))})(),function(){let e=localStorage.getItem("indexActive")?parseInt(JSON.parse(localStorage.getItem("indexActive"))):0;const t=document.querySelectorAll(".containner__categories-list-item"),o=document.querySelectorAll(".containner__categories-list-item-submit");t.forEach((e=>e.classList.remove("containner__categories-list-item_active"))),o.forEach((e=>e.classList.remove("containner__categories-list-item-submit_active"))),null!==e&&(t[e].classList.add("containner__categories-list-item_active"),o[e].classList.add("containner__categories-list-item-submit_active"))}(),c(),(()=>{const e=document.querySelector(".container__btn");if(null==e)return;let t=1;e.addEventListener("click",(e=>{c(6*t),t++}))})(),(0,s.default)()},884:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e,t=[];if(null!==localStorage.getItem("publishedBooks")){let t=localStorage.getItem("publishedBooks");e=JSON.parse(t)}else e=[];let r=document.querySelectorAll(".container__books-block-info-btn"),i=0;r.forEach(((r,s,c)=>{r.addEventListener("click",(()=>{var s,c,a,l,u,d;const _=r.closest("[index]");if(console.log("boock: ",_),null==_)return;const g=_.getAttribute("index"),b=(null==_?void 0:_.querySelector(".container__books-block-img"))?_.querySelector(".container__books-block-img"):null;let m="";null!==b&&(m=b.src);let v={indexBoock:g,srcImgBock:m,autorBock:null===(s=null==_?void 0:_.querySelector(".container__books-block-info-autor"))||void 0===s?void 0:s.textContent,titleBock:null===(c=_.querySelector(".container__books-block-info-title"))||void 0===c?void 0:c.textContent,averageRatingBock:_.querySelector(".container__books-block-info-rating-averageRating")?null===(a=_.querySelector(".container__books-block-info-rating-averageRating"))||void 0===a?void 0:a.textContent:null,ratingCountBock:_.querySelector(".container__books-block-info-rating-ratingsCount")?null===(l=_.querySelector(".container__books-block-info-rating-ratingsCount"))||void 0===l?void 0:l.textContent:null,descriptionBock:_.querySelector(".container__books-block-info-description")?null===(u=_.querySelector(".container__books-block-info-description"))||void 0===u?void 0:u.textContent:null,priceBock:_.querySelector(".container__books-block-info-price")?null===(d=_.querySelector(".container__books-block-info-price"))||void 0===d?void 0:d.textContent:null};r.classList.contains("container__books-block-info-btn_active")?(r.classList.remove("container__books-block-info-btn_active"),r.classList.add("container__books-block-info-btn"),i-=1,r.innerHTML="buy now",t.pop(v),e.pop(v),localStorage.setItem("publishedBooks",JSON.stringify(e)),n(i)):(r.classList.add("container__books-block-info-btn_active"),r.classList.remove("container__books-block-info-btn"),r.innerHTML="in the cart",i+=1,t.push(v),e.push(v),localStorage.setItem("publishedBooks",JSON.stringify(e)),o(i))}))}))};const o=e=>{const t=document.querySelector(".header__user-block-cart");if(null!==t)if(0==document.querySelectorAll(".header__user-block-cart-numberBooks").length){const o=document.createElement("div");o.classList.add("header__user-block-cart-numberBooks");let n=document.createElement("p");n.classList.add("header__user-block-cart-numberBooks-text"),n.innerText=`${e}`,o.appendChild(n),t.appendChild(o)}else{const t=document.querySelector(".header__user-block-cart-numberBooks-text");if(null==t)return;t.textContent=`${e}`}},n=e=>{const t=document.querySelector(".header__user-block-cart-numberBooks"),o=document.querySelector(".header__user-block-cart-numberBooks-text");null!=t&&null!=o&&(o.textContent=`${e}`,0===e&&t.remove())}}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{"use strict";function e(e){e.keys().forEach(e)}o(770),o(260),e(o(722)),e(o(281))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSUEsUUFBUSxZQUFhLEtBQzFHbEosRUFBb0JtSixFQUFJVixDLHdCQ2Z4QixTQUFTVyxFQUFXZCxHQUFLQSxFQUFFakksT0FBT3RCLFFBQVF1SixFQUFJLEMsY0FDOUNjLEVBQVcsUUFDWEEsRUFBVyxPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9wbmcvYmFubmVyMi5wbmciLCJ3ZWJwYWNrOi8vYm9va3Noby8uL3NjcmlwdC9tb2JpbC50cyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vc2NyaXB0L3NsaWRlci50cyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vaW1hZ2VzL3N2Zy8gc3luYyBeXFwuXFwvLiokIiwid2VicGFjazovL2Jvb2tzaG8vLi9pbWFnZXMvc3ZnL3VzZXIuc3ZnIiwid2VicGFjazovL2Jvb2tzaG8vLi9pbWFnZXMvc3ZnL3Nob3AgYmFnLnN2ZyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vaW1hZ2VzL3N2Zy9zZWFyY2guc3ZnIiwid2VicGFjazovL2Jvb2tzaG8vLi9pbWFnZXMvcG5nL2Jhbm5lcjMucG5nIiwid2VicGFjazovL2Jvb2tzaG8vLi9pbWFnZXMvc3ZnL1N0YXJHby5zdmciLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9wbmcvYmFubmVyMS5wbmciLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9zdmcvYXJyb3cuc3ZnIiwid2VicGFjazovL2Jvb2tzaG8vLi9pbWFnZXMvc3ZnL1N0YXIuc3ZnIiwid2VicGFjazovL2Jvb2tzaG8vLi9pbWFnZXMvcG5nLyBzeW5jIF5cXC5cXC8uKiQiLCJ3ZWJwYWNrOi8vYm9va3Noby8uL3NjcmlwdC9zY3JpcHQudHMiLCJ3ZWJwYWNrOi8vYm9va3Noby8uL3NjcmlwdC9kYXRhQm9vay50cyIsIndlYnBhY2s6Ly9ib29rc2hvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2Jvb2tzaG8vd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vYm9va3Noby93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYm9va3Noby93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2Jvb2tzaG8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9ib29rc2hvL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vYm9va3Noby93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9ib29rc2hvLy4vaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltYWdlcy9wbmcvYmFubmVyMi5wbmdcIjsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtb2JpbEFjdGl2ZU1lbnUoKSB7XHJcbiAgICBjb25zdCBtb2JpbGxCdG5NZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX21vYmlsLW1lbnVcIik7XHJcbiAgICBpZiAobW9iaWxsQnRuTWVudSA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgbW9iaWxsQnRuTWVudS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBjb25zdCBtZW51TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudV9fbW9iaWxcIik7XHJcbiAgICAgICAgbWVudUxpc3Q/LmNsYXNzTGlzdC50b2dnbGUoXCJtZW51X19tb2JpbF9oaWRkZW5cIik7XHJcbiAgICB9KVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2xpZGVycyB7XHJcbiAgICBkb3RzOiBFbGVtZW50W107XHJcbiAgICBibG9ja0Jhbm5lcjogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBpbWc6IGFueVtdO1xyXG4gICAgaW5kZXhEb3RzPzogbnVtYmVyO1xyXG4gICAgY29uc3RydWN0b3IoZG90czogRWxlbWVudFtdLCBibG9ja0Jhbm5lcjogSFRNTERpdkVsZW1lbnQsIGltZzogYW55W10sIGluZGV4RG90cz86IG51bWJlcil7XHJcbiAgICAgICAgdGhpcy5pbWcgPSBpbWc7XHJcbiAgICAgICAgdGhpcy5kb3RzID0gZG90cztcclxuICAgICAgICB0aGlzLmJsb2NrQmFubmVyID0gYmxvY2tCYW5uZXI7XHJcbiAgICAgICAgdGhpcy5pbmRleERvdHMgPSBpbmRleERvdHM7XHJcbiAgICB9XHJcbiAgICBzbGlkZXIoKSB7XHJcbiAgICAgICAgdGhpcy5kb3RzLmZvckVhY2goKGRvdDogRWxlbWVudCwgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICBkb3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZG90cy5mb3JFYWNoKCh2YWx1ZTogRWxlbWVudCkgPT4ge3ZhbHVlLmNsYXNzTGlzdC5yZW1vdmUoXCJiYW5uZXJfX3NsaWRlci1kb3RzLWRvdF9hY3RpdmVcIil9KTtcclxuICAgICAgICAgICAgICAgIGRvdC5jbGFzc0xpc3QuYWRkKFwiYmFubmVyX19zbGlkZXItZG90cy1kb3RfYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5pbWcgPT0gdW5kZWZpbmVkICkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ibG9ja0Jhbm5lci5pbm5lckhUTUwgPSBgPGltZyBzcmM9JHt0aGlzLmltZ1tpbmRleF19PmA7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIHNsaWRlckludGVydmFsKG51bTogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IGluZGV4OiBudW1iZXIgPSA8bnVtYmVyPnRoaXMuaW5kZXhEb3RzO1xyXG4gICAgICAgIGlmKGluZGV4ID09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG4gICAgICAgIHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kb3RzLmZvckVhY2goKHZhbHVlOiBFbGVtZW50KSA9PiB7dmFsdWUuY2xhc3NMaXN0LnJlbW92ZShcImJhbm5lcl9fc2xpZGVyLWRvdHMtZG90X2FjdGl2ZVwiKX0pO1xyXG4gICAgICAgICAgICBpZihpbmRleCA9PSB0aGlzLmRvdHMubGVuZ3RoKSBpbmRleCA9IDA7IFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5kb3RzW2luZGV4XS5jbGFzc0xpc3QuYWRkKFwiYmFubmVyX19zbGlkZXItZG90cy1kb3RfYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICB0aGlzLmJsb2NrQmFubmVyLmlubmVySFRNTCA9IGA8aW1nIHNyYz0ke3RoaXMuaW1nW2luZGV4XX0+YDtcclxuICAgICAgICAgICAgaW5kZXggKz0gMTtcclxuICAgICAgICB9LCBudW0pXHJcbiAgICAgICAgXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iLCJ2YXIgbWFwID0ge1xuXHRcIi4vU3Rhci5zdmdcIjogNjcxLFxuXHRcIi4vU3RhckdvLnN2Z1wiOiA1MjksXG5cdFwiLi9hcnJvdy5zdmdcIjogNjYyLFxuXHRcIi4vc2VhcmNoLnN2Z1wiOiAzOTksXG5cdFwiLi9zaG9wIGJhZy5zdmdcIjogMzY1LFxuXHRcIi4vdXNlci5zdmdcIjogMzM4XG59O1xuXG5cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0KHJlcSkge1xuXHR2YXIgaWQgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKTtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oaWQpO1xufVxuZnVuY3Rpb24gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkge1xuXHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1hcCwgcmVxKSkge1xuXHRcdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0XHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRyZXR1cm4gbWFwW3JlcV07XG59XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gMjgxOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvc3ZnL3VzZXIuc3ZnXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltYWdlcy9zdmcvc2hvcCBiYWcuc3ZnXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltYWdlcy9zdmcvc2VhcmNoLnN2Z1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvcG5nL2Jhbm5lcjMucG5nXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltYWdlcy9zdmcvU3RhckdvLnN2Z1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvcG5nL2Jhbm5lcjEucG5nXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltYWdlcy9zdmcvYXJyb3cuc3ZnXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltYWdlcy9zdmcvU3Rhci5zdmdcIjsiLCJ2YXIgbWFwID0ge1xuXHRcIi4vYmFubmVyMS5wbmdcIjogNTgyLFxuXHRcIi4vYmFubmVyMi5wbmdcIjogNSxcblx0XCIuL2Jhbm5lcjMucG5nXCI6IDQ5MlxufTtcblxuXG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dChyZXEpIHtcblx0dmFyIGlkID0gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSk7XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKGlkKTtcbn1cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpIHtcblx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhtYXAsIHJlcSkpIHtcblx0XHR2YXIgZSA9IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyByZXEgKyBcIidcIik7XG5cdFx0ZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnO1xuXHRcdHRocm93IGU7XG5cdH1cblx0cmV0dXJuIG1hcFtyZXFdO1xufVxud2VicGFja0NvbnRleHQua2V5cyA9IGZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0S2V5cygpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKG1hcCk7XG59O1xud2VicGFja0NvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZTtcbm1vZHVsZS5leHBvcnRzID0gd2VicGFja0NvbnRleHQ7XG53ZWJwYWNrQ29udGV4dC5pZCA9IDcyMjsiLCJpbXBvcnQgU2xpZGVycyBmcm9tIFwiLi9zbGlkZXJcIjtcclxuaW1wb3J0IGRhdGFCb29rIGZyb20gXCIuL2RhdGFCb29rXCI7XHJcbmltcG9ydCBtb2JpbEFjdGl2ZU1lbnUgZnJvbSBcIi4vbW9iaWxcIjtcclxuZnVuY3Rpb24gbWVudUFjdGl2ZSgpOiB2b2lkIHtcclxuICAgIGNvbnN0IG1lbnVMaW5rOiBhbnkgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubWVudV9fbGlzdC1pdGVtLWxpbmtcIikpO1xyXG4gICAgbWVudUxpbmsuZm9yRWFjaCgoaXRlbTogSFRNTExpbmtFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgbWVudUxpbmsuZm9yRWFjaCgodmFsdWU6IEhUTUxMaW5rRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUuY2xhc3NMaXN0LnJlbW92ZShcIm1lbnVfX2xpc3QtaXRlbS1saW5rX2FjdGl2ZVwiKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoXCJtZW51X19saXN0LWl0ZW0tbGlua19hY3RpdmVcIik7XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxubWVudUFjdGl2ZSgpXHJcblxyXG5mdW5jdGlvbiBzbGlkZXIoKTogdm9pZCB7XHJcbiAgICBjb25zdCBkb3RzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYmFubmVyX19zbGlkZXItZG90cy1kb3RcIildO1xyXG4gICAgY29uc3QgYmxvY2tCYW5uZXI6IEhUTUxEaXZFbGVtZW50ID0gPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmFuZXJfX2ltZ1wiKTtcclxuICAgIGNvbnN0IGltZyA9IFtcImltYWdlcy9wbmcvYmFubmVyMS5wbmdcIiwgXCJpbWFnZXMvcG5nL2Jhbm5lcjIucG5nXCIsIFwiaW1hZ2VzL3BuZy9iYW5uZXIzLnBuZ1wiXTtcclxuICAgIGNvbnN0IG5ld1NsaWRlciA9IG5ldyBTbGlkZXJzKGRvdHMsIGJsb2NrQmFubmVyLCBpbWcpO1xyXG4gICAgbmV3U2xpZGVyLnNsaWRlcigpXHJcbiAgICBsZXQgaW5kZXhEb3RzID0gMDtcclxuICAgIGNvbnN0IGludGVydmFsU2xpZGVyID0gbmV3IFNsaWRlcnMoZG90cywgYmxvY2tCYW5uZXIsIGltZywgaW5kZXhEb3RzKTtcclxuICAgIGludGVydmFsU2xpZGVyLnNsaWRlckludGVydmFsKDUwMDApO1xyXG59XHJcblxyXG5zbGlkZXIoKVxyXG5cclxuY29uc3Qgc2VsZWN0ZWRDYXRlZ29yeSA9ICgoKSA9PiB7XHJcbiAgICBjb25zdCB2YWx1ZVNlbGVjdGVkQ2F0ZWdvcnk6IHN0cmluZ1tdID0gWyBdO1xyXG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW1cIik7XHJcbiAgICBjYXRlZ29yaWVzLmZvckVhY2goKGNhdGVnb3J5KSA9PiB7XHJcbiAgICAgICAgY2F0ZWdvcnkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lckJvb2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrXCIpO1xyXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyQm9va3MgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lckJvb2tzLmZvckVhY2goYm9va3MgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvb2tzLnJlbW92ZSgpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3JpZXNJbnB1dEFjdGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW0tc3VibWl0X2FjdGl2ZVwiKVxyXG4gICAgICAgICAgICBjYXRlZ29yaWVzLmZvckVhY2goKHZhbHVlKSA9PiB2YWx1ZS5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW1fYWN0aXZlXCIpKTtcclxuICAgICAgICAgICAgY2F0ZWdvcmllc0lucHV0QWN0aXZlPy5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW0tc3VibWl0X2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgY2F0ZWdvcnkuY2xhc3NMaXN0LmFkZChcImNvbnRhaW5uZXJfX2NhdGVnb3JpZXMtbGlzdC1pdGVtX2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgY2F0ZWdvcnkucXVlcnlTZWxlY3RvcihcIi5jb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbS1zdWJtaXRcIik/LmNsYXNzTGlzdC5hZGQoXCJjb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbS1zdWJtaXRfYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZUNhdGVnb3J5OiBudWxsIHwgSFRNTElucHV0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW0tc3VibWl0X2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlQ2F0ZWdvcnkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlU2VsZWN0ZWRDYXRlZ29yeS5wb3AoKTtcclxuICAgICAgICAgICAgICAgIHZhbHVlU2VsZWN0ZWRDYXRlZ29yeS51bnNoaWZ0KHZhbHVlQ2F0ZWdvcnkudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjYXRlZ29yeVwiLCBKU09OLnN0cmluZ2lmeSh2YWx1ZVNlbGVjdGVkQ2F0ZWdvcnkuam9pbigpKSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBBUEkoKVxyXG4gICAgICAgICAgICBzYXZlQ2F0ZWdvcmllc0FjdGl2ZSgpXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbiAgICBcclxufSkoKVxyXG5cclxuZnVuY3Rpb24gc2F2ZUNhdGVnb3JpZXNBY3RpdmUoKSB7XHJcbiAgICBjb25zdCBjYXRlZ29yaWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbVwiKTtcclxuICAgIGNvbnN0IGFjdGl2ZUNhdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW1fYWN0aXZlXCIpPy5nZXRBdHRyaWJ1dGUoXCJpbmRleFwiKTtcclxuICAgIGlmIChhY3RpdmVDYXQgIT09IG51bGwpIHtcclxuICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiaW5kZXhBY3RpdmVcIiwgSlNPTi5zdHJpbmdpZnkoYWN0aXZlQ2F0KSkgIFxyXG4gICAgfSAgIFxyXG59XHJcblxyXG5sb2FkQ2F0ZWdvcmllc0FjdGl2ZSgpXHJcblxyXG5mdW5jdGlvbiBsb2FkQ2F0ZWdvcmllc0FjdGl2ZSgpIHtcclxuICAgIGxldCBsb2NhbEluZGV4QWN0aXZlOiBudW1iZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImluZGV4QWN0aXZlXCIpID8gcGFyc2VJbnQoSlNPTi5wYXJzZSg8c3RyaW5nPmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiaW5kZXhBY3RpdmVcIikpKSA6ICswO1xyXG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW1cIik7XHJcbiAgICBjb25zdCBjYXRlZ29yaWVzSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhaW5uZXJfX2NhdGVnb3JpZXMtbGlzdC1pdGVtLXN1Ym1pdFwiKTtcclxuICAgIGNhdGVnb3JpZXMuZm9yRWFjaChjYXRlZ29yeSA9PiBjYXRlZ29yeS5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW1fYWN0aXZlXCIpKTtcclxuICAgIGNhdGVnb3JpZXNJbnB1dC5mb3JFYWNoKGNhdGVnb3J5SW5wdXQgPT4gY2F0ZWdvcnlJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW0tc3VibWl0X2FjdGl2ZVwiKSk7XHJcbiAgICBpZiAobG9jYWxJbmRleEFjdGl2ZSA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgY2F0ZWdvcmllc1tsb2NhbEluZGV4QWN0aXZlXS5jbGFzc0xpc3QuYWRkKFwiY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW1fYWN0aXZlXCIpO1xyXG4gICAgY2F0ZWdvcmllc0lucHV0W2xvY2FsSW5kZXhBY3RpdmVdLmNsYXNzTGlzdC5hZGQoXCJjb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbS1zdWJtaXRfYWN0aXZlXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBBUEkoc3RhcnRJbmRleCA9IDAsIG1heFJlc3VsdHMgPSA2KSB7XHJcbiAgICBsZXQgY2F0ZWdvcnk6IHN0cmluZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY2F0ZWdvcnlcIikgPyA8c3RyaW5nPmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY2F0ZWdvcnlcIikgOiBcIkFyY2hpdGVjdHVyZVwiO1xyXG4gICAgZmV0Y2goYGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2Jvb2tzL3YxL3ZvbHVtZXM/cT1zdWJqZWN0OiR7Y2F0ZWdvcnl9JmtleT1BSXphU3lDdnpGa3VTamlaZ0pPaDkwbFphWXV2OXFVVDJ4eXBLTnMmcHJpbnRUeXBlPWJvb2tzJnN0YXJ0SW5kZXg9JHtzdGFydEluZGV4fSZtYXhSZXN1bHRzPSR7bWF4UmVzdWx0c30mbGFuZ1Jlc3RyaWN0PWVuYClcclxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAudGhlbihkaXNwbGF5UmVzdWx0KVxyXG4gICAgICAgIC50aGVuKGRhdGFCb29rKVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhcIkVSUk9SXCIpKVxyXG59XHJcbkFQSSgpXHJcblxyXG5mdW5jdGlvbiBkaXNwbGF5UmVzdWx0KGRhdGE6IGFueSkge1xyXG5cclxuICAgIGxldCByZXN1bHRBUEkgPSBkYXRhLml0ZW1zO1xyXG4gICAgY29uc3QgY29udGFpbmVyQm9va3M6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rc1wiKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0QVBJLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGltZyA9IHJlc3VsdEFQSVtpXS52b2x1bWVJbmZvLmltYWdlTGlua3MudGh1bWJuYWlsID8gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8uaW1hZ2VMaW5rcy50aHVtYm5haWwgOiBcIlwiO1xyXG4gICAgICAgIGxldCB0aXRsZSA9IHJlc3VsdEFQSVtpXS52b2x1bWVJbmZvLnRpdGxlID8gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8udGl0bGUgOiBcIlwiO1xyXG4gICAgICAgIGxldCBwcmljZTogbnVtYmVyIHwgc3RyaW5nID0gcmVzdWx0QVBJW2ldLnNhbGVJbmZvLnJldGFpbFByaWNlID8gXCIkXCIgKyAocmVzdWx0QVBJW2ldLnNhbGVJbmZvLnJldGFpbFByaWNlLmFtb3VudCAvIDgwKS50b0ZpeGVkKDIpIDogXCJcIjtcclxuICAgICAgICBsZXQgYXV0aG9yczogc3RyaW5nID0gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8uYXV0aG9ycyA/IChyZXN1bHRBUElbaV0udm9sdW1lSW5mby5hdXRob3JzKS5qb2luKFwiLCBcIikgOiBcIlwiO1xyXG4gICAgICAgIGxldCBhdmVyYWdlUmF0aW5nOiBzdHJpbmcgPSByZXN1bHRBUElbaV0udm9sdW1lSW5mby5hdmVyYWdlUmF0aW5nID8gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8uYXZlcmFnZVJhdGluZyA6IFwiXCI7XHJcbiAgICAgICAgbGV0IHJhdGluZ3NDb3VudDogc3RyaW5nID0gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8ucmF0aW5nc0NvdW50ID8gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8ucmF0aW5nc0NvdW50ICsgXCJNXCIgKyBcIiByZXZpZXdcIiA6IFwiXCI7XHJcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uOiBzdHJpbmcgPSByZXN1bHRBUElbaV0udm9sdW1lSW5mby5kZXNjcmlwdGlvbiA/IHJlc3VsdEFQSVtpXS52b2x1bWVJbmZvLmRlc2NyaXB0aW9uIDogXCJUaGVyZSBpcyBubyBkZXNjcmlwdGlvblwiO1xyXG4gICAgICAgIGNvbnN0IHJlcGV0aW5nSW5kZXggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2tcIik7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gaTtcclxuICAgICAgICBpZiAocmVwZXRpbmdJbmRleC5sZW5ndGggPj0gcmVzdWx0QVBJLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpbmRleCA9IHJlcGV0aW5nSW5kZXgubGVuZ3RoICsgMTsgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHNob3dCb29rID0gYFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2tcIiBpbmRleD0ke2luZGV4fSBpZD1cImJvb2stJHtpbmRleH1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbWdcIiBzcmM9XCIke2ltZ31cIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLWF1dG9yXCI+JHthdXRob3JzfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXRpdGxlXCI+JHt0aXRsZX08L2gyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZ1wiPjxzcGFuIGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZy1hdmVyYWdlUmF0aW5nLXRleHRTcFwiPiR7YXZlcmFnZVJhdGluZ308L3NwYW4+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctcmF0aW5nc0NvdW50XCI+JHtyYXRpbmdzQ291bnR9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tZGVzY3JpcHRpb25cIj4ke2Rlc2NyaXB0aW9ufTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tcHJpY2VcIj4ke3ByaWNlfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tYnRuXCI+YnV5IG5vdzwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGA7ICAgXHJcbiAgICAgICAgY29udGFpbmVyQm9va3M/Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBzaG93Qm9vayk7ICAgICBcclxuICAgICAgICBcclxuICAgIH1cclxuICAgIGF2ZXJhZ2VSYXRpbmcoKVxyXG59XHJcblxyXG5mdW5jdGlvbiBhdmVyYWdlUmF0aW5nKCkge1xyXG4gICAgbGV0IG5ld0ltZ0dvbGQgPSBgPGltZyBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZy1zdGFyLWdvbGRcIiBzcmM9XCIuL2ltYWdlcy9zdmcvU3RhckdvLnN2Z1wiIGFscz1cInN0YXJcIj5gO1xyXG4gICAgbGV0IGltZ1N0YXIgPSBgPGltZyBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZy1zdGFyLWdvbGRcIiBzcmM9XCIuL2ltYWdlcy9zdmcvU3Rhci5zdmdcIiBhbHM9XCJzdGFyXCI+YDtcclxuICAgIGNvbnN0IGRpdkF2ZXJhZ2VSYXRpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZ1wiKTtcclxuICAgIFxyXG4gICAgZGl2QXZlcmFnZVJhdGluZy5mb3JFYWNoKChkaXYsIGluZGV4LCBhcnJheSkgPT4ge1xyXG4gICAgICAgIGxldCB0ZXh0U3BhbjogYW55ID0gZGl2LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZy1hdmVyYWdlUmF0aW5nLXRleHRTcFwiKTtcclxuICAgICAgICBpZiAodGV4dFNwYW4gPT09IG51bGwpIHJldHVybjtcclxuICAgICAgICBsZXQgbnVtQ29udGVudDogbnVtYmVyID0gK3RleHRTcGFuLnRleHRDb250ZW50O1xyXG4gICAgICAgIGxldCByZXN1bHRSYXRpbmcgPSA1IC0gbnVtQ29udGVudDtcclxuXHJcbiAgICAgICAgaWYgKG51bUNvbnRlbnQgPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQ29udGVudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBkaXYuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIG5ld0ltZ0dvbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0UmF0aW5nOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGRpdi5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgaW1nU3Rhcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGZpcnNFbGVtZW50RGl2QXZlcmFnZVJhdGluZyA9IGRpdi5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZy10ZXh0U3BcIik7XHJcbiAgICAgICAgaWYgKGZpcnNFbGVtZW50RGl2QXZlcmFnZVJhdGluZyAhPT0gbnVsbCkgZmlyc0VsZW1lbnREaXZBdmVyYWdlUmF0aW5nLnJlbW92ZSgpO1xyXG4gICAgICAgIFxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbmNvbnN0IGxvYWRNb3JlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgYnRuTG9hZE1vcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYnRuXCIpO1xyXG4gICAgaWYgKGJ0bkxvYWRNb3JlID09IG51bGwpIHJldHVybjtcclxuICAgIGxldCBjbGljayA9IDE7XHJcbiAgICBsZXQgY291bnQgPSA2O1xyXG4gICAgYnRuTG9hZE1vcmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgIGxldCBzdGFydEluZGV4ID0gY2xpY2sgKiBjb3VudDtcclxuICAgICAgICBBUEkoc3RhcnRJbmRleClcclxuICAgICAgICBjbGljaysrO1xyXG4gICAgfSlcclxufVxyXG5sb2FkTW9yZSgpXHJcbm1vYmlsQWN0aXZlTWVudSgpIiwiXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRhdGFCb29rKCk6IHZvaWQge1xyXG4gICAgbGV0IGJvb2Nrc0RhdGE6IGFueSA9IFsgXTtcclxuICAgIGxldCBib29ja3NEYXRhTG9jYWw6IGFueTtcclxuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInB1Ymxpc2hlZEJvb2tzXCIpICE9PSBudWxsKSB7XHJcbiAgICAgICAgbGV0IHBhcnNlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwdWJsaXNoZWRCb29rc1wiKVxyXG4gICAgICAgIGJvb2Nrc0RhdGFMb2NhbCA9IEpTT04ucGFyc2UoPHN0cmluZz5wYXJzZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJvb2Nrc0RhdGFMb2NhbCA9IFsgXTtcclxuICAgIH1cclxuICAgIGxldCBidG5CdXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1idG5cIik7XHJcbiAgICBcclxuICAgIGxldCBudW1iZXJPZkJva3MgPSAwO1xyXG4gICAgYnRuQnV5LmZvckVhY2goKGJheSwgaW5kZXgsIGFycmF5KSA9PiB7XHJcbiAgICAgICAgYmF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvb2NrID0gYmF5LmNsb3Nlc3QoYFtpbmRleF1gKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2Jvb2NrOiAnLCBib29jayk7XHJcbiAgICAgICAgICAgIGlmIChib29jayA9PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4Qm9vY2s6IHN0cmluZyB8IG51bGwgPSBib29jay5nZXRBdHRyaWJ1dGUoXCJpbmRleFwiKVxyXG4gICAgICAgICAgICBjb25zdCBpbWdCb2NrOiBIVE1MSW1hZ2VFbGVtZW50IHwgbnVsbCA9IGJvb2NrPy5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW1nXCIpID8gYm9vY2sucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrLWltZ1wiKSA6IG51bGw7XHJcbiAgICAgICAgICAgIGxldCBzcmNJbWdCb2NrOiBzdHJpbmcgPSBcIlwiXHJcbiAgICAgICAgICAgIGlmIChpbWdCb2NrICE9PSBudWxsKSBzcmNJbWdCb2NrID0gaW1nQm9jay5zcmM7XHJcbiAgICAgICAgICAgIGNvbnN0IGF1dG9yQm9jazogc3RyaW5nID0gPHN0cmluZz5ib29jaz8ucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tYXV0b3JcIik/LnRleHRDb250ZW50O1xyXG4gICAgICAgICAgICBjb25zdCB0aXRsZUJvY2s6IHN0cmluZyA9IDxzdHJpbmc+Ym9vY2sucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tdGl0bGVcIik/LnRleHRDb250ZW50O1xyXG4gICAgICAgICAgICBjb25zdCBhdmVyYWdlUmF0aW5nQm9jazogc3RyaW5nIHwgbnVsbCA9IGJvb2NrLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZy1hdmVyYWdlUmF0aW5nXCIpID8gPHN0cmluZz5ib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZ1wiKT8udGV4dENvbnRlbnQgOiBudWxsO1xyXG4gICAgICAgICAgICBjb25zdCByYXRpbmdDb3VudEJvY2s6IHN0cmluZyB8IG51bGwgPSBib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctcmF0aW5nc0NvdW50XCIpID8gPHN0cmluZz5ib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctcmF0aW5nc0NvdW50XCIpPy50ZXh0Q29udGVudCA6IG51bGw7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uQm9jazogc3RyaW5nIHwgbnVsbCA9IGJvb2NrLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLWRlc2NyaXB0aW9uXCIpID8gPHN0cmluZz5ib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1kZXNjcmlwdGlvblwiKT8udGV4dENvbnRlbnQgOiBudWxsO1xyXG4gICAgICAgICAgICBjb25zdCBwcmljZUJvY2s6IHN0cmluZyB8IG51bGwgPSBib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1wcmljZVwiKSA/IDxzdHJpbmc+Ym9vY2sucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tcHJpY2VcIik/LnRleHRDb250ZW50IDogbnVsbDtcclxuICAgICAgICAgICAgdHlwZSBpbmZvQm9jayA9IHtcclxuICAgICAgICAgICAgICAgIGluZGV4Qm9vY2s6IHN0cmluZyB8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBzcmNJbWdCb2NrOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBhdXRvckJvY2s6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgIHRpdGxlQm9jazogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgYXZlcmFnZVJhdGluZ0JvY2s6IHN0cmluZyB8IG51bGwsXHJcbiAgICAgICAgICAgICAgICByYXRpbmdDb3VudEJvY2s6IHN0cmluZyB8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbkJvY2s6IHN0cmluZyB8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBwcmljZUJvY2s6IHN0cmluZyB8IG51bGwsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGxldCBpbmZvQm9jazogaW5mb0JvY2sgPSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleEJvb2NrOiBpbmRleEJvb2NrLFxyXG4gICAgICAgICAgICAgICAgc3JjSW1nQm9jazogc3JjSW1nQm9jayxcclxuICAgICAgICAgICAgICAgIGF1dG9yQm9jazogYXV0b3JCb2NrLFxyXG4gICAgICAgICAgICAgICAgdGl0bGVCb2NrOiB0aXRsZUJvY2ssXHJcbiAgICAgICAgICAgICAgICBhdmVyYWdlUmF0aW5nQm9jazogYXZlcmFnZVJhdGluZ0JvY2ssXHJcbiAgICAgICAgICAgICAgICByYXRpbmdDb3VudEJvY2s6IHJhdGluZ0NvdW50Qm9jayxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uQm9jazogZGVzY3JpcHRpb25Cb2NrLFxyXG4gICAgICAgICAgICAgICAgcHJpY2VCb2NrOiBwcmljZUJvY2tcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGJheS5jbGFzc0xpc3QuY29udGFpbnMoXCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tYnRuX2FjdGl2ZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgYmF5LmNsYXNzTGlzdC5yZW1vdmUoXCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tYnRuX2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIGJheS5jbGFzc0xpc3QuYWRkKFwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLWJ0blwiKVxyXG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZCb2tzID0gbnVtYmVyT2ZCb2tzIC0gMTtcclxuICAgICAgICAgICAgICAgIGJheS5pbm5lckhUTUwgPSBcImJ1eSBub3dcIjtcclxuICAgICAgICAgICAgICAgIGJvb2Nrc0RhdGEucG9wKGluZm9Cb2NrKTtcclxuICAgICAgICAgICAgICAgIGJvb2Nrc0RhdGFMb2NhbC5wb3AoaW5mb0JvY2spO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwdWJsaXNoZWRCb29rc1wiLCBKU09OLnN0cmluZ2lmeShib29ja3NEYXRhTG9jYWwpKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlVG9Cb29rKG51bWJlck9mQm9rcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBiYXkuY2xhc3NMaXN0LmFkZChcImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1idG5fYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgYmF5LmNsYXNzTGlzdC5yZW1vdmUoXCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tYnRuXCIpXHJcbiAgICAgICAgICAgICAgICBiYXkuaW5uZXJIVE1MID0gXCJpbiB0aGUgY2FydFwiO1xyXG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZCb2tzID0gbnVtYmVyT2ZCb2tzICsgMTtcclxuICAgICAgICAgICAgICAgIGJvb2Nrc0RhdGEucHVzaChpbmZvQm9jayk7XHJcbiAgICAgICAgICAgICAgICBib29ja3NEYXRhTG9jYWwucHVzaChpbmZvQm9jayk7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInB1Ymxpc2hlZEJvb2tzXCIsIEpTT04uc3RyaW5naWZ5KGJvb2Nrc0RhdGFMb2NhbCkpO1xyXG4gICAgICAgICAgICAgICAgYWRkVG9Cb29rKG51bWJlck9mQm9rcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuY29uc3QgYWRkVG9Cb29rID0gKG51bWJlck9mQm9rczogbnVtYmVyKSA9PiB7XHJcbiAgICBjb25zdCBjYXJ0OiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fdXNlci1ibG9jay1jYXJ0XCIpO1xyXG4gICAgaWYgKGNhcnQgPT09IG51bGwpIHJldHVybjtcclxuICAgIGNvbnN0IG51bWJlckJvb2tzRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oZWFkZXJfX3VzZXItYmxvY2stY2FydC1udW1iZXJCb29rc1wiKS5sZW5ndGg7XHJcbiAgICBpZiAobnVtYmVyQm9va3NEaXYgPT0gMCkge1xyXG4gICAgICAgIGNvbnN0IG51bWJlckJvb2tzOiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbnVtYmVyQm9va3MuY2xhc3NMaXN0LmFkZChcImhlYWRlcl9fdXNlci1ibG9jay1jYXJ0LW51bWJlckJvb2tzXCIpO1xyXG4gICAgICAgIGxldCBudW1UZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICAgICAgbnVtVGV4dC5jbGFzc0xpc3QuYWRkKFwiaGVhZGVyX191c2VyLWJsb2NrLWNhcnQtbnVtYmVyQm9va3MtdGV4dFwiKTtcclxuICAgICAgICBudW1UZXh0LmlubmVyVGV4dCA9IGAke251bWJlck9mQm9rc31gO1xyXG4gICAgICAgIG51bWJlckJvb2tzLmFwcGVuZENoaWxkKG51bVRleHQpO1xyXG4gICAgICAgIGNhcnQuYXBwZW5kQ2hpbGQobnVtYmVyQm9va3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBudW1iZXJCb29rc1RleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fdXNlci1ibG9jay1jYXJ0LW51bWJlckJvb2tzLXRleHRcIik7XHJcbiAgICAgICAgaWYgKG51bWJlckJvb2tzVGV4dCA9PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgbnVtYmVyQm9va3NUZXh0LnRleHRDb250ZW50ID0gYCR7bnVtYmVyT2ZCb2tzfWBcclxuICAgIH1cclxuICAgIFxyXG59XHJcbmNvbnN0IHJlbW92ZVRvQm9vayA9IChudW1iZXJPZkJva3M6IG51bWJlcikgPT4ge1xyXG4gICAgY29uc3QgbnVtYmVyQm9va3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fdXNlci1ibG9jay1jYXJ0LW51bWJlckJvb2tzXCIpO1xyXG4gICAgY29uc3QgbnVtYmVyQm9va3NUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX3VzZXItYmxvY2stY2FydC1udW1iZXJCb29rcy10ZXh0XCIpO1xyXG4gICAgaWYgKG51bWJlckJvb2tzID09IG51bGwpIHJldHVybjtcclxuICAgIGlmIChudW1iZXJCb29rc1RleHQgPT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgbnVtYmVyQm9va3NUZXh0LnRleHRDb250ZW50ID0gYCR7bnVtYmVyT2ZCb2tzfWA7XHJcbiAgICBpZiAobnVtYmVyT2ZCb2tzID09PSAwKSBudW1iZXJCb29rcy5yZW1vdmUoKTtcclxufSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdCAmJiBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnRhZ05hbWUudG9VcHBlckNhc2UoKSA9PT0gJ1NDUklQVCcpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM7XG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkge1xuXHRcdFx0dmFyIGkgPSBzY3JpcHRzLmxlbmd0aCAtIDE7XG5cdFx0XHR3aGlsZSAoaSA+IC0xICYmICghc2NyaXB0VXJsIHx8ICEvXmh0dHAocz8pOi8udGVzdChzY3JpcHRVcmwpKSkgc2NyaXB0VXJsID0gc2NyaXB0c1tpLS1dLnNyYztcblx0XHR9XG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvXmJsb2I6LywgXCJcIikucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImltcG9ydCBcIi4vc2NyaXB0L3NjcmlwdC50c1wiO1xyXG5pbXBvcnQgXCIuL3NjcmlwdC9zbGlkZXIudHNcIlxyXG5pbXBvcnQgXCIuL3N0eWxlL3N0eWxlLnNjc3NcIjtcclxuZnVuY3Rpb24gcmVxdWlyZUFsbChyKSB7IHIua2V5cygpLmZvckVhY2gocik7IH0gLy8g0YTRg9C90LrRhtC40Y8g0LTQu9GPINC00L7QsdCw0LLQu9C10L3QuNGPINCy0YHQtdGFINC60LDRgNGC0LjQvdC+0Log0LIgd2VicGFja1xyXG5yZXF1aXJlQWxsKHJlcXVpcmUuY29udGV4dCgnL2ltYWdlcy9wbmcnLCB0cnVlKSk7XHJcbnJlcXVpcmVBbGwocmVxdWlyZS5jb250ZXh0KCcvaW1hZ2VzL3N2ZycsIHRydWUpKTsiXSwibmFtZXMiOlsibW9iaWxsQnRuTWVudSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJtZW51TGlzdCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNvbnN0cnVjdG9yIiwiZG90cyIsImJsb2NrQmFubmVyIiwiaW1nIiwiaW5kZXhEb3RzIiwidGhpcyIsInNsaWRlciIsImZvckVhY2giLCJkb3QiLCJpbmRleCIsInZhbHVlIiwicmVtb3ZlIiwiYWRkIiwidW5kZWZpbmVkIiwiaW5uZXJIVE1MIiwic2xpZGVySW50ZXJ2YWwiLCJudW0iLCJzZXRJbnRlcnZhbCIsImxlbmd0aCIsIm1hcCIsIndlYnBhY2tDb250ZXh0IiwicmVxIiwiaWQiLCJ3ZWJwYWNrQ29udGV4dFJlc29sdmUiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibyIsImUiLCJFcnJvciIsImNvZGUiLCJrZXlzIiwiT2JqZWN0IiwicmVzb2x2ZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJBUEkiLCJzdGFydEluZGV4IiwibWF4UmVzdWx0cyIsImNhdGVnb3J5IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImRpc3BsYXlSZXN1bHQiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJkYXRhIiwicmVzdWx0QVBJIiwiaXRlbXMiLCJjb250YWluZXJCb29rcyIsImkiLCJ2b2x1bWVJbmZvIiwiaW1hZ2VMaW5rcyIsInRodW1ibmFpbCIsInRpdGxlIiwicHJpY2UiLCJzYWxlSW5mbyIsInJldGFpbFByaWNlIiwiYW1vdW50IiwidG9GaXhlZCIsImF1dGhvcnMiLCJqb2luIiwiYXZlcmFnZVJhdGluZyIsInJhdGluZ3NDb3VudCIsImRlc2NyaXB0aW9uIiwicmVwZXRpbmdJbmRleCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzaG93Qm9vayIsImluc2VydEFkamFjZW50SFRNTCIsImRpdiIsImFycmF5IiwidGV4dFNwYW4iLCJudW1Db250ZW50IiwidGV4dENvbnRlbnQiLCJyZXN1bHRSYXRpbmciLCJmaXJzRWxlbWVudERpdkF2ZXJhZ2VSYXRpbmciLCJtZW51TGluayIsIkFycmF5IiwiZnJvbSIsIml0ZW0iLCJtZW51QWN0aXZlIiwidmFsdWVTZWxlY3RlZENhdGVnb3J5IiwiY2F0ZWdvcmllcyIsImJvb2tzIiwiY2F0ZWdvcmllc0lucHV0QWN0aXZlIiwidmFsdWVDYXRlZ29yeSIsInBvcCIsInVuc2hpZnQiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImFjdGl2ZUNhdCIsImdldEF0dHJpYnV0ZSIsInNhdmVDYXRlZ29yaWVzQWN0aXZlIiwibG9jYWxJbmRleEFjdGl2ZSIsInBhcnNlSW50IiwicGFyc2UiLCJjYXRlZ29yaWVzSW5wdXQiLCJjYXRlZ29yeUlucHV0IiwibG9hZENhdGVnb3JpZXNBY3RpdmUiLCJidG5Mb2FkTW9yZSIsImNsaWNrIiwibG9hZE1vcmUiLCJib29ja3NEYXRhTG9jYWwiLCJib29ja3NEYXRhIiwiYnRuQnV5IiwibnVtYmVyT2ZCb2tzIiwiYmF5IiwiYm9vY2siLCJjbG9zZXN0IiwiaW5kZXhCb29jayIsImltZ0JvY2siLCJzcmNJbWdCb2NrIiwic3JjIiwiaW5mb0JvY2siLCJhdXRvckJvY2siLCJ0aXRsZUJvY2siLCJhdmVyYWdlUmF0aW5nQm9jayIsInJhdGluZ0NvdW50Qm9jayIsImRlc2NyaXB0aW9uQm9jayIsInByaWNlQm9jayIsImNvbnRhaW5zIiwicmVtb3ZlVG9Cb29rIiwicHVzaCIsImFkZFRvQm9vayIsImNhcnQiLCJudW1iZXJCb29rcyIsImNyZWF0ZUVsZW1lbnQiLCJudW1UZXh0IiwiaW5uZXJUZXh0IiwiYXBwZW5kQ2hpbGQiLCJudW1iZXJCb29rc1RleHQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJnIiwiZ2xvYmFsVGhpcyIsIkZ1bmN0aW9uIiwid2luZG93Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiY3VycmVudFNjcmlwdCIsInRhZ05hbWUiLCJ0b1VwcGVyQ2FzZSIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInRlc3QiLCJyZXBsYWNlIiwicCIsInJlcXVpcmVBbGwiXSwic291cmNlUm9vdCI6IiJ9