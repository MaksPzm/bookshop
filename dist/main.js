(()=>{var e={5:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/png/banner2.png"},202:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=document.querySelector(".header__mobil-menu");null!==e&&e.addEventListener("click",(()=>{const e=document.querySelector(".menu__mobil");null==e||e.classList.toggle("menu__mobil_hidden")}))}},260:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,o,n){this.img=o,this.dots=e,this.blockBanner=t,this.indexDots=n}slider(){this.dots.forEach(((e,t)=>{e.addEventListener("click",(()=>{this.dots.forEach((e=>{e.classList.remove("banner__slider-dots-dot_active")})),e.classList.add("banner__slider-dots-dot_active"),null!=this.img&&(this.blockBanner.innerHTML=`<img src=${this.img[t]}>`)}))}))}sliderInterval(e){let t=this.indexDots;null!=t&&setInterval((()=>{this.dots.forEach((e=>{e.classList.remove("banner__slider-dots-dot_active")})),t==this.dots.length&&(t=0),this.dots[t].classList.add("banner__slider-dots-dot_active"),this.blockBanner.innerHTML=`<img src=${this.img[t]}>`,t+=1}),e)}}},281:(e,t,o)=>{var n={"./Star.svg":671,"./StarGo.svg":529,"./arrow.svg":662,"./search.svg":399,"./shop bag.svg":365,"./user.svg":338};function r(e){var t=i(e);return o(t)}function i(e){if(!o.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=281},338:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/user.svg"},365:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/shop bag.svg"},399:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/search.svg"},492:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/png/banner3.png"},529:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/StarGo.svg"},582:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/png/banner1.png"},662:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/arrow.svg"},671:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=o.p+"images/svg/Star.svg"},722:(e,t,o)=>{var n={"./banner1.png":582,"./banner2.png":5,"./banner3.png":492};function r(e){var t=i(e);return o(t)}function i(e){if(!o.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=722},770:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(o(260)),i=n(o(884)),s=n(o(202));function c(e=0,t=6){let o=localStorage.getItem("category")?localStorage.getItem("category"):"Architecture";fetch(`https://www.googleapis.com/books/v1/volumes?q=subject:${o}&key=AIzaSyCvzFkuSjiZgJOh90lZaYuv9qUT2xypKNs&printType=books&startIndex=${e}&maxResults=${t}&langRestrict=en`).then((e=>e.json())).then(a).then(i.default).catch((e=>console.log("ERROR")))}function a(e){let t=e.items;const o=document.querySelector(".container__books");for(let e=0;e<t.length;e++){let n=t[e].volumeInfo.imageLinks.thumbnail?t[e].volumeInfo.imageLinks.thumbnail:"",r=t[e].volumeInfo.title?t[e].volumeInfo.title:"",i=t[e].saleInfo.retailPrice?"$"+(t[e].saleInfo.retailPrice.amount/80).toFixed(2):"";const s=`\n            <div class="container__books-block" index=${e} id="book-${e}">\n                <img class="container__books-block-img" src="${n}">\n                <div class="container__books-block-info">\n                    <span class="container__books-block-info-autor">${t[e].volumeInfo.authors?t[e].volumeInfo.authors.join(", "):""}</span>\n                    <h2 class="container__books-block-info-title">${r}</h2>\n                    <div class="container__books-block-info-rating">\n                        <div class="container__books-block-info-rating-averageRating"><span class="container__books-block-info-rating-averageRating-textSp">${t[e].volumeInfo.averageRating?t[e].volumeInfo.averageRating:""}</span></div>\n                        <span class="container__books-block-info-rating-ratingsCount">${t[e].volumeInfo.ratingsCount?t[e].volumeInfo.ratingsCount+"M review":""}</span>\n                    </div>\n                    <p class="container__books-block-info-description">${t[e].volumeInfo.description?t[e].volumeInfo.description:"There is no description"}</p>\n                    <span class="container__books-block-info-price">${i}</span>\n                    <button type="button" class="container__books-block-info-btn">buy now</button>\n                </div>\n            </div>\n        `;null==o||o.insertAdjacentHTML("beforeend",s)}document.querySelectorAll(".container__books-block-info-rating-averageRating").forEach(((e,t,o)=>{let n=e.querySelector(".container__books-block-info-rating-averageRating-textSp");if(null===n)return;let r=+n.textContent,i=5-r;if(r>0){for(let t=0;t<r;t++)e.insertAdjacentHTML("beforeend",'<img class="container__books-block-info-rating-averageRating-star-gold" src="./images/svg/StarGo.svg" als="star">');for(let t=0;t<i;t++)e.insertAdjacentHTML("beforeend",'<img class="container__books-block-info-rating-averageRating-star-gold" src="./images/svg/Star.svg" als="star">')}let s=e.querySelector(".container__books-block-info-rating-averageRating-textSp");null!==s&&s.remove()}))}!function(){const e=Array.from(document.querySelectorAll(".menu__list-item-link"));e.forEach((t=>{t.addEventListener("click",(()=>{e.forEach((e=>{e.classList.remove("menu__list-item-link_active")})),t.classList.add("menu__list-item-link_active")}))}))}(),function(){const e=[...document.querySelectorAll(".banner__slider-dots-dot")],t=document.querySelector(".baner__img"),o=["/images/png/banner1.png","/images/png/banner2.png","/images/png/banner3.png"];new r.default(e,t,o).slider(),new r.default(e,t,o,0).sliderInterval(5e3)}(),(()=>{const e=[],t=document.querySelectorAll(".containner__categories-list-item");t.forEach((o=>{o.addEventListener("click",(()=>{var n;const r=document.querySelectorAll(".container__books-block");null!==r&&r.forEach((e=>{e.remove()}));const i=document.querySelector(".containner__categories-list-item-submit_active");t.forEach((e=>e.classList.remove("containner__categories-list-item_active"))),null==i||i.classList.remove("containner__categories-list-item-submit_active"),o.classList.add("containner__categories-list-item_active"),null===(n=o.querySelector(".containner__categories-list-item-submit"))||void 0===n||n.classList.add("containner__categories-list-item-submit_active");const s=document.querySelector(".containner__categories-list-item-submit_active");null!==s&&(e.pop(),e.unshift(s.value),localStorage.setItem("category",JSON.stringify(e.join()))),c(),function(){var e;document.querySelectorAll(".containner__categories-list-item");const t=null===(e=document.querySelector(".containner__categories-list-item_active"))||void 0===e?void 0:e.getAttribute("index");null!==t&&localStorage.setItem("indexActive",JSON.stringify(t))}()}))}))})(),function(){let e=localStorage.getItem("indexActive")?parseInt(JSON.parse(localStorage.getItem("indexActive"))):0;const t=document.querySelectorAll(".containner__categories-list-item"),o=document.querySelectorAll(".containner__categories-list-item-submit");t.forEach((e=>e.classList.remove("containner__categories-list-item_active"))),o.forEach((e=>e.classList.remove("containner__categories-list-item-submit_active"))),null!==e&&(t[e].classList.add("containner__categories-list-item_active"),o[e].classList.add("containner__categories-list-item-submit_active"))}(),c(),(()=>{const e=document.querySelector(".container__btn");if(null==e)return;let t=1;e.addEventListener("click",(e=>{c(6*t),t++}))})(),(0,s.default)()},884:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e,t=[];if(null!==localStorage.getItem("publishedBooks")){let t=localStorage.getItem("publishedBooks");e=JSON.parse(t)}else e=[];const r=document.querySelectorAll(".container__books-block-info-btn");let i=0;r.forEach(((r,s,c)=>{r.addEventListener("click",(()=>{var c,a,l,u,d,_;const g=r.closest(`#book-${s}`);if(null==g)return;const b=g.getAttribute("index"),m=(null==g?void 0:g.querySelector(".container__books-block-img"))?g.querySelector(".container__books-block-img"):null;let v="";null!==m&&(v=m.src);let f={indexBoock:b,srcImgBock:v,autorBock:null===(c=null==g?void 0:g.querySelector(".container__books-block-info-autor"))||void 0===c?void 0:c.textContent,titleBock:null===(a=g.querySelector(".container__books-block-info-title"))||void 0===a?void 0:a.textContent,averageRatingBock:g.querySelector(".container__books-block-info-rating-averageRating")?null===(l=g.querySelector(".container__books-block-info-rating-averageRating"))||void 0===l?void 0:l.textContent:null,ratingCountBock:g.querySelector(".container__books-block-info-rating-ratingsCount")?null===(u=g.querySelector(".container__books-block-info-rating-ratingsCount"))||void 0===u?void 0:u.textContent:null,descriptionBock:g.querySelector(".container__books-block-info-description")?null===(d=g.querySelector(".container__books-block-info-description"))||void 0===d?void 0:d.textContent:null,priceBock:g.querySelector(".container__books-block-info-price")?null===(_=g.querySelector(".container__books-block-info-price"))||void 0===_?void 0:_.textContent:null};r.classList.contains("container__books-block-info-btn_active")?(r.classList.remove("container__books-block-info-btn_active"),r.classList.add("container__books-block-info-btn"),i-=1,r.innerHTML="buy now",t.pop(f),e.pop(f),localStorage.setItem("publishedBooks",JSON.stringify(e)),n(i)):(r.classList.add("container__books-block-info-btn_active"),r.classList.remove("container__books-block-info-btn"),r.innerHTML="in the cart",i+=1,t.push(f),e.push(f),localStorage.setItem("publishedBooks",JSON.stringify(e)),o(i))}))}))};const o=e=>{const t=document.querySelector(".header__user-block-cart");if(null!==t)if(0==document.querySelectorAll(".header__user-block-cart-numberBooks").length){const o=document.createElement("div");o.classList.add("header__user-block-cart-numberBooks");let n=document.createElement("p");n.classList.add("header__user-block-cart-numberBooks-text"),n.innerText=`${e}`,o.appendChild(n),t.appendChild(o)}else{const t=document.querySelector(".header__user-block-cart-numberBooks-text");if(null==t)return;t.textContent=`${e}`}},n=e=>{const t=document.querySelector(".header__user-block-cart-numberBooks"),o=document.querySelector(".header__user-block-cart-numberBooks-text");null!=t&&null!=o&&(o.textContent=`${e}`,0===e&&t.remove())}}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{"use strict";function e(e){e.keys().forEach(e)}o(770),o(260),e(o(722)),e(o(281))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YnBhY2s6Ly9ib29rc2hvLy4vc2NyaXB0L21vYmlsLnRzIiwid2VicGFjazovL2Jvb2tzaG8vLi9zY3JpcHQvc2xpZGVyLnRzIiwid2VicGFjazovL2Jvb2tzaG8vLi9pbWFnZXMvc3ZnLyBzeW5jIF5cXC5cXC8uKiQiLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9zdmcvdXNlci5zdmciLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9zdmcvc2hvcCBiYWcuc3ZnIiwid2VicGFjazovL2Jvb2tzaG8vLi9pbWFnZXMvc3ZnL3NlYXJjaC5zdmciLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9wbmcvYmFubmVyMy5wbmciLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9zdmcvU3RhckdvLnN2ZyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vaW1hZ2VzL3BuZy9iYW5uZXIxLnBuZyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vaW1hZ2VzL3N2Zy9hcnJvdy5zdmciLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9zdmcvU3Rhci5zdmciLCJ3ZWJwYWNrOi8vYm9va3Noby8uL2ltYWdlcy9wbmcvIHN5bmMgXlxcLlxcLy4qJCIsIndlYnBhY2s6Ly9ib29rc2hvLy4vc2NyaXB0L3NjcmlwdC50cyIsIndlYnBhY2s6Ly9ib29rc2hvLy4vc2NyaXB0L2RhdGFCb29rLnRzIiwid2VicGFjazovL2Jvb2tzaG8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYm9va3Noby93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9ib29rc2hvL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9ib29rc2hvL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vYm9va3Noby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2Jvb2tzaG8vd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9ib29rc2hvL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL2Jvb2tzaG8vLi9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL3BuZy9iYW5uZXIyLnBuZ1wiOyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1vYmlsQWN0aXZlTWVudSgpIHtcclxuICAgIGNvbnN0IG1vYmlsbEJ0bk1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fbW9iaWwtbWVudVwiKTtcclxuICAgIGlmIChtb2JpbGxCdG5NZW51ID09PSBudWxsKSByZXR1cm47XHJcbiAgICBtb2JpbGxCdG5NZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1lbnVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51X19tb2JpbFwiKTtcclxuICAgICAgICBtZW51TGlzdD8uY2xhc3NMaXN0LnRvZ2dsZShcIm1lbnVfX21vYmlsX2hpZGRlblwiKTtcclxuICAgIH0pXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZXJzIHtcclxuICAgIGRvdHM6IEVsZW1lbnRbXTtcclxuICAgIGJsb2NrQmFubmVyOiBIVE1MRGl2RWxlbWVudDtcclxuICAgIGltZzogYW55W107XHJcbiAgICBpbmRleERvdHM/OiBudW1iZXI7XHJcbiAgICBjb25zdHJ1Y3Rvcihkb3RzOiBFbGVtZW50W10sIGJsb2NrQmFubmVyOiBIVE1MRGl2RWxlbWVudCwgaW1nOiBhbnlbXSwgaW5kZXhEb3RzPzogbnVtYmVyKXtcclxuICAgICAgICB0aGlzLmltZyA9IGltZztcclxuICAgICAgICB0aGlzLmRvdHMgPSBkb3RzO1xyXG4gICAgICAgIHRoaXMuYmxvY2tCYW5uZXIgPSBibG9ja0Jhbm5lcjtcclxuICAgICAgICB0aGlzLmluZGV4RG90cyA9IGluZGV4RG90cztcclxuICAgIH1cclxuICAgIHNsaWRlcigpIHtcclxuICAgICAgICB0aGlzLmRvdHMuZm9yRWFjaCgoZG90OiBFbGVtZW50LCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGRvdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kb3RzLmZvckVhY2goKHZhbHVlOiBFbGVtZW50KSA9PiB7dmFsdWUuY2xhc3NMaXN0LnJlbW92ZShcImJhbm5lcl9fc2xpZGVyLWRvdHMtZG90X2FjdGl2ZVwiKX0pO1xyXG4gICAgICAgICAgICAgICAgZG90LmNsYXNzTGlzdC5hZGQoXCJiYW5uZXJfX3NsaWRlci1kb3RzLWRvdF9hY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmltZyA9PSB1bmRlZmluZWQgKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2NrQmFubmVyLmlubmVySFRNTCA9IGA8aW1nIHNyYz0ke3RoaXMuaW1nW2luZGV4XX0+YDtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgc2xpZGVySW50ZXJ2YWwobnVtOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgaW5kZXg6IG51bWJlciA9IDxudW1iZXI+dGhpcy5pbmRleERvdHM7XHJcbiAgICAgICAgaWYoaW5kZXggPT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRvdHMuZm9yRWFjaCgodmFsdWU6IEVsZW1lbnQpID0+IHt2YWx1ZS5jbGFzc0xpc3QucmVtb3ZlKFwiYmFubmVyX19zbGlkZXItZG90cy1kb3RfYWN0aXZlXCIpfSk7XHJcbiAgICAgICAgICAgIGlmKGluZGV4ID09IHRoaXMuZG90cy5sZW5ndGgpIGluZGV4ID0gMDsgXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmRvdHNbaW5kZXhdLmNsYXNzTGlzdC5hZGQoXCJiYW5uZXJfX3NsaWRlci1kb3RzLWRvdF9hY3RpdmVcIik7XHJcbiAgICAgICAgICAgIHRoaXMuYmxvY2tCYW5uZXIuaW5uZXJIVE1MID0gYDxpbWcgc3JjPSR7dGhpcy5pbWdbaW5kZXhdfT5gO1xyXG4gICAgICAgICAgICBpbmRleCArPSAxO1xyXG4gICAgICAgIH0sIG51bSlcclxuICAgICAgICBcclxuICAgIH1cclxufVxyXG5cclxuXHJcbiIsInZhciBtYXAgPSB7XG5cdFwiLi9TdGFyLnN2Z1wiOiA2NzEsXG5cdFwiLi9TdGFyR28uc3ZnXCI6IDUyOSxcblx0XCIuL2Fycm93LnN2Z1wiOiA2NjIsXG5cdFwiLi9zZWFyY2guc3ZnXCI6IDM5OSxcblx0XCIuL3Nob3AgYmFnLnN2Z1wiOiAzNjUsXG5cdFwiLi91c2VyLnN2Z1wiOiAzMzhcbn07XG5cblxuZnVuY3Rpb24gd2VicGFja0NvbnRleHQocmVxKSB7XG5cdHZhciBpZCA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpO1xuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhpZCk7XG59XG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKSB7XG5cdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8obWFwLCByZXEpKSB7XG5cdFx0dmFyIGUgPSBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgcmVxICsgXCInXCIpO1xuXHRcdGUuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJztcblx0XHR0aHJvdyBlO1xuXHR9XG5cdHJldHVybiBtYXBbcmVxXTtcbn1cbndlYnBhY2tDb250ZXh0LmtleXMgPSBmdW5jdGlvbiB3ZWJwYWNrQ29udGV4dEtleXMoKSB7XG5cdHJldHVybiBPYmplY3Qua2V5cyhtYXApO1xufTtcbndlYnBhY2tDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmU7XG5tb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tDb250ZXh0O1xud2VicGFja0NvbnRleHQuaWQgPSAyODE7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltYWdlcy9zdmcvdXNlci5zdmdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL3N2Zy9zaG9wIGJhZy5zdmdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL3N2Zy9zZWFyY2guc3ZnXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltYWdlcy9wbmcvYmFubmVyMy5wbmdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL3N2Zy9TdGFyR28uc3ZnXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltYWdlcy9wbmcvYmFubmVyMS5wbmdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL3N2Zy9hcnJvdy5zdmdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL3N2Zy9TdGFyLnN2Z1wiOyIsInZhciBtYXAgPSB7XG5cdFwiLi9iYW5uZXIxLnBuZ1wiOiA1ODIsXG5cdFwiLi9iYW5uZXIyLnBuZ1wiOiA1LFxuXHRcIi4vYmFubmVyMy5wbmdcIjogNDkyXG59O1xuXG5cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0KHJlcSkge1xuXHR2YXIgaWQgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKTtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oaWQpO1xufVxuZnVuY3Rpb24gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkge1xuXHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1hcCwgcmVxKSkge1xuXHRcdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0XHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRyZXR1cm4gbWFwW3JlcV07XG59XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gNzIyOyIsImltcG9ydCBTbGlkZXJzIGZyb20gXCIuL3NsaWRlclwiO1xyXG5pbXBvcnQgZGF0YUJvb2sgZnJvbSBcIi4vZGF0YUJvb2tcIjtcclxuaW1wb3J0IG1vYmlsQWN0aXZlTWVudSBmcm9tIFwiLi9tb2JpbFwiO1xyXG5mdW5jdGlvbiBtZW51QWN0aXZlKCk6IHZvaWQge1xyXG4gICAgY29uc3QgbWVudUxpbms6IGFueSA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tZW51X19saXN0LWl0ZW0tbGlua1wiKSk7XHJcbiAgICBtZW51TGluay5mb3JFYWNoKChpdGVtOiBIVE1MTGlua0VsZW1lbnQpID0+IHtcclxuICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBtZW51TGluay5mb3JFYWNoKCh2YWx1ZTogSFRNTExpbmtFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZS5jbGFzc0xpc3QucmVtb3ZlKFwibWVudV9fbGlzdC1pdGVtLWxpbmtfYWN0aXZlXCIpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcIm1lbnVfX2xpc3QtaXRlbS1saW5rX2FjdGl2ZVwiKTtcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5tZW51QWN0aXZlKClcclxuXHJcbmZ1bmN0aW9uIHNsaWRlcigpOiB2b2lkIHtcclxuICAgIGNvbnN0IGRvdHMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5iYW5uZXJfX3NsaWRlci1kb3RzLWRvdFwiKV07XHJcbiAgICBjb25zdCBibG9ja0Jhbm5lcjogSFRNTERpdkVsZW1lbnQgPSA8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5iYW5lcl9faW1nXCIpO1xyXG4gICAgY29uc3QgaW1nID0gW1wiL2ltYWdlcy9wbmcvYmFubmVyMS5wbmdcIiwgXCIvaW1hZ2VzL3BuZy9iYW5uZXIyLnBuZ1wiLCBcIi9pbWFnZXMvcG5nL2Jhbm5lcjMucG5nXCJdO1xyXG4gICAgY29uc3QgbmV3U2xpZGVyID0gbmV3IFNsaWRlcnMoZG90cywgYmxvY2tCYW5uZXIsIGltZyk7XHJcbiAgICBuZXdTbGlkZXIuc2xpZGVyKClcclxuICAgIGxldCBpbmRleERvdHMgPSAwO1xyXG4gICAgY29uc3QgaW50ZXJ2YWxTbGlkZXIgPSBuZXcgU2xpZGVycyhkb3RzLCBibG9ja0Jhbm5lciwgaW1nLCBpbmRleERvdHMpO1xyXG4gICAgaW50ZXJ2YWxTbGlkZXIuc2xpZGVySW50ZXJ2YWwoNTAwMCk7XHJcbn1cclxuXHJcbnNsaWRlcigpXHJcblxyXG5jb25zdCBzZWxlY3RlZENhdGVnb3J5ID0gKCgpID0+IHtcclxuICAgIGNvbnN0IHZhbHVlU2VsZWN0ZWRDYXRlZ29yeTogc3RyaW5nW10gPSBbIF07XHJcbiAgICBjb25zdCBjYXRlZ29yaWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbVwiKTtcclxuICAgIGNhdGVnb3JpZXMuZm9yRWFjaCgoY2F0ZWdvcnkpID0+IHtcclxuICAgICAgICBjYXRlZ29yeS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyQm9va3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2tcIik7XHJcbiAgICAgICAgICAgIGlmIChjb250YWluZXJCb29rcyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyQm9va3MuZm9yRWFjaChib29rcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9va3MucmVtb3ZlKClcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgY2F0ZWdvcmllc0lucHV0QWN0aXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbS1zdWJtaXRfYWN0aXZlXCIpXHJcbiAgICAgICAgICAgIGNhdGVnb3JpZXMuZm9yRWFjaCgodmFsdWUpID0+IHZhbHVlLmNsYXNzTGlzdC5yZW1vdmUoXCJjb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbV9hY3RpdmVcIikpO1xyXG4gICAgICAgICAgICBjYXRlZ29yaWVzSW5wdXRBY3RpdmU/LmNsYXNzTGlzdC5yZW1vdmUoXCJjb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbS1zdWJtaXRfYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBjYXRlZ29yeS5jbGFzc0xpc3QuYWRkKFwiY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW1fYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBjYXRlZ29yeS5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5uZXJfX2NhdGVnb3JpZXMtbGlzdC1pdGVtLXN1Ym1pdFwiKT8uY2xhc3NMaXN0LmFkZChcImNvbnRhaW5uZXJfX2NhdGVnb3JpZXMtbGlzdC1pdGVtLXN1Ym1pdF9hY3RpdmVcIik7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlQ2F0ZWdvcnk6IG51bGwgfCBIVE1MSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbS1zdWJtaXRfYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBpZiAodmFsdWVDYXRlZ29yeSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWVTZWxlY3RlZENhdGVnb3J5LnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgdmFsdWVTZWxlY3RlZENhdGVnb3J5LnVuc2hpZnQodmFsdWVDYXRlZ29yeS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImNhdGVnb3J5XCIsIEpTT04uc3RyaW5naWZ5KHZhbHVlU2VsZWN0ZWRDYXRlZ29yeS5qb2luKCkpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIEFQSSgpXHJcbiAgICAgICAgICAgIHNhdmVDYXRlZ29yaWVzQWN0aXZlKClcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuICAgIFxyXG59KSgpXHJcblxyXG5mdW5jdGlvbiBzYXZlQ2F0ZWdvcmllc0FjdGl2ZSgpIHtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhaW5uZXJfX2NhdGVnb3JpZXMtbGlzdC1pdGVtXCIpO1xyXG4gICAgY29uc3QgYWN0aXZlQ2F0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbV9hY3RpdmVcIik/LmdldEF0dHJpYnV0ZShcImluZGV4XCIpO1xyXG4gICAgaWYgKGFjdGl2ZUNhdCAhPT0gbnVsbCkge1xyXG4gICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJpbmRleEFjdGl2ZVwiLCBKU09OLnN0cmluZ2lmeShhY3RpdmVDYXQpKSAgXHJcbiAgICB9ICAgXHJcbn1cclxuXHJcbmxvYWRDYXRlZ29yaWVzQWN0aXZlKClcclxuXHJcbmZ1bmN0aW9uIGxvYWRDYXRlZ29yaWVzQWN0aXZlKCkge1xyXG4gICAgbGV0IGxvY2FsSW5kZXhBY3RpdmU6IG51bWJlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiaW5kZXhBY3RpdmVcIikgPyBwYXJzZUludChKU09OLnBhcnNlKDxzdHJpbmc+bG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJpbmRleEFjdGl2ZVwiKSkpIDogKzA7XHJcbiAgICBjb25zdCBjYXRlZ29yaWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbVwiKTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXNJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGFpbm5lcl9fY2F0ZWdvcmllcy1saXN0LWl0ZW0tc3VibWl0XCIpO1xyXG4gICAgY2F0ZWdvcmllcy5mb3JFYWNoKGNhdGVnb3J5ID0+IGNhdGVnb3J5LmNsYXNzTGlzdC5yZW1vdmUoXCJjb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbV9hY3RpdmVcIikpO1xyXG4gICAgY2F0ZWdvcmllc0lucHV0LmZvckVhY2goY2F0ZWdvcnlJbnB1dCA9PiBjYXRlZ29yeUlucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJjb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbS1zdWJtaXRfYWN0aXZlXCIpKTtcclxuICAgIGlmIChsb2NhbEluZGV4QWN0aXZlID09PSBudWxsKSByZXR1cm47XHJcbiAgICBjYXRlZ29yaWVzW2xvY2FsSW5kZXhBY3RpdmVdLmNsYXNzTGlzdC5hZGQoXCJjb250YWlubmVyX19jYXRlZ29yaWVzLWxpc3QtaXRlbV9hY3RpdmVcIik7XHJcbiAgICBjYXRlZ29yaWVzSW5wdXRbbG9jYWxJbmRleEFjdGl2ZV0uY2xhc3NMaXN0LmFkZChcImNvbnRhaW5uZXJfX2NhdGVnb3JpZXMtbGlzdC1pdGVtLXN1Ym1pdF9hY3RpdmVcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEFQSShzdGFydEluZGV4ID0gMCwgbWF4UmVzdWx0cyA9IDYpIHtcclxuICAgIGxldCBjYXRlZ29yeTogc3RyaW5nID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjYXRlZ29yeVwiKSA/IDxzdHJpbmc+bG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjYXRlZ29yeVwiKSA6IFwiQXJjaGl0ZWN0dXJlXCI7XHJcbiAgICBmZXRjaChgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYm9va3MvdjEvdm9sdW1lcz9xPXN1YmplY3Q6JHtjYXRlZ29yeX0ma2V5PUFJemFTeUN2ekZrdVNqaVpnSk9oOTBsWmFZdXY5cVVUMnh5cEtOcyZwcmludFR5cGU9Ym9va3Mmc3RhcnRJbmRleD0ke3N0YXJ0SW5kZXh9Jm1heFJlc3VsdHM9JHttYXhSZXN1bHRzfSZsYW5nUmVzdHJpY3Q9ZW5gKVxyXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAgIC50aGVuKGRpc3BsYXlSZXN1bHQpXHJcbiAgICAgICAgLnRoZW4oZGF0YUJvb2spXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKFwiRVJST1JcIikpXHJcbn1cclxuQVBJKClcclxuXHJcbmZ1bmN0aW9uIGRpc3BsYXlSZXN1bHQoZGF0YTogYW55KSB7XHJcblxyXG4gICAgbGV0IHJlc3VsdEFQSSA9IGRhdGEuaXRlbXM7XHJcbiAgICBjb25zdCBjb250YWluZXJCb29rczogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2Jvb2tzXCIpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHRBUEkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgaW1nID0gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8uaW1hZ2VMaW5rcy50aHVtYm5haWwgPyByZXN1bHRBUElbaV0udm9sdW1lSW5mby5pbWFnZUxpbmtzLnRodW1ibmFpbCA6IFwiXCI7XHJcbiAgICAgICAgbGV0IHRpdGxlID0gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8udGl0bGUgPyByZXN1bHRBUElbaV0udm9sdW1lSW5mby50aXRsZSA6IFwiXCI7XHJcbiAgICAgICAgbGV0IHByaWNlOiBudW1iZXIgfCBzdHJpbmcgPSByZXN1bHRBUElbaV0uc2FsZUluZm8ucmV0YWlsUHJpY2UgPyBcIiRcIiArIChyZXN1bHRBUElbaV0uc2FsZUluZm8ucmV0YWlsUHJpY2UuYW1vdW50IC8gODApLnRvRml4ZWQoMikgOiBcIlwiO1xyXG4gICAgICAgIGxldCBhdXRob3JzOiBzdHJpbmcgPSByZXN1bHRBUElbaV0udm9sdW1lSW5mby5hdXRob3JzID8gKHJlc3VsdEFQSVtpXS52b2x1bWVJbmZvLmF1dGhvcnMpLmpvaW4oXCIsIFwiKSA6IFwiXCI7XHJcbiAgICAgICAgbGV0IGF2ZXJhZ2VSYXRpbmc6IHN0cmluZyA9IHJlc3VsdEFQSVtpXS52b2x1bWVJbmZvLmF2ZXJhZ2VSYXRpbmcgPyByZXN1bHRBUElbaV0udm9sdW1lSW5mby5hdmVyYWdlUmF0aW5nIDogXCJcIjtcclxuICAgICAgICBsZXQgcmF0aW5nc0NvdW50OiBzdHJpbmcgPSByZXN1bHRBUElbaV0udm9sdW1lSW5mby5yYXRpbmdzQ291bnQgPyByZXN1bHRBUElbaV0udm9sdW1lSW5mby5yYXRpbmdzQ291bnQgKyBcIk1cIiArIFwiIHJldmlld1wiIDogXCJcIjtcclxuICAgICAgICBsZXQgZGVzY3JpcHRpb246IHN0cmluZyA9IHJlc3VsdEFQSVtpXS52b2x1bWVJbmZvLmRlc2NyaXB0aW9uID8gcmVzdWx0QVBJW2ldLnZvbHVtZUluZm8uZGVzY3JpcHRpb24gOiBcIlRoZXJlIGlzIG5vIGRlc2NyaXB0aW9uXCI7XHJcbiAgICAgICAgY29uc3Qgc2hvd0Jvb2sgPSBgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrXCIgaW5kZXg9JHtpfSBpZD1cImJvb2stJHtpfVwiPlxyXG4gICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW1nXCIgc3JjPVwiJHtpbWd9XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tYXV0b3JcIj4ke2F1dGhvcnN9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby10aXRsZVwiPiR7dGl0bGV9PC9oMj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZy1hdmVyYWdlUmF0aW5nXCI+PHNwYW4gY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tcmF0aW5nLWF2ZXJhZ2VSYXRpbmctdGV4dFNwXCI+JHthdmVyYWdlUmF0aW5nfTwvc3Bhbj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tcmF0aW5nLXJhdGluZ3NDb3VudFwiPiR7cmF0aW5nc0NvdW50fTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1kZXNjcmlwdGlvblwiPiR7ZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXByaWNlXCI+JHtwcmljZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tYnRuXCI+YnV5IG5vdzwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGBcclxuICAgICAgICBjb250YWluZXJCb29rcz8uaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIHNob3dCb29rKTtcclxuICAgIH1cclxuICAgIGF2ZXJhZ2VSYXRpbmcoKVxyXG59XHJcblxyXG5mdW5jdGlvbiBhdmVyYWdlUmF0aW5nKCkge1xyXG4gICAgbGV0IG5ld0ltZ0dvbGQgPSBgPGltZyBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZy1zdGFyLWdvbGRcIiBzcmM9XCIuL2ltYWdlcy9zdmcvU3RhckdvLnN2Z1wiIGFscz1cInN0YXJcIj5gO1xyXG4gICAgbGV0IGltZ1N0YXIgPSBgPGltZyBjbGFzcz1cImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZy1zdGFyLWdvbGRcIiBzcmM9XCIuL2ltYWdlcy9zdmcvU3Rhci5zdmdcIiBhbHM9XCJzdGFyXCI+YDtcclxuICAgIGNvbnN0IGRpdkF2ZXJhZ2VSYXRpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZ1wiKTtcclxuICAgIFxyXG4gICAgZGl2QXZlcmFnZVJhdGluZy5mb3JFYWNoKChkaXYsIGluZGV4LCBhcnJheSkgPT4ge1xyXG4gICAgICAgIGxldCB0ZXh0U3BhbjogYW55ID0gZGl2LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZy1hdmVyYWdlUmF0aW5nLXRleHRTcFwiKTtcclxuICAgICAgICBpZiAodGV4dFNwYW4gPT09IG51bGwpIHJldHVybjtcclxuICAgICAgICBsZXQgbnVtQ29udGVudDogbnVtYmVyID0gK3RleHRTcGFuLnRleHRDb250ZW50O1xyXG4gICAgICAgIGxldCByZXN1bHRSYXRpbmcgPSA1IC0gbnVtQ29udGVudDtcclxuXHJcbiAgICAgICAgaWYgKG51bUNvbnRlbnQgPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQ29udGVudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBkaXYuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIG5ld0ltZ0dvbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0UmF0aW5nOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGRpdi5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgaW1nU3Rhcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGZpcnNFbGVtZW50RGl2QXZlcmFnZVJhdGluZyA9IGRpdi5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZy10ZXh0U3BcIik7XHJcbiAgICAgICAgaWYgKGZpcnNFbGVtZW50RGl2QXZlcmFnZVJhdGluZyAhPT0gbnVsbCkgZmlyc0VsZW1lbnREaXZBdmVyYWdlUmF0aW5nLnJlbW92ZSgpO1xyXG4gICAgICAgIFxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbmNvbnN0IGxvYWRNb3JlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgYnRuTG9hZE1vcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYnRuXCIpO1xyXG4gICAgaWYgKGJ0bkxvYWRNb3JlID09IG51bGwpIHJldHVybjtcclxuICAgIGxldCBjbGljayA9IDE7XHJcbiAgICBsZXQgY291bnQgPSA2O1xyXG4gICAgYnRuTG9hZE1vcmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgIGxldCBzdGFydEluZGV4ID0gY2xpY2sgKiBjb3VudDtcclxuICAgICAgICBBUEkoc3RhcnRJbmRleClcclxuICAgICAgICBjbGljaysrO1xyXG4gICAgfSlcclxufVxyXG5sb2FkTW9yZSgpXHJcblxyXG5cclxuXHJcbm1vYmlsQWN0aXZlTWVudSgpIiwiXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRhdGFCb29rKCk6IHZvaWQge1xyXG4gICAgbGV0IGJvb2Nrc0RhdGE6IGFueSA9IFsgXTtcclxuICAgIGxldCBib29ja3NEYXRhTG9jYWw6IGFueTtcclxuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInB1Ymxpc2hlZEJvb2tzXCIpICE9PSBudWxsKSB7XHJcbiAgICAgICAgbGV0IHBhcnNlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwdWJsaXNoZWRCb29rc1wiKVxyXG4gICAgICAgIGJvb2Nrc0RhdGFMb2NhbCA9IEpTT04ucGFyc2UoPHN0cmluZz5wYXJzZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJvb2Nrc0RhdGFMb2NhbCA9IFsgXTtcclxuICAgIH1cclxuICAgIGNvbnN0IGJ0bkJ1eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLWJ0blwiKTtcclxuICAgIGxldCBudW1iZXJPZkJva3MgPSAwO1xyXG4gICAgYnRuQnV5LmZvckVhY2goKGJheSwgaW5kZXgsIGFycmF5KSA9PiB7XHJcbiAgICAgICAgYmF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvb2NrID0gYmF5LmNsb3Nlc3QoYCNib29rLSR7aW5kZXh9YCk7XHJcbiAgICAgICAgICAgIGlmIChib29jayA9PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4Qm9vY2s6IHN0cmluZyB8IG51bGwgPSBib29jay5nZXRBdHRyaWJ1dGUoXCJpbmRleFwiKVxyXG4gICAgICAgICAgICBjb25zdCBpbWdCb2NrOiBIVE1MSW1hZ2VFbGVtZW50IHwgbnVsbCA9IGJvb2NrPy5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW1nXCIpID8gYm9vY2sucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrLWltZ1wiKSA6IG51bGw7XHJcbiAgICAgICAgICAgIGxldCBzcmNJbWdCb2NrOiBzdHJpbmcgPSBcIlwiXHJcbiAgICAgICAgICAgIGlmIChpbWdCb2NrICE9PSBudWxsKSBzcmNJbWdCb2NrID0gaW1nQm9jay5zcmM7XHJcbiAgICAgICAgICAgIGNvbnN0IGF1dG9yQm9jazogc3RyaW5nID0gPHN0cmluZz5ib29jaz8ucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tYXV0b3JcIik/LnRleHRDb250ZW50O1xyXG4gICAgICAgICAgICBjb25zdCB0aXRsZUJvY2s6IHN0cmluZyA9IDxzdHJpbmc+Ym9vY2sucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tdGl0bGVcIik/LnRleHRDb250ZW50O1xyXG4gICAgICAgICAgICBjb25zdCBhdmVyYWdlUmF0aW5nQm9jazogc3RyaW5nIHwgbnVsbCA9IGJvb2NrLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLXJhdGluZy1hdmVyYWdlUmF0aW5nXCIpID8gPHN0cmluZz5ib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctYXZlcmFnZVJhdGluZ1wiKT8udGV4dENvbnRlbnQgOiBudWxsO1xyXG4gICAgICAgICAgICBjb25zdCByYXRpbmdDb3VudEJvY2s6IHN0cmluZyB8IG51bGwgPSBib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctcmF0aW5nc0NvdW50XCIpID8gPHN0cmluZz5ib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1yYXRpbmctcmF0aW5nc0NvdW50XCIpPy50ZXh0Q29udGVudCA6IG51bGw7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uQm9jazogc3RyaW5nIHwgbnVsbCA9IGJvb2NrLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLWRlc2NyaXB0aW9uXCIpID8gPHN0cmluZz5ib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1kZXNjcmlwdGlvblwiKT8udGV4dENvbnRlbnQgOiBudWxsO1xyXG4gICAgICAgICAgICBjb25zdCBwcmljZUJvY2s6IHN0cmluZyB8IG51bGwgPSBib29jay5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1wcmljZVwiKSA/IDxzdHJpbmc+Ym9vY2sucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tcHJpY2VcIik/LnRleHRDb250ZW50IDogbnVsbDtcclxuICAgICAgICAgICAgdHlwZSBpbmZvQm9jayA9IHtcclxuICAgICAgICAgICAgICAgIGluZGV4Qm9vY2s6IHN0cmluZyB8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBzcmNJbWdCb2NrOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBhdXRvckJvY2s6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgIHRpdGxlQm9jazogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgYXZlcmFnZVJhdGluZ0JvY2s6IHN0cmluZyB8IG51bGwsXHJcbiAgICAgICAgICAgICAgICByYXRpbmdDb3VudEJvY2s6IHN0cmluZyB8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbkJvY2s6IHN0cmluZyB8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBwcmljZUJvY2s6IHN0cmluZyB8IG51bGwsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGxldCBpbmZvQm9jazogaW5mb0JvY2sgPSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleEJvb2NrOiBpbmRleEJvb2NrLFxyXG4gICAgICAgICAgICAgICAgc3JjSW1nQm9jazogc3JjSW1nQm9jayxcclxuICAgICAgICAgICAgICAgIGF1dG9yQm9jazogYXV0b3JCb2NrLFxyXG4gICAgICAgICAgICAgICAgdGl0bGVCb2NrOiB0aXRsZUJvY2ssXHJcbiAgICAgICAgICAgICAgICBhdmVyYWdlUmF0aW5nQm9jazogYXZlcmFnZVJhdGluZ0JvY2ssXHJcbiAgICAgICAgICAgICAgICByYXRpbmdDb3VudEJvY2s6IHJhdGluZ0NvdW50Qm9jayxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uQm9jazogZGVzY3JpcHRpb25Cb2NrLFxyXG4gICAgICAgICAgICAgICAgcHJpY2VCb2NrOiBwcmljZUJvY2tcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGJheS5jbGFzc0xpc3QuY29udGFpbnMoXCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tYnRuX2FjdGl2ZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgYmF5LmNsYXNzTGlzdC5yZW1vdmUoXCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tYnRuX2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIGJheS5jbGFzc0xpc3QuYWRkKFwiY29udGFpbmVyX19ib29rcy1ibG9jay1pbmZvLWJ0blwiKVxyXG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZCb2tzID0gbnVtYmVyT2ZCb2tzIC0gMTtcclxuICAgICAgICAgICAgICAgIGJheS5pbm5lckhUTUwgPSBcImJ1eSBub3dcIjtcclxuICAgICAgICAgICAgICAgIGJvb2Nrc0RhdGEucG9wKGluZm9Cb2NrKTtcclxuICAgICAgICAgICAgICAgIGJvb2Nrc0RhdGFMb2NhbC5wb3AoaW5mb0JvY2spO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwdWJsaXNoZWRCb29rc1wiLCBKU09OLnN0cmluZ2lmeShib29ja3NEYXRhTG9jYWwpKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlVG9Cb29rKG51bWJlck9mQm9rcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBiYXkuY2xhc3NMaXN0LmFkZChcImNvbnRhaW5lcl9fYm9va3MtYmxvY2staW5mby1idG5fYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgYmF5LmNsYXNzTGlzdC5yZW1vdmUoXCJjb250YWluZXJfX2Jvb2tzLWJsb2NrLWluZm8tYnRuXCIpXHJcbiAgICAgICAgICAgICAgICBiYXkuaW5uZXJIVE1MID0gXCJpbiB0aGUgY2FydFwiO1xyXG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZCb2tzID0gbnVtYmVyT2ZCb2tzICsgMTtcclxuICAgICAgICAgICAgICAgIGJvb2Nrc0RhdGEucHVzaChpbmZvQm9jayk7XHJcbiAgICAgICAgICAgICAgICBib29ja3NEYXRhTG9jYWwucHVzaChpbmZvQm9jayk7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInB1Ymxpc2hlZEJvb2tzXCIsIEpTT04uc3RyaW5naWZ5KGJvb2Nrc0RhdGFMb2NhbCkpO1xyXG4gICAgICAgICAgICAgICAgYWRkVG9Cb29rKG51bWJlck9mQm9rcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuY29uc3QgYWRkVG9Cb29rID0gKG51bWJlck9mQm9rczogbnVtYmVyKSA9PiB7XHJcbiAgICBjb25zdCBjYXJ0OiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fdXNlci1ibG9jay1jYXJ0XCIpO1xyXG4gICAgaWYgKGNhcnQgPT09IG51bGwpIHJldHVybjtcclxuICAgIGNvbnN0IG51bWJlckJvb2tzRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oZWFkZXJfX3VzZXItYmxvY2stY2FydC1udW1iZXJCb29rc1wiKS5sZW5ndGg7XHJcbiAgICBpZiAobnVtYmVyQm9va3NEaXYgPT0gMCkge1xyXG4gICAgICAgIGNvbnN0IG51bWJlckJvb2tzOiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbnVtYmVyQm9va3MuY2xhc3NMaXN0LmFkZChcImhlYWRlcl9fdXNlci1ibG9jay1jYXJ0LW51bWJlckJvb2tzXCIpO1xyXG4gICAgICAgIGxldCBudW1UZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICAgICAgbnVtVGV4dC5jbGFzc0xpc3QuYWRkKFwiaGVhZGVyX191c2VyLWJsb2NrLWNhcnQtbnVtYmVyQm9va3MtdGV4dFwiKTtcclxuICAgICAgICBudW1UZXh0LmlubmVyVGV4dCA9IGAke251bWJlck9mQm9rc31gO1xyXG4gICAgICAgIG51bWJlckJvb2tzLmFwcGVuZENoaWxkKG51bVRleHQpO1xyXG4gICAgICAgIGNhcnQuYXBwZW5kQ2hpbGQobnVtYmVyQm9va3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBudW1iZXJCb29rc1RleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fdXNlci1ibG9jay1jYXJ0LW51bWJlckJvb2tzLXRleHRcIik7XHJcbiAgICAgICAgaWYgKG51bWJlckJvb2tzVGV4dCA9PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgbnVtYmVyQm9va3NUZXh0LnRleHRDb250ZW50ID0gYCR7bnVtYmVyT2ZCb2tzfWBcclxuICAgIH1cclxuICAgIFxyXG59XHJcbmNvbnN0IHJlbW92ZVRvQm9vayA9IChudW1iZXJPZkJva3M6IG51bWJlcikgPT4ge1xyXG4gICAgY29uc3QgbnVtYmVyQm9va3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fdXNlci1ibG9jay1jYXJ0LW51bWJlckJvb2tzXCIpO1xyXG4gICAgY29uc3QgbnVtYmVyQm9va3NUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX3VzZXItYmxvY2stY2FydC1udW1iZXJCb29rcy10ZXh0XCIpO1xyXG4gICAgaWYgKG51bWJlckJvb2tzID09IG51bGwpIHJldHVybjtcclxuICAgIGlmIChudW1iZXJCb29rc1RleHQgPT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgbnVtYmVyQm9va3NUZXh0LnRleHRDb250ZW50ID0gYCR7bnVtYmVyT2ZCb2tzfWA7XHJcbiAgICBpZiAobnVtYmVyT2ZCb2tzID09PSAwKSBudW1iZXJCb29rcy5yZW1vdmUoKTtcclxufSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdCAmJiBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnRhZ05hbWUudG9VcHBlckNhc2UoKSA9PT0gJ1NDUklQVCcpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM7XG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkge1xuXHRcdFx0dmFyIGkgPSBzY3JpcHRzLmxlbmd0aCAtIDE7XG5cdFx0XHR3aGlsZSAoaSA+IC0xICYmICghc2NyaXB0VXJsIHx8ICEvXmh0dHAocz8pOi8udGVzdChzY3JpcHRVcmwpKSkgc2NyaXB0VXJsID0gc2NyaXB0c1tpLS1dLnNyYztcblx0XHR9XG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvXmJsb2I6LywgXCJcIikucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImltcG9ydCBcIi4vc2NyaXB0L3NjcmlwdC50c1wiO1xyXG5pbXBvcnQgXCIuL3NjcmlwdC9zbGlkZXIudHNcIlxyXG5pbXBvcnQgXCIuL3N0eWxlL3N0eWxlLnNjc3NcIjtcclxuZnVuY3Rpb24gcmVxdWlyZUFsbChyKSB7IHIua2V5cygpLmZvckVhY2gocik7IH0gLy8g0YTRg9C90LrRhtC40Y8g0LTQu9GPINC00L7QsdCw0LLQu9C10L3QuNGPINCy0YHQtdGFINC60LDRgNGC0LjQvdC+0Log0LIgd2VicGFja1xyXG5yZXF1aXJlQWxsKHJlcXVpcmUuY29udGV4dCgnL2ltYWdlcy9wbmcnLCB0cnVlKSk7XHJcbnJlcXVpcmVBbGwocmVxdWlyZS5jb250ZXh0KCcvaW1hZ2VzL3N2ZycsIHRydWUpKTsiXSwibmFtZXMiOlsibW9iaWxsQnRuTWVudSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJtZW51TGlzdCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNvbnN0cnVjdG9yIiwiZG90cyIsImJsb2NrQmFubmVyIiwiaW1nIiwiaW5kZXhEb3RzIiwidGhpcyIsInNsaWRlciIsImZvckVhY2giLCJkb3QiLCJpbmRleCIsInZhbHVlIiwicmVtb3ZlIiwiYWRkIiwidW5kZWZpbmVkIiwiaW5uZXJIVE1MIiwic2xpZGVySW50ZXJ2YWwiLCJudW0iLCJzZXRJbnRlcnZhbCIsImxlbmd0aCIsIm1hcCIsIndlYnBhY2tDb250ZXh0IiwicmVxIiwiaWQiLCJ3ZWJwYWNrQ29udGV4dFJlc29sdmUiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibyIsImUiLCJFcnJvciIsImNvZGUiLCJrZXlzIiwiT2JqZWN0IiwicmVzb2x2ZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJBUEkiLCJzdGFydEluZGV4IiwibWF4UmVzdWx0cyIsImNhdGVnb3J5IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImRpc3BsYXlSZXN1bHQiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJkYXRhIiwicmVzdWx0QVBJIiwiaXRlbXMiLCJjb250YWluZXJCb29rcyIsImkiLCJ2b2x1bWVJbmZvIiwiaW1hZ2VMaW5rcyIsInRodW1ibmFpbCIsInRpdGxlIiwicHJpY2UiLCJzYWxlSW5mbyIsInJldGFpbFByaWNlIiwiYW1vdW50IiwidG9GaXhlZCIsInNob3dCb29rIiwiYXV0aG9ycyIsImpvaW4iLCJhdmVyYWdlUmF0aW5nIiwicmF0aW5nc0NvdW50IiwiZGVzY3JpcHRpb24iLCJpbnNlcnRBZGphY2VudEhUTUwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGl2IiwiYXJyYXkiLCJ0ZXh0U3BhbiIsIm51bUNvbnRlbnQiLCJ0ZXh0Q29udGVudCIsInJlc3VsdFJhdGluZyIsImZpcnNFbGVtZW50RGl2QXZlcmFnZVJhdGluZyIsIm1lbnVMaW5rIiwiQXJyYXkiLCJmcm9tIiwiaXRlbSIsIm1lbnVBY3RpdmUiLCJ2YWx1ZVNlbGVjdGVkQ2F0ZWdvcnkiLCJjYXRlZ29yaWVzIiwiYm9va3MiLCJjYXRlZ29yaWVzSW5wdXRBY3RpdmUiLCJ2YWx1ZUNhdGVnb3J5IiwicG9wIiwidW5zaGlmdCIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiYWN0aXZlQ2F0IiwiZ2V0QXR0cmlidXRlIiwic2F2ZUNhdGVnb3JpZXNBY3RpdmUiLCJsb2NhbEluZGV4QWN0aXZlIiwicGFyc2VJbnQiLCJwYXJzZSIsImNhdGVnb3JpZXNJbnB1dCIsImNhdGVnb3J5SW5wdXQiLCJsb2FkQ2F0ZWdvcmllc0FjdGl2ZSIsImJ0bkxvYWRNb3JlIiwiY2xpY2siLCJsb2FkTW9yZSIsImJvb2Nrc0RhdGFMb2NhbCIsImJvb2Nrc0RhdGEiLCJidG5CdXkiLCJudW1iZXJPZkJva3MiLCJiYXkiLCJib29jayIsImNsb3Nlc3QiLCJpbmRleEJvb2NrIiwiaW1nQm9jayIsInNyY0ltZ0JvY2siLCJzcmMiLCJpbmZvQm9jayIsImF1dG9yQm9jayIsInRpdGxlQm9jayIsImF2ZXJhZ2VSYXRpbmdCb2NrIiwicmF0aW5nQ291bnRCb2NrIiwiZGVzY3JpcHRpb25Cb2NrIiwicHJpY2VCb2NrIiwiY29udGFpbnMiLCJyZW1vdmVUb0Jvb2siLCJwdXNoIiwiYWRkVG9Cb29rIiwiY2FydCIsIm51bWJlckJvb2tzIiwiY3JlYXRlRWxlbWVudCIsIm51bVRleHQiLCJpbm5lclRleHQiLCJhcHBlbmRDaGlsZCIsIm51bWJlckJvb2tzVGV4dCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJ3aW5kb3ciLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJjdXJyZW50U2NyaXB0IiwidGFnTmFtZSIsInRvVXBwZXJDYXNlIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwidGVzdCIsInJlcGxhY2UiLCJwIiwicmVxdWlyZUFsbCJdLCJzb3VyY2VSb290IjoiIn0=